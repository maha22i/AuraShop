function kk(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Pk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var aw={exports:{}},wc={},lw={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ma=Symbol.for("react.element"),Ck=Symbol.for("react.portal"),bk=Symbol.for("react.fragment"),Nk=Symbol.for("react.strict_mode"),Rk=Symbol.for("react.profiler"),jk=Symbol.for("react.provider"),Dk=Symbol.for("react.context"),Vk=Symbol.for("react.forward_ref"),Ok=Symbol.for("react.suspense"),Lk=Symbol.for("react.memo"),Mk=Symbol.for("react.lazy"),iv=Symbol.iterator;function Fk(t){return t===null||typeof t!="object"?null:(t=iv&&t[iv]||t["@@iterator"],typeof t=="function"?t:null)}var uw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cw=Object.assign,hw={};function zi(t,e,n){this.props=t,this.context=e,this.refs=hw,this.updater=n||uw}zi.prototype.isReactComponent={};zi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};zi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function dw(){}dw.prototype=zi.prototype;function wp(t,e,n){this.props=t,this.context=e,this.refs=hw,this.updater=n||uw}var Ep=wp.prototype=new dw;Ep.constructor=wp;cw(Ep,zi.prototype);Ep.isPureReactComponent=!0;var ov=Array.isArray,fw=Object.prototype.hasOwnProperty,Tp={current:null},pw={key:!0,ref:!0,__self:!0,__source:!0};function mw(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)fw.call(e,r)&&!pw.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Ma,type:t,key:i,ref:o,props:s,_owner:Tp.current}}function Uk(t,e){return{$$typeof:Ma,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Sp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ma}function Bk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var av=/\/+/g;function Mh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Bk(""+t.key):e.toString(36)}function Zl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ma:case Ck:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Mh(o,0):r,ov(s)?(n="",t!=null&&(n=t.replace(av,"$&/")+"/"),Zl(s,e,n,"",function(c){return c})):s!=null&&(Sp(s)&&(s=Uk(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(av,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",ov(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Mh(i,a);o+=Zl(i,e,n,l,s)}else if(l=Fk(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Mh(i,a++),o+=Zl(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Il(t,e,n){if(t==null)return t;var r=[],s=0;return Zl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function zk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var St={current:null},eu={transition:null},$k={ReactCurrentDispatcher:St,ReactCurrentBatchConfig:eu,ReactCurrentOwner:Tp};function gw(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:Il,forEach:function(t,e,n){Il(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Il(t,function(){e++}),e},toArray:function(t){return Il(t,function(e){return e})||[]},only:function(t){if(!Sp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=zi;te.Fragment=bk;te.Profiler=Rk;te.PureComponent=wp;te.StrictMode=Nk;te.Suspense=Ok;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$k;te.act=gw;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=cw({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Tp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)fw.call(e,l)&&!pw.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Ma,type:t.type,key:s,ref:i,props:r,_owner:o}};te.createContext=function(t){return t={$$typeof:Dk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:jk,_context:t},t.Consumer=t};te.createElement=mw;te.createFactory=function(t){var e=mw.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:Vk,render:t}};te.isValidElement=Sp;te.lazy=function(t){return{$$typeof:Mk,_payload:{_status:-1,_result:t},_init:zk}};te.memo=function(t,e){return{$$typeof:Lk,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=eu.transition;eu.transition={};try{t()}finally{eu.transition=e}};te.unstable_act=gw;te.useCallback=function(t,e){return St.current.useCallback(t,e)};te.useContext=function(t){return St.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return St.current.useDeferredValue(t)};te.useEffect=function(t,e){return St.current.useEffect(t,e)};te.useId=function(){return St.current.useId()};te.useImperativeHandle=function(t,e,n){return St.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return St.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return St.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return St.current.useMemo(t,e)};te.useReducer=function(t,e,n){return St.current.useReducer(t,e,n)};te.useRef=function(t){return St.current.useRef(t)};te.useState=function(t){return St.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return St.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return St.current.useTransition()};te.version="18.3.1";lw.exports=te;var b=lw.exports;const qk=Pk(b),Wk=kk({__proto__:null,default:qk},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hk=b,Kk=Symbol.for("react.element"),Gk=Symbol.for("react.fragment"),Qk=Object.prototype.hasOwnProperty,Xk=Hk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Yk={key:!0,ref:!0,__self:!0,__source:!0};function yw(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Qk.call(e,r)&&!Yk.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Kk,type:t,key:i,ref:o,props:s,_owner:Xk.current}}wc.Fragment=Gk;wc.jsx=yw;wc.jsxs=yw;aw.exports=wc;var h=aw.exports,vw={exports:{}},Bt={},_w={exports:{}},xw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,G){var Y=z.length;z.push(G);e:for(;0<Y;){var we=Y-1>>>1,he=z[we];if(0<s(he,G))z[we]=G,z[Y]=he,Y=we;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var G=z[0],Y=z.pop();if(Y!==G){z[0]=Y;e:for(var we=0,he=z.length,Re=he>>>1;we<Re;){var An=2*(we+1)-1,kn=z[An],Pn=An+1,Cn=z[Pn];if(0>s(kn,Y))Pn<he&&0>s(Cn,kn)?(z[we]=Cn,z[Pn]=Y,we=Pn):(z[we]=kn,z[An]=Y,we=An);else if(Pn<he&&0>s(Cn,Y))z[we]=Cn,z[Pn]=Y,we=Pn;else break e}}return G}function s(z,G){var Y=z.sortIndex-G.sortIndex;return Y!==0?Y:z.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,p=null,m=3,_=!1,y=!1,I=!1,T=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(z){for(var G=n(c);G!==null;){if(G.callback===null)r(c);else if(G.startTime<=z)r(c),G.sortIndex=G.expirationTime,e(l,G);else break;G=n(c)}}function R(z){if(I=!1,S(z),!y)if(n(l)!==null)y=!0,Bs(O);else{var G=n(c);G!==null&&me(R,G.startTime-z)}}function O(z,G){y=!1,I&&(I=!1,x(w),w=-1),_=!0;var Y=m;try{for(S(G),p=n(l);p!==null&&(!(p.expirationTime>G)||z&&!N());){var we=p.callback;if(typeof we=="function"){p.callback=null,m=p.priorityLevel;var he=we(p.expirationTime<=G);G=t.unstable_now(),typeof he=="function"?p.callback=he:p===n(l)&&r(l),S(G)}else r(l);p=n(l)}if(p!==null)var Re=!0;else{var An=n(c);An!==null&&me(R,An.startTime-G),Re=!1}return Re}finally{p=null,m=Y,_=!1}}var M=!1,k=null,w=-1,A=5,P=-1;function N(){return!(t.unstable_now()-P<A)}function j(){if(k!==null){var z=t.unstable_now();P=z;var G=!0;try{G=k(!0,z)}finally{G?C():(M=!1,k=null)}}else M=!1}var C;if(typeof v=="function")C=function(){v(j)};else if(typeof MessageChannel<"u"){var yt=new MessageChannel,nr=yt.port2;yt.port1.onmessage=j,C=function(){nr.postMessage(null)}}else C=function(){T(j,0)};function Bs(z){k=z,M||(M=!0,C())}function me(z,G){w=T(function(){z(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){y||_||(y=!0,Bs(O))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(m){case 1:case 2:case 3:var G=3;break;default:G=m}var Y=m;m=G;try{return z()}finally{m=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,G){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Y=m;m=z;try{return G()}finally{m=Y}},t.unstable_scheduleCallback=function(z,G,Y){var we=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?we+Y:we):Y=we,z){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=Y+he,z={id:d++,callback:G,priorityLevel:z,startTime:Y,expirationTime:he,sortIndex:-1},Y>we?(z.sortIndex=Y,e(c,z),n(l)===null&&z===n(c)&&(I?(x(w),w=-1):I=!0,me(R,Y-we))):(z.sortIndex=he,e(l,z),y||_||(y=!0,Bs(O))),z},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(z){var G=m;return function(){var Y=m;m=G;try{return z.apply(this,arguments)}finally{m=Y}}}})(xw);_w.exports=xw;var Jk=_w.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zk=b,Ft=Jk;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ww=new Set,ra={};function js(t,e){Si(t,e),Si(t+"Capture",e)}function Si(t,e){for(ra[t]=e,t=0;t<e.length;t++)ww.add(e[t])}var Hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fd=Object.prototype.hasOwnProperty,eP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lv={},uv={};function tP(t){return Fd.call(uv,t)?!0:Fd.call(lv,t)?!1:eP.test(t)?uv[t]=!0:(lv[t]=!0,!1)}function nP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function rP(t,e,n,r){if(e===null||typeof e>"u"||nP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function It(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){et[t]=new It(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];et[e]=new It(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){et[t]=new It(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){et[t]=new It(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){et[t]=new It(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){et[t]=new It(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){et[t]=new It(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){et[t]=new It(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){et[t]=new It(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ip=/[\-:]([a-z])/g;function Ap(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ip,Ap);et[e]=new It(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ip,Ap);et[e]=new It(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ip,Ap);et[e]=new It(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){et[t]=new It(t,1,!1,t.toLowerCase(),null,!1,!1)});et.xlinkHref=new It("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){et[t]=new It(t,1,!1,t.toLowerCase(),null,!0,!0)});function kp(t,e,n,r){var s=et.hasOwnProperty(e)?et[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(rP(e,n,s,r)&&(n=null),r||s===null?tP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var er=Zk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Al=Symbol.for("react.element"),Xs=Symbol.for("react.portal"),Ys=Symbol.for("react.fragment"),Pp=Symbol.for("react.strict_mode"),Ud=Symbol.for("react.profiler"),Ew=Symbol.for("react.provider"),Tw=Symbol.for("react.context"),Cp=Symbol.for("react.forward_ref"),Bd=Symbol.for("react.suspense"),zd=Symbol.for("react.suspense_list"),bp=Symbol.for("react.memo"),ur=Symbol.for("react.lazy"),Sw=Symbol.for("react.offscreen"),cv=Symbol.iterator;function yo(t){return t===null||typeof t!="object"?null:(t=cv&&t[cv]||t["@@iterator"],typeof t=="function"?t:null)}var Ie=Object.assign,Fh;function Po(t){if(Fh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Fh=e&&e[1]||""}return`
`+Fh+t}var Uh=!1;function Bh(t,e){if(!t||Uh)return"";Uh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Uh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Po(t):""}function sP(t){switch(t.tag){case 5:return Po(t.type);case 16:return Po("Lazy");case 13:return Po("Suspense");case 19:return Po("SuspenseList");case 0:case 2:case 15:return t=Bh(t.type,!1),t;case 11:return t=Bh(t.type.render,!1),t;case 1:return t=Bh(t.type,!0),t;default:return""}}function $d(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ys:return"Fragment";case Xs:return"Portal";case Ud:return"Profiler";case Pp:return"StrictMode";case Bd:return"Suspense";case zd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Tw:return(t.displayName||"Context")+".Consumer";case Ew:return(t._context.displayName||"Context")+".Provider";case Cp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case bp:return e=t.displayName||null,e!==null?e:$d(t.type)||"Memo";case ur:e=t._payload,t=t._init;try{return $d(t(e))}catch{}}return null}function iP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $d(e);case 8:return e===Pp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Lr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Iw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function oP(t){var e=Iw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function kl(t){t._valueTracker||(t._valueTracker=oP(t))}function Aw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Iw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Tu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function qd(t,e){var n=e.checked;return Ie({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function hv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Lr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function kw(t,e){e=e.checked,e!=null&&kp(t,"checked",e,!1)}function Wd(t,e){kw(t,e);var n=Lr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Hd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Hd(t,e.type,Lr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function dv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Hd(t,e,n){(e!=="number"||Tu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Co=Array.isArray;function pi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Lr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Kd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ie({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function fv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Co(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Lr(n)}}function Pw(t,e){var n=Lr(e.value),r=Lr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function pv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Cw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Cw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Pl,bw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Pl=Pl||document.createElement("div"),Pl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Pl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function sa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Fo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aP=["Webkit","ms","Moz","O"];Object.keys(Fo).forEach(function(t){aP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Fo[e]=Fo[t]})});function Nw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Fo.hasOwnProperty(t)&&Fo[t]?(""+e).trim():e+"px"}function Rw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Nw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var lP=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qd(t,e){if(e){if(lP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Xd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yd=null;function Np(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Jd=null,mi=null,gi=null;function mv(t){if(t=Ba(t)){if(typeof Jd!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Ac(e),Jd(t.stateNode,t.type,e))}}function jw(t){mi?gi?gi.push(t):gi=[t]:mi=t}function Dw(){if(mi){var t=mi,e=gi;if(gi=mi=null,mv(t),e)for(t=0;t<e.length;t++)mv(e[t])}}function Vw(t,e){return t(e)}function Ow(){}var zh=!1;function Lw(t,e,n){if(zh)return t(e,n);zh=!0;try{return Vw(t,e,n)}finally{zh=!1,(mi!==null||gi!==null)&&(Ow(),Dw())}}function ia(t,e){var n=t.stateNode;if(n===null)return null;var r=Ac(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Zd=!1;if(Hn)try{var vo={};Object.defineProperty(vo,"passive",{get:function(){Zd=!0}}),window.addEventListener("test",vo,vo),window.removeEventListener("test",vo,vo)}catch{Zd=!1}function uP(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Uo=!1,Su=null,Iu=!1,ef=null,cP={onError:function(t){Uo=!0,Su=t}};function hP(t,e,n,r,s,i,o,a,l){Uo=!1,Su=null,uP.apply(cP,arguments)}function dP(t,e,n,r,s,i,o,a,l){if(hP.apply(this,arguments),Uo){if(Uo){var c=Su;Uo=!1,Su=null}else throw Error(U(198));Iu||(Iu=!0,ef=c)}}function Ds(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Mw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function gv(t){if(Ds(t)!==t)throw Error(U(188))}function fP(t){var e=t.alternate;if(!e){if(e=Ds(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return gv(s),t;if(i===r)return gv(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function Fw(t){return t=fP(t),t!==null?Uw(t):null}function Uw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Uw(t);if(e!==null)return e;t=t.sibling}return null}var Bw=Ft.unstable_scheduleCallback,yv=Ft.unstable_cancelCallback,pP=Ft.unstable_shouldYield,mP=Ft.unstable_requestPaint,Ve=Ft.unstable_now,gP=Ft.unstable_getCurrentPriorityLevel,Rp=Ft.unstable_ImmediatePriority,zw=Ft.unstable_UserBlockingPriority,Au=Ft.unstable_NormalPriority,yP=Ft.unstable_LowPriority,$w=Ft.unstable_IdlePriority,Ec=null,pn=null;function vP(t){if(pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(Ec,t,void 0,(t.current.flags&128)===128)}catch{}}var rn=Math.clz32?Math.clz32:wP,_P=Math.log,xP=Math.LN2;function wP(t){return t>>>=0,t===0?32:31-(_P(t)/xP|0)|0}var Cl=64,bl=4194304;function bo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ku(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=bo(a):(i&=o,i!==0&&(r=bo(i)))}else o=n&~s,o!==0?r=bo(o):i!==0&&(r=bo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-rn(e),s=1<<n,r|=t[n],e&=~s;return r}function EP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function TP(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-rn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=EP(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function tf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function qw(){var t=Cl;return Cl<<=1,!(Cl&4194240)&&(Cl=64),t}function $h(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Fa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-rn(e),t[e]=n}function SP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-rn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function jp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-rn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var le=0;function Ww(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Hw,Dp,Kw,Gw,Qw,nf=!1,Nl=[],Er=null,Tr=null,Sr=null,oa=new Map,aa=new Map,hr=[],IP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vv(t,e){switch(t){case"focusin":case"focusout":Er=null;break;case"dragenter":case"dragleave":Tr=null;break;case"mouseover":case"mouseout":Sr=null;break;case"pointerover":case"pointerout":oa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":aa.delete(e.pointerId)}}function _o(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ba(e),e!==null&&Dp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function AP(t,e,n,r,s){switch(e){case"focusin":return Er=_o(Er,t,e,n,r,s),!0;case"dragenter":return Tr=_o(Tr,t,e,n,r,s),!0;case"mouseover":return Sr=_o(Sr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return oa.set(i,_o(oa.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,aa.set(i,_o(aa.get(i)||null,t,e,n,r,s)),!0}return!1}function Xw(t){var e=hs(t.target);if(e!==null){var n=Ds(e);if(n!==null){if(e=n.tag,e===13){if(e=Mw(n),e!==null){t.blockedOn=e,Qw(t.priority,function(){Kw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function tu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=rf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Yd=r,n.target.dispatchEvent(r),Yd=null}else return e=Ba(n),e!==null&&Dp(e),t.blockedOn=n,!1;e.shift()}return!0}function _v(t,e,n){tu(t)&&n.delete(e)}function kP(){nf=!1,Er!==null&&tu(Er)&&(Er=null),Tr!==null&&tu(Tr)&&(Tr=null),Sr!==null&&tu(Sr)&&(Sr=null),oa.forEach(_v),aa.forEach(_v)}function xo(t,e){t.blockedOn===e&&(t.blockedOn=null,nf||(nf=!0,Ft.unstable_scheduleCallback(Ft.unstable_NormalPriority,kP)))}function la(t){function e(s){return xo(s,t)}if(0<Nl.length){xo(Nl[0],t);for(var n=1;n<Nl.length;n++){var r=Nl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Er!==null&&xo(Er,t),Tr!==null&&xo(Tr,t),Sr!==null&&xo(Sr,t),oa.forEach(e),aa.forEach(e),n=0;n<hr.length;n++)r=hr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<hr.length&&(n=hr[0],n.blockedOn===null);)Xw(n),n.blockedOn===null&&hr.shift()}var yi=er.ReactCurrentBatchConfig,Pu=!0;function PP(t,e,n,r){var s=le,i=yi.transition;yi.transition=null;try{le=1,Vp(t,e,n,r)}finally{le=s,yi.transition=i}}function CP(t,e,n,r){var s=le,i=yi.transition;yi.transition=null;try{le=4,Vp(t,e,n,r)}finally{le=s,yi.transition=i}}function Vp(t,e,n,r){if(Pu){var s=rf(t,e,n,r);if(s===null)Zh(t,e,r,Cu,n),vv(t,r);else if(AP(s,t,e,n,r))r.stopPropagation();else if(vv(t,r),e&4&&-1<IP.indexOf(t)){for(;s!==null;){var i=Ba(s);if(i!==null&&Hw(i),i=rf(t,e,n,r),i===null&&Zh(t,e,r,Cu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Zh(t,e,r,null,n)}}var Cu=null;function rf(t,e,n,r){if(Cu=null,t=Np(r),t=hs(t),t!==null)if(e=Ds(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Mw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Cu=t,null}function Yw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gP()){case Rp:return 1;case zw:return 4;case Au:case yP:return 16;case $w:return 536870912;default:return 16}default:return 16}}var vr=null,Op=null,nu=null;function Jw(){if(nu)return nu;var t,e=Op,n=e.length,r,s="value"in vr?vr.value:vr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return nu=s.slice(t,1<r?1-r:void 0)}function ru(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Rl(){return!0}function xv(){return!1}function zt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Rl:xv,this.isPropagationStopped=xv,this}return Ie(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Rl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Rl)},persist:function(){},isPersistent:Rl}),e}var $i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lp=zt($i),Ua=Ie({},$i,{view:0,detail:0}),bP=zt(Ua),qh,Wh,wo,Tc=Ie({},Ua,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wo&&(wo&&t.type==="mousemove"?(qh=t.screenX-wo.screenX,Wh=t.screenY-wo.screenY):Wh=qh=0,wo=t),qh)},movementY:function(t){return"movementY"in t?t.movementY:Wh}}),wv=zt(Tc),NP=Ie({},Tc,{dataTransfer:0}),RP=zt(NP),jP=Ie({},Ua,{relatedTarget:0}),Hh=zt(jP),DP=Ie({},$i,{animationName:0,elapsedTime:0,pseudoElement:0}),VP=zt(DP),OP=Ie({},$i,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),LP=zt(OP),MP=Ie({},$i,{data:0}),Ev=zt(MP),FP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},UP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},BP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=BP[t])?!!e[t]:!1}function Mp(){return zP}var $P=Ie({},Ua,{key:function(t){if(t.key){var e=FP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ru(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?UP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mp,charCode:function(t){return t.type==="keypress"?ru(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ru(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qP=zt($P),WP=Ie({},Tc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tv=zt(WP),HP=Ie({},Ua,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mp}),KP=zt(HP),GP=Ie({},$i,{propertyName:0,elapsedTime:0,pseudoElement:0}),QP=zt(GP),XP=Ie({},Tc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),YP=zt(XP),JP=[9,13,27,32],Fp=Hn&&"CompositionEvent"in window,Bo=null;Hn&&"documentMode"in document&&(Bo=document.documentMode);var ZP=Hn&&"TextEvent"in window&&!Bo,Zw=Hn&&(!Fp||Bo&&8<Bo&&11>=Bo),Sv=" ",Iv=!1;function eE(t,e){switch(t){case"keyup":return JP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Js=!1;function eC(t,e){switch(t){case"compositionend":return tE(e);case"keypress":return e.which!==32?null:(Iv=!0,Sv);case"textInput":return t=e.data,t===Sv&&Iv?null:t;default:return null}}function tC(t,e){if(Js)return t==="compositionend"||!Fp&&eE(t,e)?(t=Jw(),nu=Op=vr=null,Js=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Zw&&e.locale!=="ko"?null:e.data;default:return null}}var nC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Av(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!nC[t.type]:e==="textarea"}function nE(t,e,n,r){jw(r),e=bu(e,"onChange"),0<e.length&&(n=new Lp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var zo=null,ua=null;function rC(t){fE(t,0)}function Sc(t){var e=ti(t);if(Aw(e))return t}function sC(t,e){if(t==="change")return e}var rE=!1;if(Hn){var Kh;if(Hn){var Gh="oninput"in document;if(!Gh){var kv=document.createElement("div");kv.setAttribute("oninput","return;"),Gh=typeof kv.oninput=="function"}Kh=Gh}else Kh=!1;rE=Kh&&(!document.documentMode||9<document.documentMode)}function Pv(){zo&&(zo.detachEvent("onpropertychange",sE),ua=zo=null)}function sE(t){if(t.propertyName==="value"&&Sc(ua)){var e=[];nE(e,ua,t,Np(t)),Lw(rC,e)}}function iC(t,e,n){t==="focusin"?(Pv(),zo=e,ua=n,zo.attachEvent("onpropertychange",sE)):t==="focusout"&&Pv()}function oC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Sc(ua)}function aC(t,e){if(t==="click")return Sc(e)}function lC(t,e){if(t==="input"||t==="change")return Sc(e)}function uC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var an=typeof Object.is=="function"?Object.is:uC;function ca(t,e){if(an(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Fd.call(e,s)||!an(t[s],e[s]))return!1}return!0}function Cv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function bv(t,e){var n=Cv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Cv(n)}}function iE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?iE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function oE(){for(var t=window,e=Tu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Tu(t.document)}return e}function Up(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function cC(t){var e=oE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&iE(n.ownerDocument.documentElement,n)){if(r!==null&&Up(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=bv(n,i);var o=bv(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var hC=Hn&&"documentMode"in document&&11>=document.documentMode,Zs=null,sf=null,$o=null,of=!1;function Nv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;of||Zs==null||Zs!==Tu(r)||(r=Zs,"selectionStart"in r&&Up(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$o&&ca($o,r)||($o=r,r=bu(sf,"onSelect"),0<r.length&&(e=new Lp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Zs)))}function jl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ei={animationend:jl("Animation","AnimationEnd"),animationiteration:jl("Animation","AnimationIteration"),animationstart:jl("Animation","AnimationStart"),transitionend:jl("Transition","TransitionEnd")},Qh={},aE={};Hn&&(aE=document.createElement("div").style,"AnimationEvent"in window||(delete ei.animationend.animation,delete ei.animationiteration.animation,delete ei.animationstart.animation),"TransitionEvent"in window||delete ei.transitionend.transition);function Ic(t){if(Qh[t])return Qh[t];if(!ei[t])return t;var e=ei[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in aE)return Qh[t]=e[n];return t}var lE=Ic("animationend"),uE=Ic("animationiteration"),cE=Ic("animationstart"),hE=Ic("transitionend"),dE=new Map,Rv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hr(t,e){dE.set(t,e),js(e,[t])}for(var Xh=0;Xh<Rv.length;Xh++){var Yh=Rv[Xh],dC=Yh.toLowerCase(),fC=Yh[0].toUpperCase()+Yh.slice(1);Hr(dC,"on"+fC)}Hr(lE,"onAnimationEnd");Hr(uE,"onAnimationIteration");Hr(cE,"onAnimationStart");Hr("dblclick","onDoubleClick");Hr("focusin","onFocus");Hr("focusout","onBlur");Hr(hE,"onTransitionEnd");Si("onMouseEnter",["mouseout","mouseover"]);Si("onMouseLeave",["mouseout","mouseover"]);Si("onPointerEnter",["pointerout","pointerover"]);Si("onPointerLeave",["pointerout","pointerover"]);js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));js("onBeforeInput",["compositionend","keypress","textInput","paste"]);js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var No="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pC=new Set("cancel close invalid load scroll toggle".split(" ").concat(No));function jv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,dP(r,e,void 0,t),t.currentTarget=null}function fE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;jv(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;jv(s,a,c),i=l}}}if(Iu)throw t=ef,Iu=!1,ef=null,t}function ye(t,e){var n=e[hf];n===void 0&&(n=e[hf]=new Set);var r=t+"__bubble";n.has(r)||(pE(e,t,2,!1),n.add(r))}function Jh(t,e,n){var r=0;e&&(r|=4),pE(n,t,r,e)}var Dl="_reactListening"+Math.random().toString(36).slice(2);function ha(t){if(!t[Dl]){t[Dl]=!0,ww.forEach(function(n){n!=="selectionchange"&&(pC.has(n)||Jh(n,!1,t),Jh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Dl]||(e[Dl]=!0,Jh("selectionchange",!1,e))}}function pE(t,e,n,r){switch(Yw(e)){case 1:var s=PP;break;case 4:s=CP;break;default:s=Vp}n=s.bind(null,e,n,t),s=void 0,!Zd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Zh(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=hs(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Lw(function(){var c=i,d=Np(n),p=[];e:{var m=dE.get(t);if(m!==void 0){var _=Lp,y=t;switch(t){case"keypress":if(ru(n)===0)break e;case"keydown":case"keyup":_=qP;break;case"focusin":y="focus",_=Hh;break;case"focusout":y="blur",_=Hh;break;case"beforeblur":case"afterblur":_=Hh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=wv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=RP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=KP;break;case lE:case uE:case cE:_=VP;break;case hE:_=QP;break;case"scroll":_=bP;break;case"wheel":_=YP;break;case"copy":case"cut":case"paste":_=LP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Tv}var I=(e&4)!==0,T=!I&&t==="scroll",x=I?m!==null?m+"Capture":null:m;I=[];for(var v=c,S;v!==null;){S=v;var R=S.stateNode;if(S.tag===5&&R!==null&&(S=R,x!==null&&(R=ia(v,x),R!=null&&I.push(da(v,R,S)))),T)break;v=v.return}0<I.length&&(m=new _(m,y,null,n,d),p.push({event:m,listeners:I}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",m&&n!==Yd&&(y=n.relatedTarget||n.fromElement)&&(hs(y)||y[Kn]))break e;if((_||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,_?(y=n.relatedTarget||n.toElement,_=c,y=y?hs(y):null,y!==null&&(T=Ds(y),y!==T||y.tag!==5&&y.tag!==6)&&(y=null)):(_=null,y=c),_!==y)){if(I=wv,R="onMouseLeave",x="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(I=Tv,R="onPointerLeave",x="onPointerEnter",v="pointer"),T=_==null?m:ti(_),S=y==null?m:ti(y),m=new I(R,v+"leave",_,n,d),m.target=T,m.relatedTarget=S,R=null,hs(d)===c&&(I=new I(x,v+"enter",y,n,d),I.target=S,I.relatedTarget=T,R=I),T=R,_&&y)t:{for(I=_,x=y,v=0,S=I;S;S=Hs(S))v++;for(S=0,R=x;R;R=Hs(R))S++;for(;0<v-S;)I=Hs(I),v--;for(;0<S-v;)x=Hs(x),S--;for(;v--;){if(I===x||x!==null&&I===x.alternate)break t;I=Hs(I),x=Hs(x)}I=null}else I=null;_!==null&&Dv(p,m,_,I,!1),y!==null&&T!==null&&Dv(p,T,y,I,!0)}}e:{if(m=c?ti(c):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var O=sC;else if(Av(m))if(rE)O=lC;else{O=oC;var M=iC}else(_=m.nodeName)&&_.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(O=aC);if(O&&(O=O(t,c))){nE(p,O,n,d);break e}M&&M(t,m,c),t==="focusout"&&(M=m._wrapperState)&&M.controlled&&m.type==="number"&&Hd(m,"number",m.value)}switch(M=c?ti(c):window,t){case"focusin":(Av(M)||M.contentEditable==="true")&&(Zs=M,sf=c,$o=null);break;case"focusout":$o=sf=Zs=null;break;case"mousedown":of=!0;break;case"contextmenu":case"mouseup":case"dragend":of=!1,Nv(p,n,d);break;case"selectionchange":if(hC)break;case"keydown":case"keyup":Nv(p,n,d)}var k;if(Fp)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Js?eE(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(Zw&&n.locale!=="ko"&&(Js||w!=="onCompositionStart"?w==="onCompositionEnd"&&Js&&(k=Jw()):(vr=d,Op="value"in vr?vr.value:vr.textContent,Js=!0)),M=bu(c,w),0<M.length&&(w=new Ev(w,t,null,n,d),p.push({event:w,listeners:M}),k?w.data=k:(k=tE(n),k!==null&&(w.data=k)))),(k=ZP?eC(t,n):tC(t,n))&&(c=bu(c,"onBeforeInput"),0<c.length&&(d=new Ev("onBeforeInput","beforeinput",null,n,d),p.push({event:d,listeners:c}),d.data=k))}fE(p,e)})}function da(t,e,n){return{instance:t,listener:e,currentTarget:n}}function bu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ia(t,n),i!=null&&r.unshift(da(t,i,s)),i=ia(t,e),i!=null&&r.push(da(t,i,s))),t=t.return}return r}function Hs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Dv(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=ia(n,i),l!=null&&o.unshift(da(n,l,a))):s||(l=ia(n,i),l!=null&&o.push(da(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var mC=/\r\n?/g,gC=/\u0000|\uFFFD/g;function Vv(t){return(typeof t=="string"?t:""+t).replace(mC,`
`).replace(gC,"")}function Vl(t,e,n){if(e=Vv(e),Vv(t)!==e&&n)throw Error(U(425))}function Nu(){}var af=null,lf=null;function uf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var cf=typeof setTimeout=="function"?setTimeout:void 0,yC=typeof clearTimeout=="function"?clearTimeout:void 0,Ov=typeof Promise=="function"?Promise:void 0,vC=typeof queueMicrotask=="function"?queueMicrotask:typeof Ov<"u"?function(t){return Ov.resolve(null).then(t).catch(_C)}:cf;function _C(t){setTimeout(function(){throw t})}function ed(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),la(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);la(e)}function Ir(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Lv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var qi=Math.random().toString(36).slice(2),dn="__reactFiber$"+qi,fa="__reactProps$"+qi,Kn="__reactContainer$"+qi,hf="__reactEvents$"+qi,xC="__reactListeners$"+qi,wC="__reactHandles$"+qi;function hs(t){var e=t[dn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Kn]||n[dn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Lv(t);t!==null;){if(n=t[dn])return n;t=Lv(t)}return e}t=n,n=t.parentNode}return null}function Ba(t){return t=t[dn]||t[Kn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ti(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Ac(t){return t[fa]||null}var df=[],ni=-1;function Kr(t){return{current:t}}function _e(t){0>ni||(t.current=df[ni],df[ni]=null,ni--)}function pe(t,e){ni++,df[ni]=t.current,t.current=e}var Mr={},mt=Kr(Mr),Ct=Kr(!1),ws=Mr;function Ii(t,e){var n=t.type.contextTypes;if(!n)return Mr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function bt(t){return t=t.childContextTypes,t!=null}function Ru(){_e(Ct),_e(mt)}function Mv(t,e,n){if(mt.current!==Mr)throw Error(U(168));pe(mt,e),pe(Ct,n)}function mE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,iP(t)||"Unknown",s));return Ie({},n,r)}function ju(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mr,ws=mt.current,pe(mt,t),pe(Ct,Ct.current),!0}function Fv(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=mE(t,e,ws),r.__reactInternalMemoizedMergedChildContext=t,_e(Ct),_e(mt),pe(mt,t)):_e(Ct),pe(Ct,n)}var jn=null,kc=!1,td=!1;function gE(t){jn===null?jn=[t]:jn.push(t)}function EC(t){kc=!0,gE(t)}function Gr(){if(!td&&jn!==null){td=!0;var t=0,e=le;try{var n=jn;for(le=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}jn=null,kc=!1}catch(s){throw jn!==null&&(jn=jn.slice(t+1)),Bw(Rp,Gr),s}finally{le=e,td=!1}}return null}var ri=[],si=0,Du=null,Vu=0,Ht=[],Kt=0,Es=null,Dn=1,Vn="";function os(t,e){ri[si++]=Vu,ri[si++]=Du,Du=t,Vu=e}function yE(t,e,n){Ht[Kt++]=Dn,Ht[Kt++]=Vn,Ht[Kt++]=Es,Es=t;var r=Dn;t=Vn;var s=32-rn(r)-1;r&=~(1<<s),n+=1;var i=32-rn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Dn=1<<32-rn(e)+s|n<<s|r,Vn=i+t}else Dn=1<<i|n<<s|r,Vn=t}function Bp(t){t.return!==null&&(os(t,1),yE(t,1,0))}function zp(t){for(;t===Du;)Du=ri[--si],ri[si]=null,Vu=ri[--si],ri[si]=null;for(;t===Es;)Es=Ht[--Kt],Ht[Kt]=null,Vn=Ht[--Kt],Ht[Kt]=null,Dn=Ht[--Kt],Ht[Kt]=null}var Lt=null,Dt=null,xe=!1,nn=null;function vE(t,e){var n=Gt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Uv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Lt=t,Dt=Ir(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Lt=t,Dt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Es!==null?{id:Dn,overflow:Vn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Gt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Lt=t,Dt=null,!0):!1;default:return!1}}function ff(t){return(t.mode&1)!==0&&(t.flags&128)===0}function pf(t){if(xe){var e=Dt;if(e){var n=e;if(!Uv(t,e)){if(ff(t))throw Error(U(418));e=Ir(n.nextSibling);var r=Lt;e&&Uv(t,e)?vE(r,n):(t.flags=t.flags&-4097|2,xe=!1,Lt=t)}}else{if(ff(t))throw Error(U(418));t.flags=t.flags&-4097|2,xe=!1,Lt=t}}}function Bv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Lt=t}function Ol(t){if(t!==Lt)return!1;if(!xe)return Bv(t),xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!uf(t.type,t.memoizedProps)),e&&(e=Dt)){if(ff(t))throw _E(),Error(U(418));for(;e;)vE(t,e),e=Ir(e.nextSibling)}if(Bv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Dt=Ir(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Dt=null}}else Dt=Lt?Ir(t.stateNode.nextSibling):null;return!0}function _E(){for(var t=Dt;t;)t=Ir(t.nextSibling)}function Ai(){Dt=Lt=null,xe=!1}function $p(t){nn===null?nn=[t]:nn.push(t)}var TC=er.ReactCurrentBatchConfig;function Eo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Ll(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function zv(t){var e=t._init;return e(t._payload)}function xE(t){function e(x,v){if(t){var S=x.deletions;S===null?(x.deletions=[v],x.flags|=16):S.push(v)}}function n(x,v){if(!t)return null;for(;v!==null;)e(x,v),v=v.sibling;return null}function r(x,v){for(x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function s(x,v){return x=Cr(x,v),x.index=0,x.sibling=null,x}function i(x,v,S){return x.index=S,t?(S=x.alternate,S!==null?(S=S.index,S<v?(x.flags|=2,v):S):(x.flags|=2,v)):(x.flags|=1048576,v)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,v,S,R){return v===null||v.tag!==6?(v=ld(S,x.mode,R),v.return=x,v):(v=s(v,S),v.return=x,v)}function l(x,v,S,R){var O=S.type;return O===Ys?d(x,v,S.props.children,R,S.key):v!==null&&(v.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===ur&&zv(O)===v.type)?(R=s(v,S.props),R.ref=Eo(x,v,S),R.return=x,R):(R=cu(S.type,S.key,S.props,null,x.mode,R),R.ref=Eo(x,v,S),R.return=x,R)}function c(x,v,S,R){return v===null||v.tag!==4||v.stateNode.containerInfo!==S.containerInfo||v.stateNode.implementation!==S.implementation?(v=ud(S,x.mode,R),v.return=x,v):(v=s(v,S.children||[]),v.return=x,v)}function d(x,v,S,R,O){return v===null||v.tag!==7?(v=ys(S,x.mode,R,O),v.return=x,v):(v=s(v,S),v.return=x,v)}function p(x,v,S){if(typeof v=="string"&&v!==""||typeof v=="number")return v=ld(""+v,x.mode,S),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Al:return S=cu(v.type,v.key,v.props,null,x.mode,S),S.ref=Eo(x,null,v),S.return=x,S;case Xs:return v=ud(v,x.mode,S),v.return=x,v;case ur:var R=v._init;return p(x,R(v._payload),S)}if(Co(v)||yo(v))return v=ys(v,x.mode,S,null),v.return=x,v;Ll(x,v)}return null}function m(x,v,S,R){var O=v!==null?v.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return O!==null?null:a(x,v,""+S,R);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Al:return S.key===O?l(x,v,S,R):null;case Xs:return S.key===O?c(x,v,S,R):null;case ur:return O=S._init,m(x,v,O(S._payload),R)}if(Co(S)||yo(S))return O!==null?null:d(x,v,S,R,null);Ll(x,S)}return null}function _(x,v,S,R,O){if(typeof R=="string"&&R!==""||typeof R=="number")return x=x.get(S)||null,a(v,x,""+R,O);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Al:return x=x.get(R.key===null?S:R.key)||null,l(v,x,R,O);case Xs:return x=x.get(R.key===null?S:R.key)||null,c(v,x,R,O);case ur:var M=R._init;return _(x,v,S,M(R._payload),O)}if(Co(R)||yo(R))return x=x.get(S)||null,d(v,x,R,O,null);Ll(v,R)}return null}function y(x,v,S,R){for(var O=null,M=null,k=v,w=v=0,A=null;k!==null&&w<S.length;w++){k.index>w?(A=k,k=null):A=k.sibling;var P=m(x,k,S[w],R);if(P===null){k===null&&(k=A);break}t&&k&&P.alternate===null&&e(x,k),v=i(P,v,w),M===null?O=P:M.sibling=P,M=P,k=A}if(w===S.length)return n(x,k),xe&&os(x,w),O;if(k===null){for(;w<S.length;w++)k=p(x,S[w],R),k!==null&&(v=i(k,v,w),M===null?O=k:M.sibling=k,M=k);return xe&&os(x,w),O}for(k=r(x,k);w<S.length;w++)A=_(k,x,w,S[w],R),A!==null&&(t&&A.alternate!==null&&k.delete(A.key===null?w:A.key),v=i(A,v,w),M===null?O=A:M.sibling=A,M=A);return t&&k.forEach(function(N){return e(x,N)}),xe&&os(x,w),O}function I(x,v,S,R){var O=yo(S);if(typeof O!="function")throw Error(U(150));if(S=O.call(S),S==null)throw Error(U(151));for(var M=O=null,k=v,w=v=0,A=null,P=S.next();k!==null&&!P.done;w++,P=S.next()){k.index>w?(A=k,k=null):A=k.sibling;var N=m(x,k,P.value,R);if(N===null){k===null&&(k=A);break}t&&k&&N.alternate===null&&e(x,k),v=i(N,v,w),M===null?O=N:M.sibling=N,M=N,k=A}if(P.done)return n(x,k),xe&&os(x,w),O;if(k===null){for(;!P.done;w++,P=S.next())P=p(x,P.value,R),P!==null&&(v=i(P,v,w),M===null?O=P:M.sibling=P,M=P);return xe&&os(x,w),O}for(k=r(x,k);!P.done;w++,P=S.next())P=_(k,x,w,P.value,R),P!==null&&(t&&P.alternate!==null&&k.delete(P.key===null?w:P.key),v=i(P,v,w),M===null?O=P:M.sibling=P,M=P);return t&&k.forEach(function(j){return e(x,j)}),xe&&os(x,w),O}function T(x,v,S,R){if(typeof S=="object"&&S!==null&&S.type===Ys&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Al:e:{for(var O=S.key,M=v;M!==null;){if(M.key===O){if(O=S.type,O===Ys){if(M.tag===7){n(x,M.sibling),v=s(M,S.props.children),v.return=x,x=v;break e}}else if(M.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===ur&&zv(O)===M.type){n(x,M.sibling),v=s(M,S.props),v.ref=Eo(x,M,S),v.return=x,x=v;break e}n(x,M);break}else e(x,M);M=M.sibling}S.type===Ys?(v=ys(S.props.children,x.mode,R,S.key),v.return=x,x=v):(R=cu(S.type,S.key,S.props,null,x.mode,R),R.ref=Eo(x,v,S),R.return=x,x=R)}return o(x);case Xs:e:{for(M=S.key;v!==null;){if(v.key===M)if(v.tag===4&&v.stateNode.containerInfo===S.containerInfo&&v.stateNode.implementation===S.implementation){n(x,v.sibling),v=s(v,S.children||[]),v.return=x,x=v;break e}else{n(x,v);break}else e(x,v);v=v.sibling}v=ud(S,x.mode,R),v.return=x,x=v}return o(x);case ur:return M=S._init,T(x,v,M(S._payload),R)}if(Co(S))return y(x,v,S,R);if(yo(S))return I(x,v,S,R);Ll(x,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,v!==null&&v.tag===6?(n(x,v.sibling),v=s(v,S),v.return=x,x=v):(n(x,v),v=ld(S,x.mode,R),v.return=x,x=v),o(x)):n(x,v)}return T}var ki=xE(!0),wE=xE(!1),Ou=Kr(null),Lu=null,ii=null,qp=null;function Wp(){qp=ii=Lu=null}function Hp(t){var e=Ou.current;_e(Ou),t._currentValue=e}function mf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function vi(t,e){Lu=t,qp=ii=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Pt=!0),t.firstContext=null)}function Xt(t){var e=t._currentValue;if(qp!==t)if(t={context:t,memoizedValue:e,next:null},ii===null){if(Lu===null)throw Error(U(308));ii=t,Lu.dependencies={lanes:0,firstContext:t}}else ii=ii.next=t;return e}var ds=null;function Kp(t){ds===null?ds=[t]:ds.push(t)}function EE(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Kp(e)):(n.next=s.next,s.next=n),e.interleaved=n,Gn(t,r)}function Gn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var cr=!1;function Gp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function TE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Bn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ar(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ie&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Gn(t,n)}return s=r.interleaved,s===null?(e.next=e,Kp(r)):(e.next=s.next,s.next=e),r.interleaved=e,Gn(t,n)}function su(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jp(t,n)}}function $v(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Mu(t,e,n,r){var s=t.updateQueue;cr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var p=s.baseState;o=0,d=c=l=null,a=i;do{var m=a.lane,_=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:_,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,I=a;switch(m=e,_=n,I.tag){case 1:if(y=I.payload,typeof y=="function"){p=y.call(_,p,m);break e}p=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=I.payload,m=typeof y=="function"?y.call(_,p,m):y,m==null)break e;p=Ie({},p,m);break e;case 2:cr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else _={eventTime:_,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=_,l=p):d=d.next=_,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(l=p),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ss|=o,t.lanes=o,t.memoizedState=p}}function qv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var za={},mn=Kr(za),pa=Kr(za),ma=Kr(za);function fs(t){if(t===za)throw Error(U(174));return t}function Qp(t,e){switch(pe(ma,e),pe(pa,t),pe(mn,za),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Gd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Gd(e,t)}_e(mn),pe(mn,e)}function Pi(){_e(mn),_e(pa),_e(ma)}function SE(t){fs(ma.current);var e=fs(mn.current),n=Gd(e,t.type);e!==n&&(pe(pa,t),pe(mn,n))}function Xp(t){pa.current===t&&(_e(mn),_e(pa))}var Ee=Kr(0);function Fu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var nd=[];function Yp(){for(var t=0;t<nd.length;t++)nd[t]._workInProgressVersionPrimary=null;nd.length=0}var iu=er.ReactCurrentDispatcher,rd=er.ReactCurrentBatchConfig,Ts=0,Se=null,Ue=null,qe=null,Uu=!1,qo=!1,ga=0,SC=0;function it(){throw Error(U(321))}function Jp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!an(t[n],e[n]))return!1;return!0}function Zp(t,e,n,r,s,i){if(Ts=i,Se=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,iu.current=t===null||t.memoizedState===null?PC:CC,t=n(r,s),qo){i=0;do{if(qo=!1,ga=0,25<=i)throw Error(U(301));i+=1,qe=Ue=null,e.updateQueue=null,iu.current=bC,t=n(r,s)}while(qo)}if(iu.current=Bu,e=Ue!==null&&Ue.next!==null,Ts=0,qe=Ue=Se=null,Uu=!1,e)throw Error(U(300));return t}function em(){var t=ga!==0;return ga=0,t}function hn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?Se.memoizedState=qe=t:qe=qe.next=t,qe}function Yt(){if(Ue===null){var t=Se.alternate;t=t!==null?t.memoizedState:null}else t=Ue.next;var e=qe===null?Se.memoizedState:qe.next;if(e!==null)qe=e,Ue=t;else{if(t===null)throw Error(U(310));Ue=t,t={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},qe===null?Se.memoizedState=qe=t:qe=qe.next=t}return qe}function ya(t,e){return typeof e=="function"?e(t):e}function sd(t){var e=Yt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=Ue,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((Ts&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var p={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=p,o=r):l=l.next=p,Se.lanes|=d,Ss|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,an(r,e.memoizedState)||(Pt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Se.lanes|=i,Ss|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function id(t){var e=Yt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);an(i,e.memoizedState)||(Pt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function IE(){}function AE(t,e){var n=Se,r=Yt(),s=e(),i=!an(r.memoizedState,s);if(i&&(r.memoizedState=s,Pt=!0),r=r.queue,tm(CE.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||qe!==null&&qe.memoizedState.tag&1){if(n.flags|=2048,va(9,PE.bind(null,n,r,s,e),void 0,null),We===null)throw Error(U(349));Ts&30||kE(n,e,s)}return s}function kE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function PE(t,e,n,r){e.value=n,e.getSnapshot=r,bE(e)&&NE(t)}function CE(t,e,n){return n(function(){bE(e)&&NE(t)})}function bE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!an(t,n)}catch{return!0}}function NE(t){var e=Gn(t,1);e!==null&&sn(e,t,1,-1)}function Wv(t){var e=hn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:t},e.queue=t,t=t.dispatch=kC.bind(null,Se,t),[e.memoizedState,t]}function va(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function RE(){return Yt().memoizedState}function ou(t,e,n,r){var s=hn();Se.flags|=t,s.memoizedState=va(1|e,n,void 0,r===void 0?null:r)}function Pc(t,e,n,r){var s=Yt();r=r===void 0?null:r;var i=void 0;if(Ue!==null){var o=Ue.memoizedState;if(i=o.destroy,r!==null&&Jp(r,o.deps)){s.memoizedState=va(e,n,i,r);return}}Se.flags|=t,s.memoizedState=va(1|e,n,i,r)}function Hv(t,e){return ou(8390656,8,t,e)}function tm(t,e){return Pc(2048,8,t,e)}function jE(t,e){return Pc(4,2,t,e)}function DE(t,e){return Pc(4,4,t,e)}function VE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function OE(t,e,n){return n=n!=null?n.concat([t]):null,Pc(4,4,VE.bind(null,e,t),n)}function nm(){}function LE(t,e){var n=Yt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Jp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ME(t,e){var n=Yt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Jp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function FE(t,e,n){return Ts&21?(an(n,e)||(n=qw(),Se.lanes|=n,Ss|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Pt=!0),t.memoizedState=n)}function IC(t,e){var n=le;le=n!==0&&4>n?n:4,t(!0);var r=rd.transition;rd.transition={};try{t(!1),e()}finally{le=n,rd.transition=r}}function UE(){return Yt().memoizedState}function AC(t,e,n){var r=Pr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},BE(t))zE(e,n);else if(n=EE(t,e,n,r),n!==null){var s=Tt();sn(n,t,r,s),$E(n,e,r)}}function kC(t,e,n){var r=Pr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(BE(t))zE(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,an(a,o)){var l=e.interleaved;l===null?(s.next=s,Kp(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=EE(t,e,s,r),n!==null&&(s=Tt(),sn(n,t,r,s),$E(n,e,r))}}function BE(t){var e=t.alternate;return t===Se||e!==null&&e===Se}function zE(t,e){qo=Uu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $E(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jp(t,n)}}var Bu={readContext:Xt,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useInsertionEffect:it,useLayoutEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useMutableSource:it,useSyncExternalStore:it,useId:it,unstable_isNewReconciler:!1},PC={readContext:Xt,useCallback:function(t,e){return hn().memoizedState=[t,e===void 0?null:e],t},useContext:Xt,useEffect:Hv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ou(4194308,4,VE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ou(4194308,4,t,e)},useInsertionEffect:function(t,e){return ou(4,2,t,e)},useMemo:function(t,e){var n=hn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=hn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=AC.bind(null,Se,t),[r.memoizedState,t]},useRef:function(t){var e=hn();return t={current:t},e.memoizedState=t},useState:Wv,useDebugValue:nm,useDeferredValue:function(t){return hn().memoizedState=t},useTransition:function(){var t=Wv(!1),e=t[0];return t=IC.bind(null,t[1]),hn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Se,s=hn();if(xe){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),We===null)throw Error(U(349));Ts&30||kE(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Hv(CE.bind(null,r,i,t),[t]),r.flags|=2048,va(9,PE.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=hn(),e=We.identifierPrefix;if(xe){var n=Vn,r=Dn;n=(r&~(1<<32-rn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ga++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=SC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},CC={readContext:Xt,useCallback:LE,useContext:Xt,useEffect:tm,useImperativeHandle:OE,useInsertionEffect:jE,useLayoutEffect:DE,useMemo:ME,useReducer:sd,useRef:RE,useState:function(){return sd(ya)},useDebugValue:nm,useDeferredValue:function(t){var e=Yt();return FE(e,Ue.memoizedState,t)},useTransition:function(){var t=sd(ya)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:IE,useSyncExternalStore:AE,useId:UE,unstable_isNewReconciler:!1},bC={readContext:Xt,useCallback:LE,useContext:Xt,useEffect:tm,useImperativeHandle:OE,useInsertionEffect:jE,useLayoutEffect:DE,useMemo:ME,useReducer:id,useRef:RE,useState:function(){return id(ya)},useDebugValue:nm,useDeferredValue:function(t){var e=Yt();return Ue===null?e.memoizedState=t:FE(e,Ue.memoizedState,t)},useTransition:function(){var t=id(ya)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:IE,useSyncExternalStore:AE,useId:UE,unstable_isNewReconciler:!1};function en(t,e){if(t&&t.defaultProps){e=Ie({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function gf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ie({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Cc={isMounted:function(t){return(t=t._reactInternals)?Ds(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Tt(),s=Pr(t),i=Bn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ar(t,i,s),e!==null&&(sn(e,t,s,r),su(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Tt(),s=Pr(t),i=Bn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ar(t,i,s),e!==null&&(sn(e,t,s,r),su(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Tt(),r=Pr(t),s=Bn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ar(t,s,r),e!==null&&(sn(e,t,r,n),su(e,t,r))}};function Kv(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ca(n,r)||!ca(s,i):!0}function qE(t,e,n){var r=!1,s=Mr,i=e.contextType;return typeof i=="object"&&i!==null?i=Xt(i):(s=bt(e)?ws:mt.current,r=e.contextTypes,i=(r=r!=null)?Ii(t,s):Mr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Cc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Gv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Cc.enqueueReplaceState(e,e.state,null)}function yf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Gp(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Xt(i):(i=bt(e)?ws:mt.current,s.context=Ii(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(gf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Cc.enqueueReplaceState(s,s.state,null),Mu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ci(t,e){try{var n="",r=e;do n+=sP(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function od(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function vf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var NC=typeof WeakMap=="function"?WeakMap:Map;function WE(t,e,n){n=Bn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){$u||($u=!0,Pf=r),vf(t,e)},n}function HE(t,e,n){n=Bn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){vf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){vf(t,e),typeof r!="function"&&(kr===null?kr=new Set([this]):kr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Qv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new NC;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=WC.bind(null,t,e,n),e.then(t,t))}function Xv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Yv(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Bn(-1,1),e.tag=2,Ar(n,e,1))),n.lanes|=1),t)}var RC=er.ReactCurrentOwner,Pt=!1;function wt(t,e,n,r){e.child=t===null?wE(e,null,n,r):ki(e,t.child,n,r)}function Jv(t,e,n,r,s){n=n.render;var i=e.ref;return vi(e,s),r=Zp(t,e,n,r,i,s),n=em(),t!==null&&!Pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Qn(t,e,s)):(xe&&n&&Bp(e),e.flags|=1,wt(t,e,r,s),e.child)}function Zv(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!cm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,KE(t,e,i,r,s)):(t=cu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ca,n(o,r)&&t.ref===e.ref)return Qn(t,e,s)}return e.flags|=1,t=Cr(i,r),t.ref=e.ref,t.return=e,e.child=t}function KE(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ca(i,r)&&t.ref===e.ref)if(Pt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Pt=!0);else return e.lanes=t.lanes,Qn(t,e,s)}return _f(t,e,n,r,s)}function GE(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pe(ai,jt),jt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,pe(ai,jt),jt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,pe(ai,jt),jt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,pe(ai,jt),jt|=r;return wt(t,e,s,n),e.child}function QE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function _f(t,e,n,r,s){var i=bt(n)?ws:mt.current;return i=Ii(e,i),vi(e,s),n=Zp(t,e,n,r,i,s),r=em(),t!==null&&!Pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Qn(t,e,s)):(xe&&r&&Bp(e),e.flags|=1,wt(t,e,n,s),e.child)}function e0(t,e,n,r,s){if(bt(n)){var i=!0;ju(e)}else i=!1;if(vi(e,s),e.stateNode===null)au(t,e),qE(e,n,r),yf(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Xt(c):(c=bt(n)?ws:mt.current,c=Ii(e,c));var d=n.getDerivedStateFromProps,p=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Gv(e,o,r,c),cr=!1;var m=e.memoizedState;o.state=m,Mu(e,r,o,s),l=e.memoizedState,a!==r||m!==l||Ct.current||cr?(typeof d=="function"&&(gf(e,n,d,r),l=e.memoizedState),(a=cr||Kv(e,n,a,r,m,l,c))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,TE(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:en(e.type,a),o.props=c,p=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Xt(l):(l=bt(n)?ws:mt.current,l=Ii(e,l));var _=n.getDerivedStateFromProps;(d=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||m!==l)&&Gv(e,o,r,l),cr=!1,m=e.memoizedState,o.state=m,Mu(e,r,o,s);var y=e.memoizedState;a!==p||m!==y||Ct.current||cr?(typeof _=="function"&&(gf(e,n,_,r),y=e.memoizedState),(c=cr||Kv(e,n,c,r,m,y,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return xf(t,e,n,r,i,s)}function xf(t,e,n,r,s,i){QE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Fv(e,n,!1),Qn(t,e,i);r=e.stateNode,RC.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ki(e,t.child,null,i),e.child=ki(e,null,a,i)):wt(t,e,a,i),e.memoizedState=r.state,s&&Fv(e,n,!0),e.child}function XE(t){var e=t.stateNode;e.pendingContext?Mv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Mv(t,e.context,!1),Qp(t,e.containerInfo)}function t0(t,e,n,r,s){return Ai(),$p(s),e.flags|=256,wt(t,e,n,r),e.child}var wf={dehydrated:null,treeContext:null,retryLane:0};function Ef(t){return{baseLanes:t,cachePool:null,transitions:null}}function YE(t,e,n){var r=e.pendingProps,s=Ee.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),pe(Ee,s&1),t===null)return pf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Rc(o,r,0,null),t=ys(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ef(n),e.memoizedState=wf,t):rm(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return jC(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Cr(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Cr(a,i):(i=ys(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Ef(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=wf,r}return i=t.child,t=i.sibling,r=Cr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function rm(t,e){return e=Rc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ml(t,e,n,r){return r!==null&&$p(r),ki(e,t.child,null,n),t=rm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function jC(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=od(Error(U(422))),Ml(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Rc({mode:"visible",children:r.children},s,0,null),i=ys(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ki(e,t.child,null,o),e.child.memoizedState=Ef(o),e.memoizedState=wf,i);if(!(e.mode&1))return Ml(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(U(419)),r=od(i,r,void 0),Ml(t,e,o,r)}if(a=(o&t.childLanes)!==0,Pt||a){if(r=We,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Gn(t,s),sn(r,t,s,-1))}return um(),r=od(Error(U(421))),Ml(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=HC.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Dt=Ir(s.nextSibling),Lt=e,xe=!0,nn=null,t!==null&&(Ht[Kt++]=Dn,Ht[Kt++]=Vn,Ht[Kt++]=Es,Dn=t.id,Vn=t.overflow,Es=e),e=rm(e,r.children),e.flags|=4096,e)}function n0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),mf(t.return,e,n)}function ad(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function JE(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(wt(t,e,r.children,n),r=Ee.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&n0(t,n,e);else if(t.tag===19)n0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(pe(Ee,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Fu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ad(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Fu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ad(e,!0,n,null,i);break;case"together":ad(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function au(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ss|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Cr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Cr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function DC(t,e,n){switch(e.tag){case 3:XE(e),Ai();break;case 5:SE(e);break;case 1:bt(e.type)&&ju(e);break;case 4:Qp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;pe(Ou,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(pe(Ee,Ee.current&1),e.flags|=128,null):n&e.child.childLanes?YE(t,e,n):(pe(Ee,Ee.current&1),t=Qn(t,e,n),t!==null?t.sibling:null);pe(Ee,Ee.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return JE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),pe(Ee,Ee.current),r)break;return null;case 22:case 23:return e.lanes=0,GE(t,e,n)}return Qn(t,e,n)}var ZE,Tf,e1,t1;ZE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Tf=function(){};e1=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,fs(mn.current);var i=null;switch(n){case"input":s=qd(t,s),r=qd(t,r),i=[];break;case"select":s=Ie({},s,{value:void 0}),r=Ie({},r,{value:void 0}),i=[];break;case"textarea":s=Kd(t,s),r=Kd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Nu)}Qd(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ra.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ra.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ye("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};t1=function(t,e,n,r){n!==r&&(e.flags|=4)};function To(t,e){if(!xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function VC(t,e,n){var r=e.pendingProps;switch(zp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(e),null;case 1:return bt(e.type)&&Ru(),ot(e),null;case 3:return r=e.stateNode,Pi(),_e(Ct),_e(mt),Yp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ol(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,nn!==null&&(Nf(nn),nn=null))),Tf(t,e),ot(e),null;case 5:Xp(e);var s=fs(ma.current);if(n=e.type,t!==null&&e.stateNode!=null)e1(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return ot(e),null}if(t=fs(mn.current),Ol(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[dn]=e,r[fa]=i,t=(e.mode&1)!==0,n){case"dialog":ye("cancel",r),ye("close",r);break;case"iframe":case"object":case"embed":ye("load",r);break;case"video":case"audio":for(s=0;s<No.length;s++)ye(No[s],r);break;case"source":ye("error",r);break;case"img":case"image":case"link":ye("error",r),ye("load",r);break;case"details":ye("toggle",r);break;case"input":hv(r,i),ye("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ye("invalid",r);break;case"textarea":fv(r,i),ye("invalid",r)}Qd(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Vl(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Vl(r.textContent,a,t),s=["children",""+a]):ra.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ye("scroll",r)}switch(n){case"input":kl(r),dv(r,i,!0);break;case"textarea":kl(r),pv(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Nu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Cw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[dn]=e,t[fa]=r,ZE(t,e,!1,!1),e.stateNode=t;e:{switch(o=Xd(n,r),n){case"dialog":ye("cancel",t),ye("close",t),s=r;break;case"iframe":case"object":case"embed":ye("load",t),s=r;break;case"video":case"audio":for(s=0;s<No.length;s++)ye(No[s],t);s=r;break;case"source":ye("error",t),s=r;break;case"img":case"image":case"link":ye("error",t),ye("load",t),s=r;break;case"details":ye("toggle",t),s=r;break;case"input":hv(t,r),s=qd(t,r),ye("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ie({},r,{value:void 0}),ye("invalid",t);break;case"textarea":fv(t,r),s=Kd(t,r),ye("invalid",t);break;default:s=r}Qd(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Rw(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&bw(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&sa(t,l):typeof l=="number"&&sa(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ra.hasOwnProperty(i)?l!=null&&i==="onScroll"&&ye("scroll",t):l!=null&&kp(t,i,l,o))}switch(n){case"input":kl(t),dv(t,r,!1);break;case"textarea":kl(t),pv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Lr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?pi(t,!!r.multiple,i,!1):r.defaultValue!=null&&pi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Nu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ot(e),null;case 6:if(t&&e.stateNode!=null)t1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=fs(ma.current),fs(mn.current),Ol(e)){if(r=e.stateNode,n=e.memoizedProps,r[dn]=e,(i=r.nodeValue!==n)&&(t=Lt,t!==null))switch(t.tag){case 3:Vl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Vl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[dn]=e,e.stateNode=r}return ot(e),null;case 13:if(_e(Ee),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(xe&&Dt!==null&&e.mode&1&&!(e.flags&128))_E(),Ai(),e.flags|=98560,i=!1;else if(i=Ol(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[dn]=e}else Ai(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ot(e),i=!1}else nn!==null&&(Nf(nn),nn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ee.current&1?Be===0&&(Be=3):um())),e.updateQueue!==null&&(e.flags|=4),ot(e),null);case 4:return Pi(),Tf(t,e),t===null&&ha(e.stateNode.containerInfo),ot(e),null;case 10:return Hp(e.type._context),ot(e),null;case 17:return bt(e.type)&&Ru(),ot(e),null;case 19:if(_e(Ee),i=e.memoizedState,i===null)return ot(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)To(i,!1);else{if(Be!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Fu(t),o!==null){for(e.flags|=128,To(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return pe(Ee,Ee.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ve()>bi&&(e.flags|=128,r=!0,To(i,!1),e.lanes=4194304)}else{if(!r)if(t=Fu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),To(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!xe)return ot(e),null}else 2*Ve()-i.renderingStartTime>bi&&n!==1073741824&&(e.flags|=128,r=!0,To(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ve(),e.sibling=null,n=Ee.current,pe(Ee,r?n&1|2:n&1),e):(ot(e),null);case 22:case 23:return lm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?jt&1073741824&&(ot(e),e.subtreeFlags&6&&(e.flags|=8192)):ot(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function OC(t,e){switch(zp(e),e.tag){case 1:return bt(e.type)&&Ru(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Pi(),_e(Ct),_e(mt),Yp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Xp(e),null;case 13:if(_e(Ee),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Ai()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return _e(Ee),null;case 4:return Pi(),null;case 10:return Hp(e.type._context),null;case 22:case 23:return lm(),null;case 24:return null;default:return null}}var Fl=!1,ct=!1,LC=typeof WeakSet=="function"?WeakSet:Set,$=null;function oi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pe(t,e,r)}else n.current=null}function Sf(t,e,n){try{n()}catch(r){Pe(t,e,r)}}var r0=!1;function MC(t,e){if(af=Pu,t=oE(),Up(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,p=t,m=null;t:for(;;){for(var _;p!==n||s!==0&&p.nodeType!==3||(a=o+s),p!==i||r!==0&&p.nodeType!==3||(l=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(_=p.firstChild)!==null;)m=p,p=_;for(;;){if(p===t)break t;if(m===n&&++c===s&&(a=o),m===i&&++d===r&&(l=o),(_=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=_}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(lf={focusedElem:t,selectionRange:n},Pu=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var I=y.memoizedProps,T=y.memoizedState,x=e.stateNode,v=x.getSnapshotBeforeUpdate(e.elementType===e.type?I:en(e.type,I),T);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(R){Pe(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return y=r0,r0=!1,y}function Wo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Sf(e,n,i)}s=s.next}while(s!==r)}}function bc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function If(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function n1(t){var e=t.alternate;e!==null&&(t.alternate=null,n1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[dn],delete e[fa],delete e[hf],delete e[xC],delete e[wC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function r1(t){return t.tag===5||t.tag===3||t.tag===4}function s0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||r1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Af(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Nu));else if(r!==4&&(t=t.child,t!==null))for(Af(t,e,n),t=t.sibling;t!==null;)Af(t,e,n),t=t.sibling}function kf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(kf(t,e,n),t=t.sibling;t!==null;)kf(t,e,n),t=t.sibling}var Ke=null,tn=!1;function or(t,e,n){for(n=n.child;n!==null;)s1(t,e,n),n=n.sibling}function s1(t,e,n){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(Ec,n)}catch{}switch(n.tag){case 5:ct||oi(n,e);case 6:var r=Ke,s=tn;Ke=null,or(t,e,n),Ke=r,tn=s,Ke!==null&&(tn?(t=Ke,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ke.removeChild(n.stateNode));break;case 18:Ke!==null&&(tn?(t=Ke,n=n.stateNode,t.nodeType===8?ed(t.parentNode,n):t.nodeType===1&&ed(t,n),la(t)):ed(Ke,n.stateNode));break;case 4:r=Ke,s=tn,Ke=n.stateNode.containerInfo,tn=!0,or(t,e,n),Ke=r,tn=s;break;case 0:case 11:case 14:case 15:if(!ct&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Sf(n,e,o),s=s.next}while(s!==r)}or(t,e,n);break;case 1:if(!ct&&(oi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Pe(n,e,a)}or(t,e,n);break;case 21:or(t,e,n);break;case 22:n.mode&1?(ct=(r=ct)||n.memoizedState!==null,or(t,e,n),ct=r):or(t,e,n);break;default:or(t,e,n)}}function i0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new LC),e.forEach(function(r){var s=KC.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Zt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ke=a.stateNode,tn=!1;break e;case 3:Ke=a.stateNode.containerInfo,tn=!0;break e;case 4:Ke=a.stateNode.containerInfo,tn=!0;break e}a=a.return}if(Ke===null)throw Error(U(160));s1(i,o,s),Ke=null,tn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Pe(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)i1(e,t),e=e.sibling}function i1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Zt(e,t),cn(t),r&4){try{Wo(3,t,t.return),bc(3,t)}catch(I){Pe(t,t.return,I)}try{Wo(5,t,t.return)}catch(I){Pe(t,t.return,I)}}break;case 1:Zt(e,t),cn(t),r&512&&n!==null&&oi(n,n.return);break;case 5:if(Zt(e,t),cn(t),r&512&&n!==null&&oi(n,n.return),t.flags&32){var s=t.stateNode;try{sa(s,"")}catch(I){Pe(t,t.return,I)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&kw(s,i),Xd(a,o);var c=Xd(a,i);for(o=0;o<l.length;o+=2){var d=l[o],p=l[o+1];d==="style"?Rw(s,p):d==="dangerouslySetInnerHTML"?bw(s,p):d==="children"?sa(s,p):kp(s,d,p,c)}switch(a){case"input":Wd(s,i);break;case"textarea":Pw(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var _=i.value;_!=null?pi(s,!!i.multiple,_,!1):m!==!!i.multiple&&(i.defaultValue!=null?pi(s,!!i.multiple,i.defaultValue,!0):pi(s,!!i.multiple,i.multiple?[]:"",!1))}s[fa]=i}catch(I){Pe(t,t.return,I)}}break;case 6:if(Zt(e,t),cn(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(I){Pe(t,t.return,I)}}break;case 3:if(Zt(e,t),cn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{la(e.containerInfo)}catch(I){Pe(t,t.return,I)}break;case 4:Zt(e,t),cn(t);break;case 13:Zt(e,t),cn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(om=Ve())),r&4&&i0(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(ct=(c=ct)||d,Zt(e,t),ct=c):Zt(e,t),cn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for($=t,d=t.child;d!==null;){for(p=$=d;$!==null;){switch(m=$,_=m.child,m.tag){case 0:case 11:case 14:case 15:Wo(4,m,m.return);break;case 1:oi(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(I){Pe(r,n,I)}}break;case 5:oi(m,m.return);break;case 22:if(m.memoizedState!==null){a0(p);continue}}_!==null?(_.return=m,$=_):a0(p)}d=d.sibling}e:for(d=null,p=t;;){if(p.tag===5){if(d===null){d=p;try{s=p.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Nw("display",o))}catch(I){Pe(t,t.return,I)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(I){Pe(t,t.return,I)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Zt(e,t),cn(t),r&4&&i0(t);break;case 21:break;default:Zt(e,t),cn(t)}}function cn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(r1(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(sa(s,""),r.flags&=-33);var i=s0(t);kf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=s0(t);Af(t,a,o);break;default:throw Error(U(161))}}catch(l){Pe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function FC(t,e,n){$=t,o1(t)}function o1(t,e,n){for(var r=(t.mode&1)!==0;$!==null;){var s=$,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Fl;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||ct;a=Fl;var c=ct;if(Fl=o,(ct=l)&&!c)for($=s;$!==null;)o=$,l=o.child,o.tag===22&&o.memoizedState!==null?l0(s):l!==null?(l.return=o,$=l):l0(s);for(;i!==null;)$=i,o1(i),i=i.sibling;$=s,Fl=a,ct=c}o0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,$=i):o0(t)}}function o0(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ct||bc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ct)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:en(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&qv(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}qv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&la(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}ct||e.flags&512&&If(e)}catch(m){Pe(e,e.return,m)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function a0(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function l0(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{bc(4,e)}catch(l){Pe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Pe(e,s,l)}}var i=e.return;try{If(e)}catch(l){Pe(e,i,l)}break;case 5:var o=e.return;try{If(e)}catch(l){Pe(e,o,l)}}}catch(l){Pe(e,e.return,l)}if(e===t){$=null;break}var a=e.sibling;if(a!==null){a.return=e.return,$=a;break}$=e.return}}var UC=Math.ceil,zu=er.ReactCurrentDispatcher,sm=er.ReactCurrentOwner,Qt=er.ReactCurrentBatchConfig,ie=0,We=null,Me=null,Je=0,jt=0,ai=Kr(0),Be=0,_a=null,Ss=0,Nc=0,im=0,Ho=null,At=null,om=0,bi=1/0,Rn=null,$u=!1,Pf=null,kr=null,Ul=!1,_r=null,qu=0,Ko=0,Cf=null,lu=-1,uu=0;function Tt(){return ie&6?Ve():lu!==-1?lu:lu=Ve()}function Pr(t){return t.mode&1?ie&2&&Je!==0?Je&-Je:TC.transition!==null?(uu===0&&(uu=qw()),uu):(t=le,t!==0||(t=window.event,t=t===void 0?16:Yw(t.type)),t):1}function sn(t,e,n,r){if(50<Ko)throw Ko=0,Cf=null,Error(U(185));Fa(t,n,r),(!(ie&2)||t!==We)&&(t===We&&(!(ie&2)&&(Nc|=n),Be===4&&dr(t,Je)),Nt(t,r),n===1&&ie===0&&!(e.mode&1)&&(bi=Ve()+500,kc&&Gr()))}function Nt(t,e){var n=t.callbackNode;TP(t,e);var r=ku(t,t===We?Je:0);if(r===0)n!==null&&yv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&yv(n),e===1)t.tag===0?EC(u0.bind(null,t)):gE(u0.bind(null,t)),vC(function(){!(ie&6)&&Gr()}),n=null;else{switch(Ww(r)){case 1:n=Rp;break;case 4:n=zw;break;case 16:n=Au;break;case 536870912:n=$w;break;default:n=Au}n=p1(n,a1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function a1(t,e){if(lu=-1,uu=0,ie&6)throw Error(U(327));var n=t.callbackNode;if(_i()&&t.callbackNode!==n)return null;var r=ku(t,t===We?Je:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Wu(t,r);else{e=r;var s=ie;ie|=2;var i=u1();(We!==t||Je!==e)&&(Rn=null,bi=Ve()+500,gs(t,e));do try{$C();break}catch(a){l1(t,a)}while(!0);Wp(),zu.current=i,ie=s,Me!==null?e=0:(We=null,Je=0,e=Be)}if(e!==0){if(e===2&&(s=tf(t),s!==0&&(r=s,e=bf(t,s))),e===1)throw n=_a,gs(t,0),dr(t,r),Nt(t,Ve()),n;if(e===6)dr(t,r);else{if(s=t.current.alternate,!(r&30)&&!BC(s)&&(e=Wu(t,r),e===2&&(i=tf(t),i!==0&&(r=i,e=bf(t,i))),e===1))throw n=_a,gs(t,0),dr(t,r),Nt(t,Ve()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:as(t,At,Rn);break;case 3:if(dr(t,r),(r&130023424)===r&&(e=om+500-Ve(),10<e)){if(ku(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Tt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=cf(as.bind(null,t,At,Rn),e);break}as(t,At,Rn);break;case 4:if(dr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-rn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*UC(r/1960))-r,10<r){t.timeoutHandle=cf(as.bind(null,t,At,Rn),r);break}as(t,At,Rn);break;case 5:as(t,At,Rn);break;default:throw Error(U(329))}}}return Nt(t,Ve()),t.callbackNode===n?a1.bind(null,t):null}function bf(t,e){var n=Ho;return t.current.memoizedState.isDehydrated&&(gs(t,e).flags|=256),t=Wu(t,e),t!==2&&(e=At,At=n,e!==null&&Nf(e)),t}function Nf(t){At===null?At=t:At.push.apply(At,t)}function BC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!an(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function dr(t,e){for(e&=~im,e&=~Nc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-rn(e),r=1<<n;t[n]=-1,e&=~r}}function u0(t){if(ie&6)throw Error(U(327));_i();var e=ku(t,0);if(!(e&1))return Nt(t,Ve()),null;var n=Wu(t,e);if(t.tag!==0&&n===2){var r=tf(t);r!==0&&(e=r,n=bf(t,r))}if(n===1)throw n=_a,gs(t,0),dr(t,e),Nt(t,Ve()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,as(t,At,Rn),Nt(t,Ve()),null}function am(t,e){var n=ie;ie|=1;try{return t(e)}finally{ie=n,ie===0&&(bi=Ve()+500,kc&&Gr())}}function Is(t){_r!==null&&_r.tag===0&&!(ie&6)&&_i();var e=ie;ie|=1;var n=Qt.transition,r=le;try{if(Qt.transition=null,le=1,t)return t()}finally{le=r,Qt.transition=n,ie=e,!(ie&6)&&Gr()}}function lm(){jt=ai.current,_e(ai)}function gs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,yC(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(zp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ru();break;case 3:Pi(),_e(Ct),_e(mt),Yp();break;case 5:Xp(r);break;case 4:Pi();break;case 13:_e(Ee);break;case 19:_e(Ee);break;case 10:Hp(r.type._context);break;case 22:case 23:lm()}n=n.return}if(We=t,Me=t=Cr(t.current,null),Je=jt=e,Be=0,_a=null,im=Nc=Ss=0,At=Ho=null,ds!==null){for(e=0;e<ds.length;e++)if(n=ds[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ds=null}return t}function l1(t,e){do{var n=Me;try{if(Wp(),iu.current=Bu,Uu){for(var r=Se.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Uu=!1}if(Ts=0,qe=Ue=Se=null,qo=!1,ga=0,sm.current=null,n===null||n.return===null){Be=1,_a=e,Me=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Je,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var _=Xv(o);if(_!==null){_.flags&=-257,Yv(_,o,a,i,e),_.mode&1&&Qv(i,c,e),e=_,l=c;var y=e.updateQueue;if(y===null){var I=new Set;I.add(l),e.updateQueue=I}else y.add(l);break e}else{if(!(e&1)){Qv(i,c,e),um();break e}l=Error(U(426))}}else if(xe&&a.mode&1){var T=Xv(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),Yv(T,o,a,i,e),$p(Ci(l,a));break e}}i=l=Ci(l,a),Be!==4&&(Be=2),Ho===null?Ho=[i]:Ho.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=WE(i,l,e);$v(i,x);break e;case 1:a=l;var v=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(kr===null||!kr.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=HE(i,a,e);$v(i,R);break e}}i=i.return}while(i!==null)}h1(n)}catch(O){e=O,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(!0)}function u1(){var t=zu.current;return zu.current=Bu,t===null?Bu:t}function um(){(Be===0||Be===3||Be===2)&&(Be=4),We===null||!(Ss&268435455)&&!(Nc&268435455)||dr(We,Je)}function Wu(t,e){var n=ie;ie|=2;var r=u1();(We!==t||Je!==e)&&(Rn=null,gs(t,e));do try{zC();break}catch(s){l1(t,s)}while(!0);if(Wp(),ie=n,zu.current=r,Me!==null)throw Error(U(261));return We=null,Je=0,Be}function zC(){for(;Me!==null;)c1(Me)}function $C(){for(;Me!==null&&!pP();)c1(Me)}function c1(t){var e=f1(t.alternate,t,jt);t.memoizedProps=t.pendingProps,e===null?h1(t):Me=e,sm.current=null}function h1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=OC(n,e),n!==null){n.flags&=32767,Me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Be=6,Me=null;return}}else if(n=VC(n,e,jt),n!==null){Me=n;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);Be===0&&(Be=5)}function as(t,e,n){var r=le,s=Qt.transition;try{Qt.transition=null,le=1,qC(t,e,n,r)}finally{Qt.transition=s,le=r}return null}function qC(t,e,n,r){do _i();while(_r!==null);if(ie&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(SP(t,i),t===We&&(Me=We=null,Je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ul||(Ul=!0,p1(Au,function(){return _i(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Qt.transition,Qt.transition=null;var o=le;le=1;var a=ie;ie|=4,sm.current=null,MC(t,n),i1(n,t),cC(lf),Pu=!!af,lf=af=null,t.current=n,FC(n),mP(),ie=a,le=o,Qt.transition=i}else t.current=n;if(Ul&&(Ul=!1,_r=t,qu=s),i=t.pendingLanes,i===0&&(kr=null),vP(n.stateNode),Nt(t,Ve()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if($u)throw $u=!1,t=Pf,Pf=null,t;return qu&1&&t.tag!==0&&_i(),i=t.pendingLanes,i&1?t===Cf?Ko++:(Ko=0,Cf=t):Ko=0,Gr(),null}function _i(){if(_r!==null){var t=Ww(qu),e=Qt.transition,n=le;try{if(Qt.transition=null,le=16>t?16:t,_r===null)var r=!1;else{if(t=_r,_r=null,qu=0,ie&6)throw Error(U(331));var s=ie;for(ie|=4,$=t.current;$!==null;){var i=$,o=i.child;if($.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for($=c;$!==null;){var d=$;switch(d.tag){case 0:case 11:case 15:Wo(8,d,i)}var p=d.child;if(p!==null)p.return=d,$=p;else for(;$!==null;){d=$;var m=d.sibling,_=d.return;if(n1(d),d===c){$=null;break}if(m!==null){m.return=_,$=m;break}$=_}}}var y=i.alternate;if(y!==null){var I=y.child;if(I!==null){y.child=null;do{var T=I.sibling;I.sibling=null,I=T}while(I!==null)}}$=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,$=o;else e:for(;$!==null;){if(i=$,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Wo(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,$=x;break e}$=i.return}}var v=t.current;for($=v;$!==null;){o=$;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,$=S;else e:for(o=v;$!==null;){if(a=$,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:bc(9,a)}}catch(O){Pe(a,a.return,O)}if(a===o){$=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,$=R;break e}$=a.return}}if(ie=s,Gr(),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(Ec,t)}catch{}r=!0}return r}finally{le=n,Qt.transition=e}}return!1}function c0(t,e,n){e=Ci(n,e),e=WE(t,e,1),t=Ar(t,e,1),e=Tt(),t!==null&&(Fa(t,1,e),Nt(t,e))}function Pe(t,e,n){if(t.tag===3)c0(t,t,n);else for(;e!==null;){if(e.tag===3){c0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(kr===null||!kr.has(r))){t=Ci(n,t),t=HE(e,t,1),e=Ar(e,t,1),t=Tt(),e!==null&&(Fa(e,1,t),Nt(e,t));break}}e=e.return}}function WC(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Tt(),t.pingedLanes|=t.suspendedLanes&n,We===t&&(Je&n)===n&&(Be===4||Be===3&&(Je&130023424)===Je&&500>Ve()-om?gs(t,0):im|=n),Nt(t,e)}function d1(t,e){e===0&&(t.mode&1?(e=bl,bl<<=1,!(bl&130023424)&&(bl=4194304)):e=1);var n=Tt();t=Gn(t,e),t!==null&&(Fa(t,e,n),Nt(t,n))}function HC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),d1(t,n)}function KC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),d1(t,n)}var f1;f1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ct.current)Pt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Pt=!1,DC(t,e,n);Pt=!!(t.flags&131072)}else Pt=!1,xe&&e.flags&1048576&&yE(e,Vu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;au(t,e),t=e.pendingProps;var s=Ii(e,mt.current);vi(e,n),s=Zp(null,e,r,t,s,n);var i=em();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,bt(r)?(i=!0,ju(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Gp(e),s.updater=Cc,e.stateNode=s,s._reactInternals=e,yf(e,r,t,n),e=xf(null,e,r,!0,i,n)):(e.tag=0,xe&&i&&Bp(e),wt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(au(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=QC(r),t=en(r,t),s){case 0:e=_f(null,e,r,t,n);break e;case 1:e=e0(null,e,r,t,n);break e;case 11:e=Jv(null,e,r,t,n);break e;case 14:e=Zv(null,e,r,en(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:en(r,s),_f(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:en(r,s),e0(t,e,r,s,n);case 3:e:{if(XE(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,TE(t,e),Mu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ci(Error(U(423)),e),e=t0(t,e,r,n,s);break e}else if(r!==s){s=Ci(Error(U(424)),e),e=t0(t,e,r,n,s);break e}else for(Dt=Ir(e.stateNode.containerInfo.firstChild),Lt=e,xe=!0,nn=null,n=wE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ai(),r===s){e=Qn(t,e,n);break e}wt(t,e,r,n)}e=e.child}return e;case 5:return SE(e),t===null&&pf(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,uf(r,s)?o=null:i!==null&&uf(r,i)&&(e.flags|=32),QE(t,e),wt(t,e,o,n),e.child;case 6:return t===null&&pf(e),null;case 13:return YE(t,e,n);case 4:return Qp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ki(e,null,r,n):wt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:en(r,s),Jv(t,e,r,s,n);case 7:return wt(t,e,e.pendingProps,n),e.child;case 8:return wt(t,e,e.pendingProps.children,n),e.child;case 12:return wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,pe(Ou,r._currentValue),r._currentValue=o,i!==null)if(an(i.value,o)){if(i.children===s.children&&!Ct.current){e=Qn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Bn(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),mf(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),mf(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}wt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,vi(e,n),s=Xt(s),r=r(s),e.flags|=1,wt(t,e,r,n),e.child;case 14:return r=e.type,s=en(r,e.pendingProps),s=en(r.type,s),Zv(t,e,r,s,n);case 15:return KE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:en(r,s),au(t,e),e.tag=1,bt(r)?(t=!0,ju(e)):t=!1,vi(e,n),qE(e,r,s),yf(e,r,s,n),xf(null,e,r,!0,t,n);case 19:return JE(t,e,n);case 22:return GE(t,e,n)}throw Error(U(156,e.tag))};function p1(t,e){return Bw(t,e)}function GC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(t,e,n,r){return new GC(t,e,n,r)}function cm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function QC(t){if(typeof t=="function")return cm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Cp)return 11;if(t===bp)return 14}return 2}function Cr(t,e){var n=t.alternate;return n===null?(n=Gt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function cu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")cm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ys:return ys(n.children,s,i,e);case Pp:o=8,s|=8;break;case Ud:return t=Gt(12,n,e,s|2),t.elementType=Ud,t.lanes=i,t;case Bd:return t=Gt(13,n,e,s),t.elementType=Bd,t.lanes=i,t;case zd:return t=Gt(19,n,e,s),t.elementType=zd,t.lanes=i,t;case Sw:return Rc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ew:o=10;break e;case Tw:o=9;break e;case Cp:o=11;break e;case bp:o=14;break e;case ur:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Gt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ys(t,e,n,r){return t=Gt(7,t,r,e),t.lanes=n,t}function Rc(t,e,n,r){return t=Gt(22,t,r,e),t.elementType=Sw,t.lanes=n,t.stateNode={isHidden:!1},t}function ld(t,e,n){return t=Gt(6,t,null,e),t.lanes=n,t}function ud(t,e,n){return e=Gt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function XC(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$h(0),this.expirationTimes=$h(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$h(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function hm(t,e,n,r,s,i,o,a,l){return t=new XC(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Gt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gp(i),t}function YC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function m1(t){if(!t)return Mr;t=t._reactInternals;e:{if(Ds(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(bt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(bt(n))return mE(t,n,e)}return e}function g1(t,e,n,r,s,i,o,a,l){return t=hm(n,r,!0,t,s,i,o,a,l),t.context=m1(null),n=t.current,r=Tt(),s=Pr(n),i=Bn(r,s),i.callback=e??null,Ar(n,i,s),t.current.lanes=s,Fa(t,s,r),Nt(t,r),t}function jc(t,e,n,r){var s=e.current,i=Tt(),o=Pr(s);return n=m1(n),e.context===null?e.context=n:e.pendingContext=n,e=Bn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ar(s,e,o),t!==null&&(sn(t,s,o,i),su(t,s,o)),o}function Hu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function h0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function dm(t,e){h0(t,e),(t=t.alternate)&&h0(t,e)}function JC(){return null}var y1=typeof reportError=="function"?reportError:function(t){console.error(t)};function fm(t){this._internalRoot=t}Dc.prototype.render=fm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));jc(t,e,null,null)};Dc.prototype.unmount=fm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Is(function(){jc(null,t,null,null)}),e[Kn]=null}};function Dc(t){this._internalRoot=t}Dc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Gw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<hr.length&&e!==0&&e<hr[n].priority;n++);hr.splice(n,0,t),n===0&&Xw(t)}};function pm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Vc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function d0(){}function ZC(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Hu(o);i.call(c)}}var o=g1(e,r,t,0,null,!1,!1,"",d0);return t._reactRootContainer=o,t[Kn]=o.current,ha(t.nodeType===8?t.parentNode:t),Is(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Hu(l);a.call(c)}}var l=hm(t,0,!1,null,null,!1,!1,"",d0);return t._reactRootContainer=l,t[Kn]=l.current,ha(t.nodeType===8?t.parentNode:t),Is(function(){jc(e,l,n,r)}),l}function Oc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Hu(o);a.call(l)}}jc(e,o,t,s)}else o=ZC(n,e,t,s,r);return Hu(o)}Hw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=bo(e.pendingLanes);n!==0&&(jp(e,n|1),Nt(e,Ve()),!(ie&6)&&(bi=Ve()+500,Gr()))}break;case 13:Is(function(){var r=Gn(t,1);if(r!==null){var s=Tt();sn(r,t,1,s)}}),dm(t,1)}};Dp=function(t){if(t.tag===13){var e=Gn(t,134217728);if(e!==null){var n=Tt();sn(e,t,134217728,n)}dm(t,134217728)}};Kw=function(t){if(t.tag===13){var e=Pr(t),n=Gn(t,e);if(n!==null){var r=Tt();sn(n,t,e,r)}dm(t,e)}};Gw=function(){return le};Qw=function(t,e){var n=le;try{return le=t,e()}finally{le=n}};Jd=function(t,e,n){switch(e){case"input":if(Wd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Ac(r);if(!s)throw Error(U(90));Aw(r),Wd(r,s)}}}break;case"textarea":Pw(t,n);break;case"select":e=n.value,e!=null&&pi(t,!!n.multiple,e,!1)}};Vw=am;Ow=Is;var eb={usingClientEntryPoint:!1,Events:[Ba,ti,Ac,jw,Dw,am]},So={findFiberByHostInstance:hs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tb={bundleType:So.bundleType,version:So.version,rendererPackageName:So.rendererPackageName,rendererConfig:So.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:er.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Fw(t),t===null?null:t.stateNode},findFiberByHostInstance:So.findFiberByHostInstance||JC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bl.isDisabled&&Bl.supportsFiber)try{Ec=Bl.inject(tb),pn=Bl}catch{}}Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eb;Bt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pm(e))throw Error(U(200));return YC(t,e,null,n)};Bt.createRoot=function(t,e){if(!pm(t))throw Error(U(299));var n=!1,r="",s=y1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=hm(t,1,!1,null,null,n,!1,r,s),t[Kn]=e.current,ha(t.nodeType===8?t.parentNode:t),new fm(e)};Bt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=Fw(e),t=t===null?null:t.stateNode,t};Bt.flushSync=function(t){return Is(t)};Bt.hydrate=function(t,e,n){if(!Vc(e))throw Error(U(200));return Oc(null,t,e,!0,n)};Bt.hydrateRoot=function(t,e,n){if(!pm(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=y1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=g1(e,null,t,1,n??null,s,!1,i,o),t[Kn]=e.current,ha(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Dc(e)};Bt.render=function(t,e,n){if(!Vc(e))throw Error(U(200));return Oc(null,t,e,!1,n)};Bt.unmountComponentAtNode=function(t){if(!Vc(t))throw Error(U(40));return t._reactRootContainer?(Is(function(){Oc(null,null,t,!1,function(){t._reactRootContainer=null,t[Kn]=null})}),!0):!1};Bt.unstable_batchedUpdates=am;Bt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Vc(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Oc(t,e,n,!1,r)};Bt.version="18.3.1-next-f1338f8080-20240426";function v1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(v1)}catch(t){console.error(t)}}v1(),vw.exports=Bt;var nb=vw.exports,_1,f0=nb;_1=f0.createRoot,f0.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xa(){return xa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xa.apply(this,arguments)}var xr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(xr||(xr={}));const p0="popstate";function rb(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Rf("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Ku(s)}return ib(e,n,null,t)}function Oe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function x1(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sb(){return Math.random().toString(36).substr(2,8)}function m0(t,e){return{usr:t.state,key:t.key,idx:e}}function Rf(t,e,n,r){return n===void 0&&(n=null),xa({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Wi(e):e,{state:n,key:e&&e.key||r||sb()})}function Ku(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Wi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function ib(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=xr.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(xa({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function p(){a=xr.Pop;let T=d(),x=T==null?null:T-c;c=T,l&&l({action:a,location:I.location,delta:x})}function m(T,x){a=xr.Push;let v=Rf(I.location,T,x);c=d()+1;let S=m0(v,c),R=I.createHref(v);try{o.pushState(S,"",R)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(R)}i&&l&&l({action:a,location:I.location,delta:1})}function _(T,x){a=xr.Replace;let v=Rf(I.location,T,x);c=d();let S=m0(v,c),R=I.createHref(v);o.replaceState(S,"",R),i&&l&&l({action:a,location:I.location,delta:0})}function y(T){let x=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof T=="string"?T:Ku(T);return v=v.replace(/ $/,"%20"),Oe(x,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,x)}let I={get action(){return a},get location(){return t(s,o)},listen(T){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(p0,p),l=T,()=>{s.removeEventListener(p0,p),l=null}},createHref(T){return e(s,T)},createURL:y,encodeLocation(T){let x=y(T);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:_,go(T){return o.go(T)}};return I}var g0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(g0||(g0={}));function ob(t,e,n){return n===void 0&&(n="/"),ab(t,e,n,!1)}function ab(t,e,n,r){let s=typeof e=="string"?Wi(e):e,i=mm(s.pathname||"/",n);if(i==null)return null;let o=w1(t);lb(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=_b(i);a=yb(o[l],c,r)}return a}function w1(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Oe(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=br([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(Oe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),w1(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:mb(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of E1(i.path))s(i,o,l)}),e}function E1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=E1(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function lb(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:gb(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ub=/^:[\w-]+$/,cb=3,hb=2,db=1,fb=10,pb=-2,y0=t=>t==="*";function mb(t,e){let n=t.split("/"),r=n.length;return n.some(y0)&&(r+=pb),e&&(r+=hb),n.filter(s=>!y0(s)).reduce((s,i)=>s+(ub.test(i)?cb:i===""?db:fb),r)}function gb(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function yb(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",p=v0({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),m=l.route;if(!p&&c&&n&&!r[r.length-1].route.index&&(p=v0({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:br([i,p.pathname]),pathnameBase:Tb(br([i,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(i=br([i,p.pathnameBase]))}return o}function v0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=vb(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,p)=>{let{paramName:m,isOptional:_}=d;if(m==="*"){let I=a[p]||"";o=i.slice(0,i.length-I.length).replace(/(.)\/+$/,"$1")}const y=a[p];return _&&!y?c[m]=void 0:c[m]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function vb(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),x1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function _b(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return x1(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function mm(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function xb(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Wi(t):t;return{pathname:n?n.startsWith("/")?n:wb(n,e):e,search:Sb(r),hash:Ib(s)}}function wb(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function cd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Eb(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function gm(t,e){let n=Eb(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function ym(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Wi(t):(s=xa({},t),Oe(!s.pathname||!s.pathname.includes("?"),cd("?","pathname","search",s)),Oe(!s.pathname||!s.pathname.includes("#"),cd("#","pathname","hash",s)),Oe(!s.search||!s.search.includes("#"),cd("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;s.pathname=m.join("/")}a=p>=0?e[p]:"/"}let l=xb(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const br=t=>t.join("/").replace(/\/\/+/g,"/"),Tb=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Sb=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Ib=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Ab(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const T1=["post","put","patch","delete"];new Set(T1);const kb=["get",...T1];new Set(kb);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wa(){return wa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wa.apply(this,arguments)}const vm=b.createContext(null),Pb=b.createContext(null),Qr=b.createContext(null),Lc=b.createContext(null),Xr=b.createContext({outlet:null,matches:[],isDataRoute:!1}),S1=b.createContext(null);function Cb(t,e){let{relative:n}=e===void 0?{}:e;Hi()||Oe(!1);let{basename:r,navigator:s}=b.useContext(Qr),{hash:i,pathname:o,search:a}=A1(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:br([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Hi(){return b.useContext(Lc)!=null}function Ki(){return Hi()||Oe(!1),b.useContext(Lc).location}function I1(t){b.useContext(Qr).static||b.useLayoutEffect(t)}function Gi(){let{isDataRoute:t}=b.useContext(Xr);return t?zb():bb()}function bb(){Hi()||Oe(!1);let t=b.useContext(vm),{basename:e,future:n,navigator:r}=b.useContext(Qr),{matches:s}=b.useContext(Xr),{pathname:i}=Ki(),o=JSON.stringify(gm(s,n.v7_relativeSplatPath)),a=b.useRef(!1);return I1(()=>{a.current=!0}),b.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let p=ym(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:br([e,p.pathname])),(d.replace?r.replace:r.push)(p,d.state,d)},[e,r,o,i,t])}function A1(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=b.useContext(Qr),{matches:s}=b.useContext(Xr),{pathname:i}=Ki(),o=JSON.stringify(gm(s,r.v7_relativeSplatPath));return b.useMemo(()=>ym(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function Nb(t,e){return Rb(t,e)}function Rb(t,e,n,r){Hi()||Oe(!1);let{navigator:s}=b.useContext(Qr),{matches:i}=b.useContext(Xr),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Ki(),d;if(e){var p;let T=typeof e=="string"?Wi(e):e;l==="/"||(p=T.pathname)!=null&&p.startsWith(l)||Oe(!1),d=T}else d=c;let m=d.pathname||"/",_=m;if(l!=="/"){let T=l.replace(/^\//,"").split("/");_="/"+m.replace(/^\//,"").split("/").slice(T.length).join("/")}let y=ob(t,{pathname:_}),I=Lb(y&&y.map(T=>Object.assign({},T,{params:Object.assign({},a,T.params),pathname:br([l,s.encodeLocation?s.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?l:br([l,s.encodeLocation?s.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),i,n,r);return e&&I?b.createElement(Lc.Provider,{value:{location:wa({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:xr.Pop}},I):I}function jb(){let t=Bb(),e=Ab(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:s},n):null,null)}const Db=b.createElement(jb,null);class Vb extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(Xr.Provider,{value:this.props.routeContext},b.createElement(S1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ob(t){let{routeContext:e,match:n,children:r}=t,s=b.useContext(vm);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(Xr.Provider,{value:e},r)}function Lb(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);d>=0||Oe(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let p=o[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=d),p.route.id){let{loaderData:m,errors:_}=n,y=p.route.loader&&m[p.route.id]===void 0&&(!_||_[p.route.id]===void 0);if(p.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,p,m)=>{let _,y=!1,I=null,T=null;n&&(_=a&&p.route.id?a[p.route.id]:void 0,I=p.route.errorElement||Db,l&&(c<0&&m===0?(y=!0,T=null):c===m&&(y=!0,T=p.route.hydrateFallbackElement||null)));let x=e.concat(o.slice(0,m+1)),v=()=>{let S;return _?S=I:y?S=T:p.route.Component?S=b.createElement(p.route.Component,null):p.route.element?S=p.route.element:S=d,b.createElement(Ob,{match:p,routeContext:{outlet:d,matches:x,isDataRoute:n!=null},children:S})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?b.createElement(Vb,{location:n.location,revalidation:n.revalidation,component:I,error:_,children:v(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):v()},null)}var k1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(k1||{}),Gu=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Gu||{});function Mb(t){let e=b.useContext(vm);return e||Oe(!1),e}function Fb(t){let e=b.useContext(Pb);return e||Oe(!1),e}function Ub(t){let e=b.useContext(Xr);return e||Oe(!1),e}function P1(t){let e=Ub(),n=e.matches[e.matches.length-1];return n.route.id||Oe(!1),n.route.id}function Bb(){var t;let e=b.useContext(S1),n=Fb(Gu.UseRouteError),r=P1(Gu.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function zb(){let{router:t}=Mb(k1.UseNavigateStable),e=P1(Gu.UseNavigateStable),n=b.useRef(!1);return I1(()=>{n.current=!0}),b.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,wa({fromRouteId:e},i)))},[t,e])}const _0={};function $b(t,e){_0[e]||(_0[e]=!0,console.warn(e))}const x0=(t,e,n)=>$b(t,"⚠️ React Router Future Flag Warning: "+e+". "+("You can use the `"+t+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function qb(t,e){t!=null&&t.v7_startTransition||x0("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(t!=null&&t.v7_relativeSplatPath)&&!e&&x0("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function Wb(t){let{to:e,replace:n,state:r,relative:s}=t;Hi()||Oe(!1);let{future:i,static:o}=b.useContext(Qr),{matches:a}=b.useContext(Xr),{pathname:l}=Ki(),c=Gi(),d=ym(e,gm(a,i.v7_relativeSplatPath),l,s==="path"),p=JSON.stringify(d);return b.useEffect(()=>c(JSON.parse(p),{replace:n,state:r,relative:s}),[c,p,s,n,r]),null}function qt(t){Oe(!1)}function Hb(t){let{basename:e="/",children:n=null,location:r,navigationType:s=xr.Pop,navigator:i,static:o=!1,future:a}=t;Hi()&&Oe(!1);let l=e.replace(/^\/*/,"/"),c=b.useMemo(()=>({basename:l,navigator:i,static:o,future:wa({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Wi(r));let{pathname:d="/",search:p="",hash:m="",state:_=null,key:y="default"}=r,I=b.useMemo(()=>{let T=mm(d,l);return T==null?null:{location:{pathname:T,search:p,hash:m,state:_,key:y},navigationType:s}},[l,d,p,m,_,y,s]);return I==null?null:b.createElement(Qr.Provider,{value:c},b.createElement(Lc.Provider,{children:n,value:I}))}function Kb(t){let{children:e,location:n}=t;return Nb(jf(e),n)}new Promise(()=>{});function jf(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(r,s)=>{if(!b.isValidElement(r))return;let i=[...e,s];if(r.type===b.Fragment){n.push.apply(n,jf(r.props.children,i));return}r.type!==qt&&Oe(!1),!r.props.index||!r.props.children||Oe(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=jf(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Df(){return Df=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Df.apply(this,arguments)}function Gb(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Qb(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Xb(t,e){return t.button===0&&(!e||e==="_self")&&!Qb(t)}const Yb=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Jb="6";try{window.__reactRouterVersion=Jb}catch{}const Zb="startTransition",w0=Wk[Zb];function eN(t){let{basename:e,children:n,future:r,window:s}=t,i=b.useRef();i.current==null&&(i.current=rb({window:s,v5Compat:!0}));let o=i.current,[a,l]=b.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=b.useCallback(p=>{c&&w0?w0(()=>l(p)):l(p)},[l,c]);return b.useLayoutEffect(()=>o.listen(d),[o,d]),b.useEffect(()=>qb(r),[r]),b.createElement(Hb,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const tN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fe=b.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:p}=e,m=Gb(e,Yb),{basename:_}=b.useContext(Qr),y,I=!1;if(typeof c=="string"&&nN.test(c)&&(y=c,tN))try{let S=new URL(window.location.href),R=c.startsWith("//")?new URL(S.protocol+c):new URL(c),O=mm(R.pathname,_);R.origin===S.origin&&O!=null?c=O+R.search+R.hash:I=!0}catch{}let T=Cb(c,{relative:s}),x=rN(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:p});function v(S){r&&r(S),S.defaultPrevented||x(S)}return b.createElement("a",Df({},m,{href:y||T,onClick:I||i?r:v,ref:n,target:l}))});var E0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(E0||(E0={}));var T0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(T0||(T0={}));function rN(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=Gi(),c=Ki(),d=A1(t,{relative:o});return b.useCallback(p=>{if(Xb(p,n)){p.preventDefault();let m=r!==void 0?r:Ku(c)===Ku(d);l(t,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}const C1=b.createContext(null),sN=(t,e)=>{switch(e.type){case"ADD_ITEM":return t.items.find(r=>r.id===e.payload.product.id&&r.selectedSize===e.payload.size&&r.selectedColor===e.payload.color)?{...t,items:t.items.map(r=>r.id===e.payload.product.id&&r.selectedSize===e.payload.size&&r.selectedColor===e.payload.color?{...r,quantity:r.quantity+1}:r),total:t.total+e.payload.product.price}:{...t,items:[...t.items,{...e.payload.product,quantity:1,selectedSize:e.payload.size,selectedColor:e.payload.color}],total:t.total+e.payload.product.price};case"REMOVE_ITEM":{const n=t.items.find(r=>r.id===e.payload);return{...t,items:t.items.filter(r=>r.id!==e.payload),total:t.total-(n?n.price*n.quantity:0)}}case"UPDATE_QUANTITY":{const n=t.items.find(s=>s.id===e.payload.id);if(!n)return t;const r=e.payload.quantity-n.quantity;return{...t,items:t.items.map(s=>s.id===e.payload.id?{...s,quantity:e.payload.quantity}:s),total:t.total+n.price*r}}case"UPDATE_ITEM":{const n=t.items.find(r=>r.id===e.payload.id);return n?{...t,items:t.items.map(r=>r.id===e.payload.id?{...r,selectedSize:e.payload.size,selectedColor:e.payload.color,quantity:e.payload.quantity}:r),total:t.total+n.price*(e.payload.quantity-n.quantity)}:t}case"CLEAR_CART":return{items:[],total:0};default:return t}};function iN({children:t}){const[e,n]=b.useReducer(sN,{items:[],total:0});return h.jsx(C1.Provider,{value:{state:e,dispatch:n},children:t})}function Mc(){const t=b.useContext(C1);if(!t)throw new Error("useCart must be used within a CartProvider");return t}var S0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},oN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},N1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,p=(i&3)<<4|a>>4;let m=(a&15)<<2|c>>6,_=c&63;l||(_=64,o||(m=64)),r.push(n[d],n[p],n[m],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(b1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):oN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||p==null)throw new aN;const m=i<<2|a>>4;if(r.push(m),c!==64){const _=a<<4&240|c>>2;if(r.push(_),p!==64){const y=c<<6&192|p;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class aN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lN=function(t){const e=b1(t);return N1.encodeByteArray(e,!0)},Qu=function(t){return lN(t).replace(/\./g,"")},R1=function(t){try{return N1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN=()=>uN().__FIREBASE_DEFAULTS__,hN=()=>{if(typeof process>"u"||typeof S0>"u")return;const t=S0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},dN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&R1(t[1]);return e&&JSON.parse(e)},Fc=()=>{try{return cN()||hN()||dN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},j1=t=>{var e,n;return(n=(e=Fc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},D1=t=>{const e=j1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},V1=()=>{var t;return(t=Fc())===null||t===void 0?void 0:t.config},O1=t=>{var e;return(e=Fc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Qu(JSON.stringify(n)),Qu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gt())}function mN(){var t;const e=(t=Fc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _N(){const t=gt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function xN(){return!mN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wN(){try{return typeof indexedDB=="object"}catch{return!1}}function EN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN="FirebaseError";class In extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=TN,Object.setPrototypeOf(this,In.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$a.prototype.create)}}class $a{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?SN(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new In(s,a,r)}}function SN(t,e){return t.replace(IN,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const IN=/\{\$([^}]+)}/g;function AN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Xu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(I0(i)&&I0(o)){if(!Xu(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function I0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ro(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function jo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function kN(t,e){const n=new PN(t,e);return n.subscribe.bind(n)}class PN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");CN(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=hd),s.error===void 0&&(s.error=hd),s.complete===void 0&&(s.complete=hd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function hd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(t){return t&&t._delegate?t._delegate:t}class Fr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new fN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(RN(e))try{this.getOrInitializeService({instanceIdentifier:ls})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ls){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ls){return this.instances.has(e)}getOptions(e=ls){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:NN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ls){return this.component?this.component.multipleInstances?e:ls:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NN(t){return t===ls?void 0:t}function RN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new bN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(re||(re={}));const DN={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},VN=re.INFO,ON={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},LN=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=ON[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _m{constructor(e){this.name=e,this._logLevel=VN,this._logHandler=LN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?DN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...e),this._logHandler(this,re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...e),this._logHandler(this,re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,re.INFO,...e),this._logHandler(this,re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,re.WARN,...e),this._logHandler(this,re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...e),this._logHandler(this,re.ERROR,...e)}}const MN=(t,e)=>e.some(n=>t instanceof n);let A0,k0;function FN(){return A0||(A0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function UN(){return k0||(k0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const M1=new WeakMap,Vf=new WeakMap,F1=new WeakMap,dd=new WeakMap,xm=new WeakMap;function BN(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Nr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&M1.set(n,t)}).catch(()=>{}),xm.set(e,t),e}function zN(t){if(Vf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Vf.set(t,e)}let Of={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Vf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||F1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Nr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $N(t){Of=t(Of)}function qN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(fd(this),e,...n);return F1.set(r,e.sort?e.sort():[e]),Nr(r)}:UN().includes(t)?function(...e){return t.apply(fd(this),e),Nr(M1.get(this))}:function(...e){return Nr(t.apply(fd(this),e))}}function WN(t){return typeof t=="function"?qN(t):(t instanceof IDBTransaction&&zN(t),MN(t,FN())?new Proxy(t,Of):t)}function Nr(t){if(t instanceof IDBRequest)return BN(t);if(dd.has(t))return dd.get(t);const e=WN(t);return e!==t&&(dd.set(t,e),xm.set(e,t)),e}const fd=t=>xm.get(t);function HN(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Nr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Nr(o.result),l.oldVersion,l.newVersion,Nr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const KN=["get","getKey","getAll","getAllKeys","count"],GN=["put","add","delete","clear"],pd=new Map;function P0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(pd.get(e))return pd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=GN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||KN.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return pd.set(e,i),i}$N(t=>({...t,get:(e,n,r)=>P0(e,n)||t.get(e,n,r),has:(e,n)=>!!P0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(XN(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function XN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Lf="@firebase/app",C0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn=new _m("@firebase/app"),YN="@firebase/app-compat",JN="@firebase/analytics-compat",ZN="@firebase/analytics",eR="@firebase/app-check-compat",tR="@firebase/app-check",nR="@firebase/auth",rR="@firebase/auth-compat",sR="@firebase/database",iR="@firebase/data-connect",oR="@firebase/database-compat",aR="@firebase/functions",lR="@firebase/functions-compat",uR="@firebase/installations",cR="@firebase/installations-compat",hR="@firebase/messaging",dR="@firebase/messaging-compat",fR="@firebase/performance",pR="@firebase/performance-compat",mR="@firebase/remote-config",gR="@firebase/remote-config-compat",yR="@firebase/storage",vR="@firebase/storage-compat",_R="@firebase/firestore",xR="@firebase/vertexai-preview",wR="@firebase/firestore-compat",ER="firebase",TR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf="[DEFAULT]",SR={[Lf]:"fire-core",[YN]:"fire-core-compat",[ZN]:"fire-analytics",[JN]:"fire-analytics-compat",[tR]:"fire-app-check",[eR]:"fire-app-check-compat",[nR]:"fire-auth",[rR]:"fire-auth-compat",[sR]:"fire-rtdb",[iR]:"fire-data-connect",[oR]:"fire-rtdb-compat",[aR]:"fire-fn",[lR]:"fire-fn-compat",[uR]:"fire-iid",[cR]:"fire-iid-compat",[hR]:"fire-fcm",[dR]:"fire-fcm-compat",[fR]:"fire-perf",[pR]:"fire-perf-compat",[mR]:"fire-rc",[gR]:"fire-rc-compat",[yR]:"fire-gcs",[vR]:"fire-gcs-compat",[_R]:"fire-fst",[wR]:"fire-fst-compat",[xR]:"fire-vertex","fire-js":"fire-js",[ER]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu=new Map,IR=new Map,Ff=new Map;function b0(t,e){try{t.container.addComponent(e)}catch(n){Xn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function As(t){const e=t.name;if(Ff.has(e))return Xn.debug(`There were multiple attempts to register component ${e}.`),!1;Ff.set(e,t);for(const n of Yu.values())b0(n,t);for(const n of IR.values())b0(n,t);return!0}function Uc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function On(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rr=new $a("app","Firebase",AR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs=TR;function U1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Mf,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Rr.create("bad-app-name",{appName:String(s)});if(n||(n=V1()),!n)throw Rr.create("no-options");const i=Yu.get(s);if(i){if(Xu(n,i.options)&&Xu(r,i.config))return i;throw Rr.create("duplicate-app",{appName:s})}const o=new jN(s);for(const l of Ff.values())o.addComponent(l);const a=new kR(n,r,o);return Yu.set(s,a),a}function wm(t=Mf){const e=Yu.get(t);if(!e&&t===Mf&&V1())return U1();if(!e)throw Rr.create("no-app",{appName:t});return e}function gn(t,e,n){var r;let s=(r=SR[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xn.warn(a.join(" "));return}As(new Fr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR="firebase-heartbeat-database",CR=1,Ea="firebase-heartbeat-store";let md=null;function B1(){return md||(md=HN(PR,CR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ea)}catch(n){console.warn(n)}}}}).catch(t=>{throw Rr.create("idb-open",{originalErrorMessage:t.message})})),md}async function bR(t){try{const n=(await B1()).transaction(Ea),r=await n.objectStore(Ea).get(z1(t));return await n.done,r}catch(e){if(e instanceof In)Xn.warn(e.message);else{const n=Rr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xn.warn(n.message)}}}async function N0(t,e){try{const r=(await B1()).transaction(Ea,"readwrite");await r.objectStore(Ea).put(e,z1(t)),await r.done}catch(n){if(n instanceof In)Xn.warn(n.message);else{const r=Rr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xn.warn(r.message)}}}function z1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=1024,RR=30*24*60*60*1e3;class jR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new VR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=R0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=RR}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Xn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=R0(),{heartbeatsToSend:r,unsentEntries:s}=DR(this._heartbeatsCache.heartbeats),i=Qu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Xn.warn(n),""}}}function R0(){return new Date().toISOString().substring(0,10)}function DR(t,e=NR){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),j0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),j0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class VR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wN()?EN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await bR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return N0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return N0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function j0(t){return Qu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(t){As(new Fr("platform-logger",e=>new QN(e),"PRIVATE")),As(new Fr("heartbeat",e=>new jR(e),"PRIVATE")),gn(Lf,C0,t),gn(Lf,C0,"esm2017"),gn("fire-js","")}OR("");function Em(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function $1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const LR=$1,q1=new $a("auth","Firebase",$1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju=new _m("@firebase/auth");function MR(t,...e){Ju.logLevel<=re.WARN&&Ju.warn(`Auth (${Vs}): ${t}`,...e)}function hu(t,...e){Ju.logLevel<=re.ERROR&&Ju.error(`Auth (${Vs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(t,...e){throw Tm(t,...e)}function yn(t,...e){return Tm(t,...e)}function W1(t,e,n){const r=Object.assign(Object.assign({},LR()),{[e]:n});return new $a("auth","Firebase",r).create(e,{appName:t.name})}function jr(t){return W1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Tm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return q1.create(t,...e)}function Q(t,e,...n){if(!t)throw Tm(e,...n)}function Ln(t){const e="INTERNAL ASSERTION FAILED: "+t;throw hu(e),new Error(e)}function Yn(t,e){t||Ln(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function FR(){return D0()==="http:"||D0()==="https:"}function D0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(FR()||yN()||"connection"in navigator)?navigator.onLine:!0}function BR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,n){this.shortDelay=e,this.longDelay=n,Yn(n>e,"Short delay should be less than long delay!"),this.isMobile=pN()||vN()}get(){return UR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(t,e){Yn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ln("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ln("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ln("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R=new Wa(3e4,6e4);function Os(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Yr(t,e,n,r,s={}){return K1(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=qa(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return gN()||(c.referrerPolicy="no-referrer"),H1.fetch()(G1(t,t.config.apiHost,n,a),c)})}async function K1(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},zR),e);try{const s=new WR(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw zl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw zl(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw zl(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw zl(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw W1(t,d,c);ln(t,d)}}catch(s){if(s instanceof In)throw s;ln(t,"network-request-failed",{message:String(s)})}}async function Bc(t,e,n,r,s={}){const i=await Yr(t,e,n,r,s);return"mfaPendingCredential"in i&&ln(t,"multi-factor-auth-required",{_serverResponse:i}),i}function G1(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Sm(t.config,s):`${t.config.apiScheme}://${s}`}function qR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class WR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(yn(this.auth,"network-request-failed")),$R.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function zl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=yn(t,e,r);return s.customData._tokenResponse=n,s}function V0(t){return t!==void 0&&t.enterprise!==void 0}class HR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return qR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function KR(t,e){return Yr(t,"GET","/v2/recaptchaConfig",Os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GR(t,e){return Yr(t,"POST","/v1/accounts:delete",e)}async function Q1(t,e){return Yr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Go(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function QR(t,e=!1){const n=Ce(t),r=await n.getIdToken(e),s=Im(r);Q(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Go(gd(s.auth_time)),issuedAtTime:Go(gd(s.iat)),expirationTime:Go(gd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function gd(t){return Number(t)*1e3}function Im(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return hu("JWT malformed, contained fewer than 3 sections"),null;try{const s=R1(n);return s?JSON.parse(s):(hu("Failed to decode base64 JWT payload"),null)}catch(s){return hu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function O0(t){const e=Im(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ta(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof In&&XR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function XR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Go(this.lastLoginAt),this.creationTime=Go(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zu(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ta(t,Q1(n,{idToken:r}));Q(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?X1(i.providerUserInfo):[],a=ZR(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Bf(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,p)}async function JR(t){const e=Ce(t);await Zu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ZR(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function X1(t){return t.map(e=>{var{providerId:n}=e,r=Em(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e2(t,e){const n=await K1(t,{},async()=>{const r=qa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=G1(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",H1.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function t2(t,e){return Yr(t,"POST","/v2/accounts:revokeToken",Os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):O0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Q(e.length!==0,"internal-error");const n=O0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await e2(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new xi;return r&&(Q(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Q(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Q(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xi,this.toJSON())}_performRefresh(){return Ln("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Mn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Em(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new YR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Bf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ta(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return QR(this,e)}reload(){return JR(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Mn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Zu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(On(this.auth.app))return Promise.reject(jr(this.auth));const e=await this.getIdToken();return await Ta(this,GR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,d;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,_=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,I=(a=n.tenantId)!==null&&a!==void 0?a:void 0,T=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,x=(c=n.createdAt)!==null&&c!==void 0?c:void 0,v=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:S,emailVerified:R,isAnonymous:O,providerData:M,stsTokenManager:k}=n;Q(S&&k,e,"internal-error");const w=xi.fromJSON(this.name,k);Q(typeof S=="string",e,"internal-error"),ar(p,e.name),ar(m,e.name),Q(typeof R=="boolean",e,"internal-error"),Q(typeof O=="boolean",e,"internal-error"),ar(_,e.name),ar(y,e.name),ar(I,e.name),ar(T,e.name),ar(x,e.name),ar(v,e.name);const A=new Mn({uid:S,auth:e,email:m,emailVerified:R,displayName:p,isAnonymous:O,photoURL:y,phoneNumber:_,tenantId:I,stsTokenManager:w,createdAt:x,lastLoginAt:v});return M&&Array.isArray(M)&&(A.providerData=M.map(P=>Object.assign({},P))),T&&(A._redirectEventId=T),A}static async _fromIdTokenResponse(e,n,r=!1){const s=new xi;s.updateFromServerResponse(n);const i=new Mn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Zu(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Q(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?X1(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new xi;a.updateFromIdToken(r);const l=new Mn({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Bf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0=new Map;function Fn(t){Yn(t instanceof Function,"Expected a class definition");let e=L0.get(t);return e?(Yn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,L0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Y1.type="NONE";const M0=Y1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(t,e,n){return`firebase:${t}:${e}:${n}`}class wi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=du(this.userKey,s.apiKey,i),this.fullPersistenceKey=du("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Mn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new wi(Fn(M0),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Fn(M0);const o=du(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const p=Mn._fromJSON(e,d);c!==i&&(a=p),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new wi(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new wi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(J1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rT(e))return"Blackberry";if(sT(e))return"Webos";if(Z1(e))return"Safari";if((e.includes("chrome/")||eT(e))&&!e.includes("edge/"))return"Chrome";if(nT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function J1(t=gt()){return/firefox\//i.test(t)}function Z1(t=gt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function eT(t=gt()){return/crios\//i.test(t)}function tT(t=gt()){return/iemobile/i.test(t)}function nT(t=gt()){return/android/i.test(t)}function rT(t=gt()){return/blackberry/i.test(t)}function sT(t=gt()){return/webos/i.test(t)}function Am(t=gt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function n2(t=gt()){var e;return Am(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function r2(){return _N()&&document.documentMode===10}function iT(t=gt()){return Am(t)||nT(t)||sT(t)||rT(t)||/windows phone/i.test(t)||tT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(t,e=[]){let n;switch(t){case"Browser":n=F0(gt());break;case"Worker":n=`${F0(gt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Vs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i2(t,e={}){return Yr(t,"GET","/v2/passwordPolicy",Os(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2=6;class a2{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:o2,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new U0(this),this.idTokenSubscription=new U0(this),this.beforeStateQueue=new s2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=q1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Fn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await wi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Q1(this,{idToken:e}),r=await Mn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(On(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Zu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=BR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(On(this.app))return Promise.reject(jr(this));const n=e?Ce(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return On(this.app)?Promise.reject(jr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return On(this.app)?Promise.reject(jr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await i2(this),n=new a2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new $a("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await t2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Fn(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=await wi.create(this,[Fn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&MR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Qi(t){return Ce(t)}class U0{constructor(e){this.auth=e,this.observer=null,this.addObserver=kN(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function u2(t){zc=t}function aT(t){return zc.loadJS(t)}function c2(){return zc.recaptchaEnterpriseScript}function h2(){return zc.gapiScript}function d2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const f2="recaptcha-enterprise",p2="NO_RECAPTCHA";class m2{constructor(e){this.type=f2,this.auth=Qi(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{KR(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new HR(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;V0(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(p2)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&V0(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=c2();l.length!==0&&(l+=a),aT(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function B0(t,e,n,r=!1){const s=new m2(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function z0(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await B0(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await B0(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(t,e){const n=Uc(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Xu(i,e??{}))return s;ln(s,"already-initialized")}return n.initialize({options:e})}function y2(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Fn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function v2(t,e,n){const r=Qi(t);Q(r._canInitEmulator,r,"emulator-config-failed"),Q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=lT(e),{host:o,port:a}=_2(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),x2()}function lT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _2(t){const e=lT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:$0(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:$0(o)}}}function $0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function x2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ln("not implemented")}_getIdTokenResponse(e){return Ln("not implemented")}_linkToIdToken(e,n){return Ln("not implemented")}_getReauthenticationResolver(e){return Ln("not implemented")}}async function w2(t,e){return Yr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E2(t,e){return Bc(t,"POST","/v1/accounts:signInWithPassword",Os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T2(t,e){return Bc(t,"POST","/v1/accounts:signInWithEmailLink",Os(t,e))}async function S2(t,e){return Bc(t,"POST","/v1/accounts:signInWithEmailLink",Os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa extends km{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Sa(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Sa(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return z0(e,n,"signInWithPassword",E2);case"emailLink":return T2(e,{email:this._email,oobCode:this._password});default:ln(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return z0(e,r,"signUpPassword",w2);case"emailLink":return S2(e,{idToken:n,email:this._email,oobCode:this._password});default:ln(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ei(t,e){return Bc(t,"POST","/v1/accounts:signInWithIdp",Os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2="http://localhost";class ks extends km{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ks(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ln("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Em(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ks(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ei(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ei(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ei(e,n)}buildRequest(){const e={requestUri:I2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=qa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A2(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function k2(t){const e=Ro(jo(t)).link,n=e?Ro(jo(e)).deep_link_id:null,r=Ro(jo(t)).deep_link_id;return(r?Ro(jo(r)).link:null)||r||n||e||t}class Pm{constructor(e){var n,r,s,i,o,a;const l=Ro(jo(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,p=A2((s=l.mode)!==null&&s!==void 0?s:null);Q(c&&d&&p,"argument-error"),this.apiKey=c,this.operation=p,this.code=d,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=k2(e);try{return new Pm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(){this.providerId=Xi.PROVIDER_ID}static credential(e,n){return Sa._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Pm.parseLink(n);return Q(r,"argument-error"),Sa._fromEmailAndCode(e,r.code,r.tenantId)}}Xi.PROVIDER_ID="password";Xi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha extends uT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends Ha{constructor(){super("facebook.com")}static credential(e){return ks._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fr.credential(e.oauthAccessToken)}catch{return null}}}fr.FACEBOOK_SIGN_IN_METHOD="facebook.com";fr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends Ha{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ks._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return pr.credential(n,r)}catch{return null}}}pr.GOOGLE_SIGN_IN_METHOD="google.com";pr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends Ha{constructor(){super("github.com")}static credential(e){return ks._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mr.credential(e.oauthAccessToken)}catch{return null}}}mr.GITHUB_SIGN_IN_METHOD="github.com";mr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends Ha{constructor(){super("twitter.com")}static credential(e,n){return ks._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return gr.credential(n,r)}catch{return null}}}gr.TWITTER_SIGN_IN_METHOD="twitter.com";gr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Mn._fromIdTokenResponse(e,r,s),o=q0(r);return new Ni({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=q0(r);return new Ni({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function q0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec extends In{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,ec.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new ec(e,n,r,s)}}function cT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ec._fromErrorAndOperation(t,i,e,r):i})}async function P2(t,e,n=!1){const r=await Ta(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ni._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C2(t,e,n=!1){const{auth:r}=t;if(On(r.app))return Promise.reject(jr(r));const s="reauthenticate";try{const i=await Ta(t,cT(r,s,e,t),n);Q(i.idToken,r,"internal-error");const o=Im(i.idToken);Q(o,r,"internal-error");const{sub:a}=o;return Q(t.uid===a,r,"user-mismatch"),Ni._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ln(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hT(t,e,n=!1){if(On(t.app))return Promise.reject(jr(t));const r="signIn",s=await cT(t,r,e),i=await Ni._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function b2(t,e){return hT(Qi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N2(t){const e=Qi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function dT(t,e,n){return On(t.app)?Promise.reject(jr(t)):b2(Ce(t),Xi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&N2(t),r})}function R2(t,e,n,r){return Ce(t).onIdTokenChanged(e,n,r)}function j2(t,e,n){return Ce(t).beforeAuthStateChanged(e,n)}function D2(t,e,n,r){return Ce(t).onAuthStateChanged(e,n,r)}function V2(t){return Ce(t).signOut()}const tc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(tc,"1"),this.storage.removeItem(tc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=1e3,L2=10;class pT extends fT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=iT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);r2()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,L2):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},O2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}pT.type="LOCAL";const M2=pT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT extends fT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}mT.type="SESSION";const gT=mT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new $c(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await F2(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$c.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=Cm("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const m=p;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(){return window}function B2(t){vn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(){return typeof vn().WorkerGlobalScope<"u"&&typeof vn().importScripts=="function"}async function z2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function q2(){return yT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT="firebaseLocalStorageDb",W2=1,nc="firebaseLocalStorage",_T="fbase_key";class Ka{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function qc(t,e){return t.transaction([nc],e?"readwrite":"readonly").objectStore(nc)}function H2(){const t=indexedDB.deleteDatabase(vT);return new Ka(t).toPromise()}function zf(){const t=indexedDB.open(vT,W2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(nc,{keyPath:_T})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(nc)?e(r):(r.close(),await H2(),e(await zf()))})})}async function W0(t,e,n){const r=qc(t,!0).put({[_T]:e,value:n});return new Ka(r).toPromise()}async function K2(t,e){const n=qc(t,!1).get(e),r=await new Ka(n).toPromise();return r===void 0?null:r.value}function H0(t,e){const n=qc(t,!0).delete(e);return new Ka(n).toPromise()}const G2=800,Q2=3;class xT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Q2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$c._getInstance(q2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await z2(),!this.activeServiceWorker)return;this.sender=new U2(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zf();return await W0(e,tc,"1"),await H0(e,tc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>W0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>K2(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>H0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=qc(s,!1).getAll();return new Ka(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),G2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xT.type="LOCAL";const X2=xT;new Wa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(t,e){return e?Fn(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm extends km{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ei(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ei(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ei(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function J2(t){return hT(t.auth,new bm(t),t.bypassAuthState)}function Z2(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),C2(n,new bm(t),t.bypassAuthState)}async function ej(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),P2(n,new bm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return J2;case"linkViaPopup":case"linkViaRedirect":return ej;case"reauthViaPopup":case"reauthViaRedirect":return Z2;default:ln(this.auth,"internal-error")}}resolve(e){Yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj=new Wa(2e3,1e4);class li extends wT{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,li.currentPopupAction&&li.currentPopupAction.cancel(),li.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Q(e,this.auth,"internal-error"),e}async onExecution(){Yn(this.filter.length===1,"Popup operations only handle one event");const e=Cm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(yn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,li.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tj.get())};e()}}li.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj="pendingRedirect",fu=new Map;class rj extends wT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=fu.get(this.auth._key());if(!e){try{const r=await sj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}fu.set(this.auth._key(),e)}return this.bypassAuthState||fu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sj(t,e){const n=aj(e),r=oj(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function ij(t,e){fu.set(t._key(),e)}function oj(t){return Fn(t._redirectPersistence)}function aj(t){return du(nj,t.config.apiKey,t.name)}async function lj(t,e,n=!1){if(On(t.app))return Promise.reject(jr(t));const r=Qi(t),s=Y2(r,e),o=await new rj(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=10*60*1e3;class cj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!ET(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(yn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uj&&this.cachedEventUids.clear(),this.cachedEventUids.has(K0(e))}saveEventToCache(e){this.cachedEventUids.add(K0(e)),this.lastProcessedEventTime=Date.now()}}function K0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ET({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function hj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ET(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dj(t,e={}){return Yr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pj=/^https?/;async function mj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await dj(t);for(const n of e)try{if(gj(n))return}catch{}ln(t,"unauthorized-domain")}function gj(t){const e=Uf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!pj.test(n))return!1;if(fj.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj=new Wa(3e4,6e4);function G0(){const t=vn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function vj(t){return new Promise((e,n)=>{var r,s,i;function o(){G0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{G0(),n(yn(t,"network-request-failed"))},timeout:yj.get()})}if(!((s=(r=vn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=vn().gapi)===null||i===void 0)&&i.load)o();else{const a=d2("iframefcb");return vn()[a]=()=>{gapi.load?o():n(yn(t,"network-request-failed"))},aT(`${h2()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw pu=null,e})}let pu=null;function _j(t){return pu=pu||vj(t),pu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj=new Wa(5e3,15e3),wj="__/auth/iframe",Ej="emulator/auth/iframe",Tj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Sj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ij(t){const e=t.config;Q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Sm(e,Ej):`https://${t.config.authDomain}/${wj}`,r={apiKey:e.apiKey,appName:t.name,v:Vs},s=Sj.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${qa(r).slice(1)}`}async function Aj(t){const e=await _j(t),n=vn().gapi;return Q(n,t,"internal-error"),e.open({where:document.body,url:Ij(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Tj,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=yn(t,"network-request-failed"),a=vn().setTimeout(()=>{i(o)},xj.get());function l(){vn().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Pj=500,Cj=600,bj="_blank",Nj="http://localhost";class Q0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Rj(t,e,n,r=Pj,s=Cj){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},kj),{width:r.toString(),height:s.toString(),top:i,left:o}),c=gt().toLowerCase();n&&(a=eT(c)?bj:n),J1(c)&&(e=e||Nj,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[_,y])=>`${m}${_}=${y},`,"");if(n2(c)&&a!=="_self")return jj(e||"",a),new Q0(null);const p=window.open(e||"",a,d);Q(p,t,"popup-blocked");try{p.focus()}catch{}return new Q0(p)}function jj(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dj="__/auth/handler",Vj="emulator/auth/handler",Oj=encodeURIComponent("fac");async function X0(t,e,n,r,s,i){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Vs,eventId:s};if(e instanceof uT){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",AN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))o[d]=p}if(e instanceof Ha){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${Oj}=${encodeURIComponent(l)}`:"";return`${Lj(t)}?${qa(a).slice(1)}${c}`}function Lj({config:t}){return t.emulator?Sm(t,Vj):`https://${t.authDomain}/${Dj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd="webStorageSupport";class Mj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gT,this._completeRedirectFn=lj,this._overrideRedirectResult=ij}async _openPopup(e,n,r,s){var i;Yn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await X0(e,n,r,Uf(),s);return Rj(e,o,Cm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await X0(e,n,r,Uf(),s);return B2(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Yn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Aj(e),r=new cj(e);return n.register("authEvent",s=>(Q(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(yd,{type:yd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[yd];o!==void 0&&n(!!o),ln(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=mj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return iT()||Z1()||Am()}}const Fj=Mj;var Y0="@firebase/auth",J0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zj(t){As(new Fr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Q(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oT(t)},c=new l2(r,s,i,l);return y2(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),As(new Fr("auth-internal",e=>{const n=Qi(e.getProvider("auth").getImmediate());return(r=>new Uj(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),gn(Y0,J0,Bj(t)),gn(Y0,J0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j=5*60,qj=O1("authIdTokenMaxAge")||$j;let Z0=null;const Wj=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>qj)return;const s=n==null?void 0:n.token;Z0!==s&&(Z0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Hj(t=wm()){const e=Uc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=g2(t,{popupRedirectResolver:Fj,persistence:[X2,M2,gT]}),r=O1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=Wj(i.toString());j2(n,o,()=>o(n.currentUser)),R2(n,a=>o(a))}}const s=j1("auth");return s&&v2(n,`http://${s}`),n}function Kj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}u2({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=yn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",Kj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zj("Browser");var Gj="firebase",Qj="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn(Gj,Qj,"app");var e_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vs,TT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,w){function A(){}A.prototype=w.prototype,k.D=w.prototype,k.prototype=new A,k.prototype.constructor=k,k.C=function(P,N,j){for(var C=Array(arguments.length-2),yt=2;yt<arguments.length;yt++)C[yt-2]=arguments[yt];return w.prototype[N].apply(P,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,w,A){A||(A=0);var P=Array(16);if(typeof w=="string")for(var N=0;16>N;++N)P[N]=w.charCodeAt(A++)|w.charCodeAt(A++)<<8|w.charCodeAt(A++)<<16|w.charCodeAt(A++)<<24;else for(N=0;16>N;++N)P[N]=w[A++]|w[A++]<<8|w[A++]<<16|w[A++]<<24;w=k.g[0],A=k.g[1],N=k.g[2];var j=k.g[3],C=w+(j^A&(N^j))+P[0]+3614090360&4294967295;w=A+(C<<7&4294967295|C>>>25),C=j+(N^w&(A^N))+P[1]+3905402710&4294967295,j=w+(C<<12&4294967295|C>>>20),C=N+(A^j&(w^A))+P[2]+606105819&4294967295,N=j+(C<<17&4294967295|C>>>15),C=A+(w^N&(j^w))+P[3]+3250441966&4294967295,A=N+(C<<22&4294967295|C>>>10),C=w+(j^A&(N^j))+P[4]+4118548399&4294967295,w=A+(C<<7&4294967295|C>>>25),C=j+(N^w&(A^N))+P[5]+1200080426&4294967295,j=w+(C<<12&4294967295|C>>>20),C=N+(A^j&(w^A))+P[6]+2821735955&4294967295,N=j+(C<<17&4294967295|C>>>15),C=A+(w^N&(j^w))+P[7]+4249261313&4294967295,A=N+(C<<22&4294967295|C>>>10),C=w+(j^A&(N^j))+P[8]+1770035416&4294967295,w=A+(C<<7&4294967295|C>>>25),C=j+(N^w&(A^N))+P[9]+2336552879&4294967295,j=w+(C<<12&4294967295|C>>>20),C=N+(A^j&(w^A))+P[10]+4294925233&4294967295,N=j+(C<<17&4294967295|C>>>15),C=A+(w^N&(j^w))+P[11]+2304563134&4294967295,A=N+(C<<22&4294967295|C>>>10),C=w+(j^A&(N^j))+P[12]+1804603682&4294967295,w=A+(C<<7&4294967295|C>>>25),C=j+(N^w&(A^N))+P[13]+4254626195&4294967295,j=w+(C<<12&4294967295|C>>>20),C=N+(A^j&(w^A))+P[14]+2792965006&4294967295,N=j+(C<<17&4294967295|C>>>15),C=A+(w^N&(j^w))+P[15]+1236535329&4294967295,A=N+(C<<22&4294967295|C>>>10),C=w+(N^j&(A^N))+P[1]+4129170786&4294967295,w=A+(C<<5&4294967295|C>>>27),C=j+(A^N&(w^A))+P[6]+3225465664&4294967295,j=w+(C<<9&4294967295|C>>>23),C=N+(w^A&(j^w))+P[11]+643717713&4294967295,N=j+(C<<14&4294967295|C>>>18),C=A+(j^w&(N^j))+P[0]+3921069994&4294967295,A=N+(C<<20&4294967295|C>>>12),C=w+(N^j&(A^N))+P[5]+3593408605&4294967295,w=A+(C<<5&4294967295|C>>>27),C=j+(A^N&(w^A))+P[10]+38016083&4294967295,j=w+(C<<9&4294967295|C>>>23),C=N+(w^A&(j^w))+P[15]+3634488961&4294967295,N=j+(C<<14&4294967295|C>>>18),C=A+(j^w&(N^j))+P[4]+3889429448&4294967295,A=N+(C<<20&4294967295|C>>>12),C=w+(N^j&(A^N))+P[9]+568446438&4294967295,w=A+(C<<5&4294967295|C>>>27),C=j+(A^N&(w^A))+P[14]+3275163606&4294967295,j=w+(C<<9&4294967295|C>>>23),C=N+(w^A&(j^w))+P[3]+4107603335&4294967295,N=j+(C<<14&4294967295|C>>>18),C=A+(j^w&(N^j))+P[8]+1163531501&4294967295,A=N+(C<<20&4294967295|C>>>12),C=w+(N^j&(A^N))+P[13]+2850285829&4294967295,w=A+(C<<5&4294967295|C>>>27),C=j+(A^N&(w^A))+P[2]+4243563512&4294967295,j=w+(C<<9&4294967295|C>>>23),C=N+(w^A&(j^w))+P[7]+1735328473&4294967295,N=j+(C<<14&4294967295|C>>>18),C=A+(j^w&(N^j))+P[12]+2368359562&4294967295,A=N+(C<<20&4294967295|C>>>12),C=w+(A^N^j)+P[5]+4294588738&4294967295,w=A+(C<<4&4294967295|C>>>28),C=j+(w^A^N)+P[8]+2272392833&4294967295,j=w+(C<<11&4294967295|C>>>21),C=N+(j^w^A)+P[11]+1839030562&4294967295,N=j+(C<<16&4294967295|C>>>16),C=A+(N^j^w)+P[14]+4259657740&4294967295,A=N+(C<<23&4294967295|C>>>9),C=w+(A^N^j)+P[1]+2763975236&4294967295,w=A+(C<<4&4294967295|C>>>28),C=j+(w^A^N)+P[4]+1272893353&4294967295,j=w+(C<<11&4294967295|C>>>21),C=N+(j^w^A)+P[7]+4139469664&4294967295,N=j+(C<<16&4294967295|C>>>16),C=A+(N^j^w)+P[10]+3200236656&4294967295,A=N+(C<<23&4294967295|C>>>9),C=w+(A^N^j)+P[13]+681279174&4294967295,w=A+(C<<4&4294967295|C>>>28),C=j+(w^A^N)+P[0]+3936430074&4294967295,j=w+(C<<11&4294967295|C>>>21),C=N+(j^w^A)+P[3]+3572445317&4294967295,N=j+(C<<16&4294967295|C>>>16),C=A+(N^j^w)+P[6]+76029189&4294967295,A=N+(C<<23&4294967295|C>>>9),C=w+(A^N^j)+P[9]+3654602809&4294967295,w=A+(C<<4&4294967295|C>>>28),C=j+(w^A^N)+P[12]+3873151461&4294967295,j=w+(C<<11&4294967295|C>>>21),C=N+(j^w^A)+P[15]+530742520&4294967295,N=j+(C<<16&4294967295|C>>>16),C=A+(N^j^w)+P[2]+3299628645&4294967295,A=N+(C<<23&4294967295|C>>>9),C=w+(N^(A|~j))+P[0]+4096336452&4294967295,w=A+(C<<6&4294967295|C>>>26),C=j+(A^(w|~N))+P[7]+1126891415&4294967295,j=w+(C<<10&4294967295|C>>>22),C=N+(w^(j|~A))+P[14]+2878612391&4294967295,N=j+(C<<15&4294967295|C>>>17),C=A+(j^(N|~w))+P[5]+4237533241&4294967295,A=N+(C<<21&4294967295|C>>>11),C=w+(N^(A|~j))+P[12]+1700485571&4294967295,w=A+(C<<6&4294967295|C>>>26),C=j+(A^(w|~N))+P[3]+2399980690&4294967295,j=w+(C<<10&4294967295|C>>>22),C=N+(w^(j|~A))+P[10]+4293915773&4294967295,N=j+(C<<15&4294967295|C>>>17),C=A+(j^(N|~w))+P[1]+2240044497&4294967295,A=N+(C<<21&4294967295|C>>>11),C=w+(N^(A|~j))+P[8]+1873313359&4294967295,w=A+(C<<6&4294967295|C>>>26),C=j+(A^(w|~N))+P[15]+4264355552&4294967295,j=w+(C<<10&4294967295|C>>>22),C=N+(w^(j|~A))+P[6]+2734768916&4294967295,N=j+(C<<15&4294967295|C>>>17),C=A+(j^(N|~w))+P[13]+1309151649&4294967295,A=N+(C<<21&4294967295|C>>>11),C=w+(N^(A|~j))+P[4]+4149444226&4294967295,w=A+(C<<6&4294967295|C>>>26),C=j+(A^(w|~N))+P[11]+3174756917&4294967295,j=w+(C<<10&4294967295|C>>>22),C=N+(w^(j|~A))+P[2]+718787259&4294967295,N=j+(C<<15&4294967295|C>>>17),C=A+(j^(N|~w))+P[9]+3951481745&4294967295,k.g[0]=k.g[0]+w&4294967295,k.g[1]=k.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,k.g[2]=k.g[2]+N&4294967295,k.g[3]=k.g[3]+j&4294967295}r.prototype.u=function(k,w){w===void 0&&(w=k.length);for(var A=w-this.blockSize,P=this.B,N=this.h,j=0;j<w;){if(N==0)for(;j<=A;)s(this,k,j),j+=this.blockSize;if(typeof k=="string"){for(;j<w;)if(P[N++]=k.charCodeAt(j++),N==this.blockSize){s(this,P),N=0;break}}else for(;j<w;)if(P[N++]=k[j++],N==this.blockSize){s(this,P),N=0;break}}this.h=N,this.o+=w},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var w=1;w<k.length-8;++w)k[w]=0;var A=8*this.o;for(w=k.length-8;w<k.length;++w)k[w]=A&255,A/=256;for(this.u(k),k=Array(16),w=A=0;4>w;++w)for(var P=0;32>P;P+=8)k[A++]=this.g[w]>>>P&255;return k};function i(k,w){var A=a;return Object.prototype.hasOwnProperty.call(A,k)?A[k]:A[k]=w(k)}function o(k,w){this.h=w;for(var A=[],P=!0,N=k.length-1;0<=N;N--){var j=k[N]|0;P&&j==w||(A[N]=j,P=!1)}this.g=A}var a={};function l(k){return-128<=k&&128>k?i(k,function(w){return new o([w|0],0>w?-1:0)}):new o([k|0],0>k?-1:0)}function c(k){if(isNaN(k)||!isFinite(k))return p;if(0>k)return T(c(-k));for(var w=[],A=1,P=0;k>=A;P++)w[P]=k/A|0,A*=4294967296;return new o(w,0)}function d(k,w){if(k.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(k.charAt(0)=="-")return T(d(k.substring(1),w));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=c(Math.pow(w,8)),P=p,N=0;N<k.length;N+=8){var j=Math.min(8,k.length-N),C=parseInt(k.substring(N,N+j),w);8>j?(j=c(Math.pow(w,j)),P=P.j(j).add(c(C))):(P=P.j(A),P=P.add(c(C)))}return P}var p=l(0),m=l(1),_=l(16777216);t=o.prototype,t.m=function(){if(I(this))return-T(this).m();for(var k=0,w=1,A=0;A<this.g.length;A++){var P=this.i(A);k+=(0<=P?P:4294967296+P)*w,w*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(y(this))return"0";if(I(this))return"-"+T(this).toString(k);for(var w=c(Math.pow(k,6)),A=this,P="";;){var N=R(A,w).g;A=x(A,N.j(w));var j=((0<A.g.length?A.g[0]:A.h)>>>0).toString(k);if(A=N,y(A))return j+P;for(;6>j.length;)j="0"+j;P=j+P}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function y(k){if(k.h!=0)return!1;for(var w=0;w<k.g.length;w++)if(k.g[w]!=0)return!1;return!0}function I(k){return k.h==-1}t.l=function(k){return k=x(this,k),I(k)?-1:y(k)?0:1};function T(k){for(var w=k.g.length,A=[],P=0;P<w;P++)A[P]=~k.g[P];return new o(A,~k.h).add(m)}t.abs=function(){return I(this)?T(this):this},t.add=function(k){for(var w=Math.max(this.g.length,k.g.length),A=[],P=0,N=0;N<=w;N++){var j=P+(this.i(N)&65535)+(k.i(N)&65535),C=(j>>>16)+(this.i(N)>>>16)+(k.i(N)>>>16);P=C>>>16,j&=65535,C&=65535,A[N]=C<<16|j}return new o(A,A[A.length-1]&-2147483648?-1:0)};function x(k,w){return k.add(T(w))}t.j=function(k){if(y(this)||y(k))return p;if(I(this))return I(k)?T(this).j(T(k)):T(T(this).j(k));if(I(k))return T(this.j(T(k)));if(0>this.l(_)&&0>k.l(_))return c(this.m()*k.m());for(var w=this.g.length+k.g.length,A=[],P=0;P<2*w;P++)A[P]=0;for(P=0;P<this.g.length;P++)for(var N=0;N<k.g.length;N++){var j=this.i(P)>>>16,C=this.i(P)&65535,yt=k.i(N)>>>16,nr=k.i(N)&65535;A[2*P+2*N]+=C*nr,v(A,2*P+2*N),A[2*P+2*N+1]+=j*nr,v(A,2*P+2*N+1),A[2*P+2*N+1]+=C*yt,v(A,2*P+2*N+1),A[2*P+2*N+2]+=j*yt,v(A,2*P+2*N+2)}for(P=0;P<w;P++)A[P]=A[2*P+1]<<16|A[2*P];for(P=w;P<2*w;P++)A[P]=0;return new o(A,0)};function v(k,w){for(;(k[w]&65535)!=k[w];)k[w+1]+=k[w]>>>16,k[w]&=65535,w++}function S(k,w){this.g=k,this.h=w}function R(k,w){if(y(w))throw Error("division by zero");if(y(k))return new S(p,p);if(I(k))return w=R(T(k),w),new S(T(w.g),T(w.h));if(I(w))return w=R(k,T(w)),new S(T(w.g),w.h);if(30<k.g.length){if(I(k)||I(w))throw Error("slowDivide_ only works with positive integers.");for(var A=m,P=w;0>=P.l(k);)A=O(A),P=O(P);var N=M(A,1),j=M(P,1);for(P=M(P,2),A=M(A,2);!y(P);){var C=j.add(P);0>=C.l(k)&&(N=N.add(A),j=C),P=M(P,1),A=M(A,1)}return w=x(k,N.j(w)),new S(N,w)}for(N=p;0<=k.l(w);){for(A=Math.max(1,Math.floor(k.m()/w.m())),P=Math.ceil(Math.log(A)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),j=c(A),C=j.j(w);I(C)||0<C.l(k);)A-=P,j=c(A),C=j.j(w);y(j)&&(j=m),N=N.add(j),k=x(k,C)}return new S(N,k)}t.A=function(k){return R(this,k).h},t.and=function(k){for(var w=Math.max(this.g.length,k.g.length),A=[],P=0;P<w;P++)A[P]=this.i(P)&k.i(P);return new o(A,this.h&k.h)},t.or=function(k){for(var w=Math.max(this.g.length,k.g.length),A=[],P=0;P<w;P++)A[P]=this.i(P)|k.i(P);return new o(A,this.h|k.h)},t.xor=function(k){for(var w=Math.max(this.g.length,k.g.length),A=[],P=0;P<w;P++)A[P]=this.i(P)^k.i(P);return new o(A,this.h^k.h)};function O(k){for(var w=k.g.length+1,A=[],P=0;P<w;P++)A[P]=k.i(P)<<1|k.i(P-1)>>>31;return new o(A,k.h)}function M(k,w){var A=w>>5;w%=32;for(var P=k.g.length-A,N=[],j=0;j<P;j++)N[j]=0<w?k.i(j+A)>>>w|k.i(j+A+1)<<32-w:k.i(j+A);return new o(N,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,TT=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,vs=o}).apply(typeof e_<"u"?e_:typeof self<"u"?self:typeof window<"u"?window:{});var $l=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ST,Do,IT,mu,$f,AT,kT,PT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,g){return u==Array.prototype||u==Object.prototype||(u[f]=g.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof $l=="object"&&$l];for(var f=0;f<u.length;++f){var g=u[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(u,f){if(f)e:{var g=r;u=u.split(".");for(var E=0;E<u.length-1;E++){var D=u[E];if(!(D in g))break e;g=g[D]}u=u[u.length-1],E=g[u],f=f(E),f!=E&&f!=null&&e(g,u,{configurable:!0,writable:!0,value:f})}}function i(u,f){u instanceof String&&(u+="");var g=0,E=!1,D={next:function(){if(!E&&g<u.length){var V=g++;return{value:f(V,u[V]),done:!1}}return E=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}s("Array.prototype.values",function(u){return u||function(){return i(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function d(u,f,g){return u.call.apply(u.bind,arguments)}function p(u,f,g){if(!u)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,E),u.apply(f,D)}}return function(){return u.apply(f,arguments)}}function m(u,f,g){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,m.apply(null,arguments)}function _(u,f){var g=Array.prototype.slice.call(arguments,1);return function(){var E=g.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function y(u,f){function g(){}g.prototype=f.prototype,u.aa=f.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(E,D,V){for(var B=Array(arguments.length-2),de=2;de<arguments.length;de++)B[de-2]=arguments[de];return f.prototype[D].apply(E,B)}}function I(u){const f=u.length;if(0<f){const g=Array(f);for(let E=0;E<f;E++)g[E]=u[E];return g}return[]}function T(u,f){for(let g=1;g<arguments.length;g++){const E=arguments[g];if(l(E)){const D=u.length||0,V=E.length||0;u.length=D+V;for(let B=0;B<V;B++)u[D+B]=E[B]}else u.push(E)}}class x{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function v(u){return/^[\s\xa0]*$/.test(u)}function S(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function R(u){return R[" "](u),u}R[" "]=function(){};var O=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function M(u,f,g){for(const E in u)f.call(g,u[E],E,u)}function k(u,f){for(const g in u)f.call(void 0,u[g],g,u)}function w(u){const f={};for(const g in u)f[g]=u[g];return f}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,f){let g,E;for(let D=1;D<arguments.length;D++){E=arguments[D];for(g in E)u[g]=E[g];for(let V=0;V<A.length;V++)g=A[V],Object.prototype.hasOwnProperty.call(E,g)&&(u[g]=E[g])}}function N(u){var f=1;u=u.split(":");const g=[];for(;0<f&&u.length;)g.push(u.shift()),f--;return u.length&&g.push(u.join(":")),g}function j(u){a.setTimeout(()=>{throw u},0)}function C(){var u=G;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class yt{constructor(){this.h=this.g=null}add(f,g){const E=nr.get();E.set(f,g),this.h?this.h.next=E:this.g=E,this.h=E}}var nr=new x(()=>new Bs,u=>u.reset());class Bs{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let me,z=!1,G=new yt,Y=()=>{const u=a.Promise.resolve(void 0);me=()=>{u.then(we)}};var we=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(g){j(g)}var f=nr;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}z=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Re(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}Re.prototype.h=function(){this.defaultPrevented=!0};var An=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return u}();function kn(u,f){if(Re.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(O){e:{try{R(f.nodeName);var D=!0;break e}catch{}D=!1}D||(f=null)}}else g=="mouseover"?f=u.fromElement:g=="mouseout"&&(f=u.toElement);this.relatedTarget=f,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Pn[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&kn.aa.h.call(this)}}y(kn,Re);var Pn={2:"touch",3:"pen",4:"mouse"};kn.prototype.h=function(){kn.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Cn="closure_listenable_"+(1e6*Math.random()|0),XA=0;function YA(u,f,g,E,D){this.listener=u,this.proxy=null,this.src=f,this.type=g,this.capture=!!E,this.ha=D,this.key=++XA,this.da=this.fa=!1}function al(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ll(u){this.src=u,this.g={},this.h=0}ll.prototype.add=function(u,f,g,E,D){var V=u.toString();u=this.g[V],u||(u=this.g[V]=[],this.h++);var B=gh(u,f,E,D);return-1<B?(f=u[B],g||(f.fa=!1)):(f=new YA(f,this.src,V,!!E,D),f.fa=g,u.push(f)),f};function mh(u,f){var g=f.type;if(g in u.g){var E=u.g[g],D=Array.prototype.indexOf.call(E,f,void 0),V;(V=0<=D)&&Array.prototype.splice.call(E,D,1),V&&(al(f),u.g[g].length==0&&(delete u.g[g],u.h--))}}function gh(u,f,g,E){for(var D=0;D<u.length;++D){var V=u[D];if(!V.da&&V.listener==f&&V.capture==!!g&&V.ha==E)return D}return-1}var yh="closure_lm_"+(1e6*Math.random()|0),vh={};function oy(u,f,g,E,D){if(Array.isArray(f)){for(var V=0;V<f.length;V++)oy(u,f[V],g,E,D);return null}return g=uy(g),u&&u[Cn]?u.K(f,g,c(E)?!!E.capture:!!E,D):JA(u,f,g,!1,E,D)}function JA(u,f,g,E,D,V){if(!f)throw Error("Invalid event type");var B=c(D)?!!D.capture:!!D,de=xh(u);if(de||(u[yh]=de=new ll(u)),g=de.add(f,g,E,B,V),g.proxy)return g;if(E=ZA(),g.proxy=E,E.src=u,E.listener=g,u.addEventListener)An||(D=B),D===void 0&&(D=!1),u.addEventListener(f.toString(),E,D);else if(u.attachEvent)u.attachEvent(ly(f.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return g}function ZA(){function u(g){return f.call(u.src,u.listener,g)}const f=ek;return u}function ay(u,f,g,E,D){if(Array.isArray(f))for(var V=0;V<f.length;V++)ay(u,f[V],g,E,D);else E=c(E)?!!E.capture:!!E,g=uy(g),u&&u[Cn]?(u=u.i,f=String(f).toString(),f in u.g&&(V=u.g[f],g=gh(V,g,E,D),-1<g&&(al(V[g]),Array.prototype.splice.call(V,g,1),V.length==0&&(delete u.g[f],u.h--)))):u&&(u=xh(u))&&(f=u.g[f.toString()],u=-1,f&&(u=gh(f,g,E,D)),(g=-1<u?f[u]:null)&&_h(g))}function _h(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[Cn])mh(f.i,u);else{var g=u.type,E=u.proxy;f.removeEventListener?f.removeEventListener(g,E,u.capture):f.detachEvent?f.detachEvent(ly(g),E):f.addListener&&f.removeListener&&f.removeListener(E),(g=xh(f))?(mh(g,u),g.h==0&&(g.src=null,f[yh]=null)):al(u)}}}function ly(u){return u in vh?vh[u]:vh[u]="on"+u}function ek(u,f){if(u.da)u=!0;else{f=new kn(f,this);var g=u.listener,E=u.ha||u.src;u.fa&&_h(u),u=g.call(E,f)}return u}function xh(u){return u=u[yh],u instanceof ll?u:null}var wh="__closure_events_fn_"+(1e9*Math.random()>>>0);function uy(u){return typeof u=="function"?u:(u[wh]||(u[wh]=function(f){return u.handleEvent(f)}),u[wh])}function nt(){he.call(this),this.i=new ll(this),this.M=this,this.F=null}y(nt,he),nt.prototype[Cn]=!0,nt.prototype.removeEventListener=function(u,f,g,E){ay(this,u,f,g,E)};function vt(u,f){var g,E=u.F;if(E)for(g=[];E;E=E.F)g.push(E);if(u=u.M,E=f.type||f,typeof f=="string")f=new Re(f,u);else if(f instanceof Re)f.target=f.target||u;else{var D=f;f=new Re(E,u),P(f,D)}if(D=!0,g)for(var V=g.length-1;0<=V;V--){var B=f.g=g[V];D=ul(B,E,!0,f)&&D}if(B=f.g=u,D=ul(B,E,!0,f)&&D,D=ul(B,E,!1,f)&&D,g)for(V=0;V<g.length;V++)B=f.g=g[V],D=ul(B,E,!1,f)&&D}nt.prototype.N=function(){if(nt.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var g=u.g[f],E=0;E<g.length;E++)al(g[E]);delete u.g[f],u.h--}}this.F=null},nt.prototype.K=function(u,f,g,E){return this.i.add(String(u),f,!1,g,E)},nt.prototype.L=function(u,f,g,E){return this.i.add(String(u),f,!0,g,E)};function ul(u,f,g,E){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var D=!0,V=0;V<f.length;++V){var B=f[V];if(B&&!B.da&&B.capture==g){var de=B.listener,He=B.ha||B.src;B.fa&&mh(u.i,B),D=de.call(He,E)!==!1&&D}}return D&&!E.defaultPrevented}function cy(u,f,g){if(typeof u=="function")g&&(u=m(u,g));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function hy(u){u.g=cy(()=>{u.g=null,u.i&&(u.i=!1,hy(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class tk extends he{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:hy(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ro(u){he.call(this),this.h=u,this.g={}}y(ro,he);var dy=[];function fy(u){M(u.g,function(f,g){this.g.hasOwnProperty(g)&&_h(f)},u),u.g={}}ro.prototype.N=function(){ro.aa.N.call(this),fy(this)},ro.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Eh=a.JSON.stringify,nk=a.JSON.parse,rk=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Th(){}Th.prototype.h=null;function py(u){return u.h||(u.h=u.i())}function my(){}var so={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Sh(){Re.call(this,"d")}y(Sh,Re);function Ih(){Re.call(this,"c")}y(Ih,Re);var ts={},gy=null;function cl(){return gy=gy||new nt}ts.La="serverreachability";function yy(u){Re.call(this,ts.La,u)}y(yy,Re);function io(u){const f=cl();vt(f,new yy(f))}ts.STAT_EVENT="statevent";function vy(u,f){Re.call(this,ts.STAT_EVENT,u),this.stat=f}y(vy,Re);function _t(u){const f=cl();vt(f,new vy(f,u))}ts.Ma="timingevent";function _y(u,f){Re.call(this,ts.Ma,u),this.size=f}y(_y,Re);function oo(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function ao(){this.g=!0}ao.prototype.xa=function(){this.g=!1};function sk(u,f,g,E,D,V){u.info(function(){if(u.g)if(V)for(var B="",de=V.split("&"),He=0;He<de.length;He++){var oe=de[He].split("=");if(1<oe.length){var rt=oe[0];oe=oe[1];var st=rt.split("_");B=2<=st.length&&st[1]=="type"?B+(rt+"="+oe+"&"):B+(rt+"=redacted&")}}else B=null;else B=V;return"XMLHTTP REQ ("+E+") [attempt "+D+"]: "+f+`
`+g+`
`+B})}function ik(u,f,g,E,D,V,B){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+D+"]: "+f+`
`+g+`
`+V+" "+B})}function zs(u,f,g,E){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+ak(u,g)+(E?" "+E:"")})}function ok(u,f){u.info(function(){return"TIMEOUT: "+f})}ao.prototype.info=function(){};function ak(u,f){if(!u.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var E=g[u];if(!(2>E.length)){var D=E[1];if(Array.isArray(D)&&!(1>D.length)){var V=D[0];if(V!="noop"&&V!="stop"&&V!="close")for(var B=1;B<D.length;B++)D[B]=""}}}}return Eh(g)}catch{return f}}var hl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ah;function dl(){}y(dl,Th),dl.prototype.g=function(){return new XMLHttpRequest},dl.prototype.i=function(){return{}},Ah=new dl;function rr(u,f,g,E){this.j=u,this.i=f,this.l=g,this.R=E||1,this.U=new ro(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new wy}function wy(){this.i=null,this.g="",this.h=!1}var Ey={},kh={};function Ph(u,f,g){u.L=1,u.v=gl(bn(f)),u.m=g,u.P=!0,Ty(u,null)}function Ty(u,f){u.F=Date.now(),fl(u),u.A=bn(u.v);var g=u.A,E=u.R;Array.isArray(E)||(E=[String(E)]),Ly(g.i,"t",E),u.C=0,g=u.j.J,u.h=new wy,u.g=tv(u.j,g?f:null,!u.m),0<u.O&&(u.M=new tk(m(u.Y,u,u.g),u.O)),f=u.U,g=u.g,E=u.ca;var D="readystatechange";Array.isArray(D)||(D&&(dy[0]=D.toString()),D=dy);for(var V=0;V<D.length;V++){var B=oy(g,D[V],E||f.handleEvent,!1,f.h||f);if(!B)break;f.g[B.key]=B}f=u.H?w(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),io(),sk(u.i,u.u,u.A,u.l,u.R,u.m)}rr.prototype.ca=function(u){u=u.target;const f=this.M;f&&Nn(u)==3?f.j():this.Y(u)},rr.prototype.Y=function(u){try{if(u==this.g)e:{const st=Nn(this.g);var f=this.g.Ba();const Ws=this.g.Z();if(!(3>st)&&(st!=3||this.g&&(this.h.h||this.g.oa()||qy(this.g)))){this.J||st!=4||f==7||(f==8||0>=Ws?io(3):io(2)),Ch(this);var g=this.g.Z();this.X=g;t:if(Sy(this)){var E=qy(this.g);u="";var D=E.length,V=Nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ns(this),lo(this);var B="";break t}this.h.i=new a.TextDecoder}for(f=0;f<D;f++)this.h.h=!0,u+=this.h.i.decode(E[f],{stream:!(V&&f==D-1)});E.length=0,this.h.g+=u,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=g==200,ik(this.i,this.u,this.A,this.l,this.R,st,g),this.o){if(this.T&&!this.K){t:{if(this.g){var de,He=this.g;if((de=He.g?He.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(de)){var oe=de;break t}}oe=null}if(g=oe)zs(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bh(this,g);else{this.o=!1,this.s=3,_t(12),ns(this),lo(this);break e}}if(this.P){g=!0;let Jt;for(;!this.J&&this.C<B.length;)if(Jt=lk(this,B),Jt==kh){st==4&&(this.s=4,_t(14),g=!1),zs(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==Ey){this.s=4,_t(15),zs(this.i,this.l,B,"[Invalid Chunk]"),g=!1;break}else zs(this.i,this.l,Jt,null),bh(this,Jt);if(Sy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||B.length!=0||this.h.h||(this.s=1,_t(16),g=!1),this.o=this.o&&g,!g)zs(this.i,this.l,B,"[Invalid Chunked Response]"),ns(this),lo(this);else if(0<B.length&&!this.W){this.W=!0;var rt=this.j;rt.g==this&&rt.ba&&!rt.M&&(rt.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Oh(rt),rt.M=!0,_t(11))}}else zs(this.i,this.l,B,null),bh(this,B);st==4&&ns(this),this.o&&!this.J&&(st==4?Yy(this.j,this):(this.o=!1,fl(this)))}else Ik(this.g),g==400&&0<B.indexOf("Unknown SID")?(this.s=3,_t(12)):(this.s=0,_t(13)),ns(this),lo(this)}}}catch{}finally{}};function Sy(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function lk(u,f){var g=u.C,E=f.indexOf(`
`,g);return E==-1?kh:(g=Number(f.substring(g,E)),isNaN(g)?Ey:(E+=1,E+g>f.length?kh:(f=f.slice(E,E+g),u.C=E+g,f)))}rr.prototype.cancel=function(){this.J=!0,ns(this)};function fl(u){u.S=Date.now()+u.I,Iy(u,u.I)}function Iy(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=oo(m(u.ba,u),f)}function Ch(u){u.B&&(a.clearTimeout(u.B),u.B=null)}rr.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ok(this.i,this.A),this.L!=2&&(io(),_t(17)),ns(this),this.s=2,lo(this)):Iy(this,this.S-u)};function lo(u){u.j.G==0||u.J||Yy(u.j,u)}function ns(u){Ch(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,fy(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function bh(u,f){try{var g=u.j;if(g.G!=0&&(g.g==u||Nh(g.h,u))){if(!u.K&&Nh(g.h,u)&&g.G==3){try{var E=g.Da.g.parse(f)}catch{E=null}if(Array.isArray(E)&&E.length==3){var D=E;if(D[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)El(g),xl(g);else break e;Vh(g),_t(18)}}else g.za=D[1],0<g.za-g.T&&37500>D[2]&&g.F&&g.v==0&&!g.C&&(g.C=oo(m(g.Za,g),6e3));if(1>=Py(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else ss(g,11)}else if((u.K||g.g==u)&&El(g),!v(f))for(D=g.Da.g.parse(f),f=0;f<D.length;f++){let oe=D[f];if(g.T=oe[0],oe=oe[1],g.G==2)if(oe[0]=="c"){g.K=oe[1],g.ia=oe[2];const rt=oe[3];rt!=null&&(g.la=rt,g.j.info("VER="+g.la));const st=oe[4];st!=null&&(g.Aa=st,g.j.info("SVER="+g.Aa));const Ws=oe[5];Ws!=null&&typeof Ws=="number"&&0<Ws&&(E=1.5*Ws,g.L=E,g.j.info("backChannelRequestTimeoutMs_="+E)),E=g;const Jt=u.g;if(Jt){const Sl=Jt.g?Jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sl){var V=E.h;V.g||Sl.indexOf("spdy")==-1&&Sl.indexOf("quic")==-1&&Sl.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Rh(V,V.h),V.h=null))}if(E.D){const Lh=Jt.g?Jt.g.getResponseHeader("X-HTTP-Session-Id"):null;Lh&&(E.ya=Lh,ge(E.I,E.D,Lh))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),E=g;var B=u;if(E.qa=ev(E,E.J?E.ia:null,E.W),B.K){Cy(E.h,B);var de=B,He=E.L;He&&(de.I=He),de.B&&(Ch(de),fl(de)),E.g=B}else Qy(E);0<g.i.length&&wl(g)}else oe[0]!="stop"&&oe[0]!="close"||ss(g,7);else g.G==3&&(oe[0]=="stop"||oe[0]=="close"?oe[0]=="stop"?ss(g,7):Dh(g):oe[0]!="noop"&&g.l&&g.l.ta(oe),g.v=0)}}io(4)}catch{}}var uk=class{constructor(u,f){this.g=u,this.map=f}};function Ay(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ky(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Py(u){return u.h?1:u.g?u.g.size:0}function Nh(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Rh(u,f){u.g?u.g.add(f):u.h=f}function Cy(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}Ay.prototype.cancel=function(){if(this.i=by(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function by(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const g of u.g.values())f=f.concat(g.D);return f}return I(u.i)}function ck(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],g=u.length,E=0;E<g;E++)f.push(u[E]);return f}f=[],g=0;for(E in u)f[g++]=u[E];return f}function hk(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var g=0;g<u;g++)f.push(g);return f}f=[],g=0;for(const E in u)f[g++]=E;return f}}}function Ny(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var g=hk(u),E=ck(u),D=E.length,V=0;V<D;V++)f.call(void 0,E[V],g&&g[V],u)}var Ry=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dk(u,f){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var E=u[g].indexOf("="),D=null;if(0<=E){var V=u[g].substring(0,E);D=u[g].substring(E+1)}else V=u[g];f(V,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function rs(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof rs){this.h=u.h,pl(this,u.j),this.o=u.o,this.g=u.g,ml(this,u.s),this.l=u.l;var f=u.i,g=new ho;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),jy(this,g),this.m=u.m}else u&&(f=String(u).match(Ry))?(this.h=!1,pl(this,f[1]||"",!0),this.o=uo(f[2]||""),this.g=uo(f[3]||"",!0),ml(this,f[4]),this.l=uo(f[5]||"",!0),jy(this,f[6]||"",!0),this.m=uo(f[7]||"")):(this.h=!1,this.i=new ho(null,this.h))}rs.prototype.toString=function(){var u=[],f=this.j;f&&u.push(co(f,Dy,!0),":");var g=this.g;return(g||f=="file")&&(u.push("//"),(f=this.o)&&u.push(co(f,Dy,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(co(g,g.charAt(0)=="/"?mk:pk,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",co(g,yk)),u.join("")};function bn(u){return new rs(u)}function pl(u,f,g){u.j=g?uo(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function ml(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function jy(u,f,g){f instanceof ho?(u.i=f,vk(u.i,u.h)):(g||(f=co(f,gk)),u.i=new ho(f,u.h))}function ge(u,f,g){u.i.set(f,g)}function gl(u){return ge(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function uo(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function co(u,f,g){return typeof u=="string"?(u=encodeURI(u).replace(f,fk),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function fk(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Dy=/[#\/\?@]/g,pk=/[#\?:]/g,mk=/[#\?]/g,gk=/[#\?@]/g,yk=/#/g;function ho(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function sr(u){u.g||(u.g=new Map,u.h=0,u.i&&dk(u.i,function(f,g){u.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=ho.prototype,t.add=function(u,f){sr(this),this.i=null,u=$s(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(f),this.h+=1,this};function Vy(u,f){sr(u),f=$s(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function Oy(u,f){return sr(u),f=$s(u,f),u.g.has(f)}t.forEach=function(u,f){sr(this),this.g.forEach(function(g,E){g.forEach(function(D){u.call(f,D,E,this)},this)},this)},t.na=function(){sr(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let E=0;E<f.length;E++){const D=u[E];for(let V=0;V<D.length;V++)g.push(f[E])}return g},t.V=function(u){sr(this);let f=[];if(typeof u=="string")Oy(this,u)&&(f=f.concat(this.g.get($s(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)f=f.concat(u[g])}return f},t.set=function(u,f){return sr(this),this.i=null,u=$s(this,u),Oy(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function Ly(u,f,g){Vy(u,f),0<g.length&&(u.i=null,u.g.set($s(u,f),I(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var E=f[g];const V=encodeURIComponent(String(E)),B=this.V(E);for(E=0;E<B.length;E++){var D=V;B[E]!==""&&(D+="="+encodeURIComponent(String(B[E]))),u.push(D)}}return this.i=u.join("&")};function $s(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function vk(u,f){f&&!u.j&&(sr(u),u.i=null,u.g.forEach(function(g,E){var D=E.toLowerCase();E!=D&&(Vy(this,E),Ly(this,D,g))},u)),u.j=f}function _k(u,f){const g=new ao;if(a.Image){const E=new Image;E.onload=_(ir,g,"TestLoadImage: loaded",!0,f,E),E.onerror=_(ir,g,"TestLoadImage: error",!1,f,E),E.onabort=_(ir,g,"TestLoadImage: abort",!1,f,E),E.ontimeout=_(ir,g,"TestLoadImage: timeout",!1,f,E),a.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else f(!1)}function xk(u,f){const g=new ao,E=new AbortController,D=setTimeout(()=>{E.abort(),ir(g,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:E.signal}).then(V=>{clearTimeout(D),V.ok?ir(g,"TestPingServer: ok",!0,f):ir(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(D),ir(g,"TestPingServer: error",!1,f)})}function ir(u,f,g,E,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),E(g)}catch{}}function wk(){this.g=new rk}function Ek(u,f,g){const E=g||"";try{Ny(u,function(D,V){let B=D;c(D)&&(B=Eh(D)),f.push(E+V+"="+encodeURIComponent(B))})}catch(D){throw f.push(E+"type="+encodeURIComponent("_badmap")),D}}function yl(u){this.l=u.Ub||null,this.j=u.eb||!1}y(yl,Th),yl.prototype.g=function(){return new vl(this.l,this.j)},yl.prototype.i=function(u){return function(){return u}}({});function vl(u,f){nt.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(vl,nt),t=vl.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,po(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fo(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,po(this)),this.g&&(this.readyState=3,po(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;My(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function My(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?fo(this):po(this),this.readyState==3&&My(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,fo(this))},t.Qa=function(u){this.g&&(this.response=u,fo(this))},t.ga=function(){this.g&&fo(this)};function fo(u){u.readyState=4,u.l=null,u.j=null,u.v=null,po(u)}t.setRequestHeader=function(u,f){this.u.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=f.next();return u.join(`\r
`)};function po(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(vl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Fy(u){let f="";return M(u,function(g,E){f+=E,f+=":",f+=g,f+=`\r
`}),f}function jh(u,f,g){e:{for(E in g){var E=!1;break e}E=!0}E||(g=Fy(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):ge(u,f,g))}function ke(u){nt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(ke,nt);var Tk=/^https?$/i,Sk=["POST","PUT"];t=ke.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,f,g,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ah.g(),this.v=this.o?py(this.o):py(Ah),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(V){Uy(this,V);return}if(u=g||"",g=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var D in E)g.set(D,E[D]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const V of E.keys())g.set(V,E.get(V));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(g.keys()).find(V=>V.toLowerCase()=="content-type"),D=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Sk,f,void 0))||E||D||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,B]of g)this.g.setRequestHeader(V,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$y(this),this.u=!0,this.g.send(u),this.u=!1}catch(V){Uy(this,V)}};function Uy(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,By(u),_l(u)}function By(u){u.A||(u.A=!0,vt(u,"complete"),vt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,vt(this,"complete"),vt(this,"abort"),_l(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_l(this,!0)),ke.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?zy(this):this.bb())},t.bb=function(){zy(this)};function zy(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Nn(u)!=4||u.Z()!=2)){if(u.u&&Nn(u)==4)cy(u.Ea,0,u);else if(vt(u,"readystatechange"),Nn(u)==4){u.h=!1;try{const B=u.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var E;if(E=B===0){var D=String(u.D).match(Ry)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),E=!Tk.test(D?D.toLowerCase():"")}g=E}if(g)vt(u,"complete"),vt(u,"success");else{u.m=6;try{var V=2<Nn(u)?u.g.statusText:""}catch{V=""}u.l=V+" ["+u.Z()+"]",By(u)}}finally{_l(u)}}}}function _l(u,f){if(u.g){$y(u);const g=u.g,E=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||vt(u,"ready");try{g.onreadystatechange=E}catch{}}}function $y(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Nn(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Nn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),nk(f)}};function qy(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ik(u){const f={};u=(u.g&&2<=Nn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(v(u[E]))continue;var g=N(u[E]);const D=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const V=f[D]||[];f[D]=V,V.push(g)}k(f,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function mo(u,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||f}function Wy(u){this.Aa=0,this.i=[],this.j=new ao,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=mo("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=mo("baseRetryDelayMs",5e3,u),this.cb=mo("retryDelaySeedMs",1e4,u),this.Wa=mo("forwardChannelMaxRetries",2,u),this.wa=mo("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ay(u&&u.concurrentRequestLimit),this.Da=new wk,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Wy.prototype,t.la=8,t.G=1,t.connect=function(u,f,g,E){_t(0),this.W=u,this.H=f||{},g&&E!==void 0&&(this.H.OSID=g,this.H.OAID=E),this.F=this.X,this.I=ev(this,null,this.W),wl(this)};function Dh(u){if(Hy(u),u.G==3){var f=u.U++,g=bn(u.I);if(ge(g,"SID",u.K),ge(g,"RID",f),ge(g,"TYPE","terminate"),go(u,g),f=new rr(u,u.j,f),f.L=2,f.v=gl(bn(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=tv(f.j,null),f.g.ea(f.v)),f.F=Date.now(),fl(f)}Zy(u)}function xl(u){u.g&&(Oh(u),u.g.cancel(),u.g=null)}function Hy(u){xl(u),u.u&&(a.clearTimeout(u.u),u.u=null),El(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function wl(u){if(!ky(u.h)&&!u.s){u.s=!0;var f=u.Ga;me||Y(),z||(me(),z=!0),G.add(f,u),u.B=0}}function Ak(u,f){return Py(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=oo(m(u.Ga,u,f),Jy(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const D=new rr(this,this.j,u);let V=this.o;if(this.S&&(V?(V=w(V),P(V,this.S)):V=this.S),this.m!==null||this.O||(D.H=V,V=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var E=this.i[g];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(f+=E,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Gy(this,D,f),g=bn(this.I),ge(g,"RID",u),ge(g,"CVER",22),this.D&&ge(g,"X-HTTP-Session-Id",this.D),go(this,g),V&&(this.O?f="headers="+encodeURIComponent(String(Fy(V)))+"&"+f:this.m&&jh(g,this.m,V)),Rh(this.h,D),this.Ua&&ge(g,"TYPE","init"),this.P?(ge(g,"$req",f),ge(g,"SID","null"),D.T=!0,Ph(D,g,null)):Ph(D,g,f),this.G=2}}else this.G==3&&(u?Ky(this,u):this.i.length==0||ky(this.h)||Ky(this))};function Ky(u,f){var g;f?g=f.l:g=u.U++;const E=bn(u.I);ge(E,"SID",u.K),ge(E,"RID",g),ge(E,"AID",u.T),go(u,E),u.m&&u.o&&jh(E,u.m,u.o),g=new rr(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),f&&(u.i=f.D.concat(u.i)),f=Gy(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Rh(u.h,g),Ph(g,E,f)}function go(u,f){u.H&&M(u.H,function(g,E){ge(f,E,g)}),u.l&&Ny({},function(g,E){ge(f,E,g)})}function Gy(u,f,g){g=Math.min(u.i.length,g);var E=u.l?m(u.l.Na,u.l,u):null;e:{var D=u.i;let V=-1;for(;;){const B=["count="+g];V==-1?0<g?(V=D[0].g,B.push("ofs="+V)):V=0:B.push("ofs="+V);let de=!0;for(let He=0;He<g;He++){let oe=D[He].g;const rt=D[He].map;if(oe-=V,0>oe)V=Math.max(0,D[He].g-100),de=!1;else try{Ek(rt,B,"req"+oe+"_")}catch{E&&E(rt)}}if(de){E=B.join("&");break e}}}return u=u.i.splice(0,g),f.D=u,E}function Qy(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;me||Y(),z||(me(),z=!0),G.add(f,u),u.v=0}}function Vh(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=oo(m(u.Fa,u),Jy(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Xy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=oo(m(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_t(10),xl(this),Xy(this))};function Oh(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Xy(u){u.g=new rr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=bn(u.qa);ge(f,"RID","rpc"),ge(f,"SID",u.K),ge(f,"AID",u.T),ge(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&ge(f,"TO",u.ja),ge(f,"TYPE","xmlhttp"),go(u,f),u.m&&u.o&&jh(f,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=gl(bn(f)),g.m=null,g.P=!0,Ty(g,u)}t.Za=function(){this.C!=null&&(this.C=null,xl(this),Vh(this),_t(19))};function El(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Yy(u,f){var g=null;if(u.g==f){El(u),Oh(u),u.g=null;var E=2}else if(Nh(u.h,f))g=f.D,Cy(u.h,f),E=1;else return;if(u.G!=0){if(f.o)if(E==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var D=u.B;E=cl(),vt(E,new _y(E,g)),wl(u)}else Qy(u);else if(D=f.s,D==3||D==0&&0<f.X||!(E==1&&Ak(u,f)||E==2&&Vh(u)))switch(g&&0<g.length&&(f=u.h,f.i=f.i.concat(g)),D){case 1:ss(u,5);break;case 4:ss(u,10);break;case 3:ss(u,6);break;default:ss(u,2)}}}function Jy(u,f){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*f}function ss(u,f){if(u.j.info("Error code "+f),f==2){var g=m(u.fb,u),E=u.Xa;const D=!E;E=new rs(E||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||pl(E,"https"),gl(E),D?_k(E.toString(),g):xk(E.toString(),g)}else _t(2);u.G=0,u.l&&u.l.sa(f),Zy(u),Hy(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function Zy(u){if(u.G=0,u.ka=[],u.l){const f=by(u.h);(f.length!=0||u.i.length!=0)&&(T(u.ka,f),T(u.ka,u.i),u.h.i.length=0,I(u.i),u.i.length=0),u.l.ra()}}function ev(u,f,g){var E=g instanceof rs?bn(g):new rs(g);if(E.g!="")f&&(E.g=f+"."+E.g),ml(E,E.s);else{var D=a.location;E=D.protocol,f=f?f+"."+D.hostname:D.hostname,D=+D.port;var V=new rs(null);E&&pl(V,E),f&&(V.g=f),D&&ml(V,D),g&&(V.l=g),E=V}return g=u.D,f=u.ya,g&&f&&ge(E,g,f),ge(E,"VER",u.la),go(u,E),E}function tv(u,f,g){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new ke(new yl({eb:g})):new ke(u.pa),f.Ha(u.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function nv(){}t=nv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Tl(){}Tl.prototype.g=function(u,f){return new Rt(u,f)};function Rt(u,f){nt.call(this),this.g=new Wy(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!v(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!v(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new qs(this)}y(Rt,nt),Rt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rt.prototype.close=function(){Dh(this.g)},Rt.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=Eh(u),u=g);f.i.push(new uk(f.Ya++,u)),f.G==3&&wl(f)},Rt.prototype.N=function(){this.g.l=null,delete this.j,Dh(this.g),delete this.g,Rt.aa.N.call(this)};function rv(u){Sh.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const g in f){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}y(rv,Sh);function sv(){Ih.call(this),this.status=1}y(sv,Ih);function qs(u){this.g=u}y(qs,nv),qs.prototype.ua=function(){vt(this.g,"a")},qs.prototype.ta=function(u){vt(this.g,new rv(u))},qs.prototype.sa=function(u){vt(this.g,new sv)},qs.prototype.ra=function(){vt(this.g,"b")},Tl.prototype.createWebChannel=Tl.prototype.g,Rt.prototype.send=Rt.prototype.o,Rt.prototype.open=Rt.prototype.m,Rt.prototype.close=Rt.prototype.close,PT=function(){return new Tl},kT=function(){return cl()},AT=ts,$f={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},hl.NO_ERROR=0,hl.TIMEOUT=8,hl.HTTP_ERROR=6,mu=hl,xy.COMPLETE="complete",IT=xy,my.EventType=so,so.OPEN="a",so.CLOSE="b",so.ERROR="c",so.MESSAGE="d",nt.prototype.listen=nt.prototype.K,Do=my,ke.prototype.listenOnce=ke.prototype.L,ke.prototype.getLastError=ke.prototype.Ka,ke.prototype.getLastErrorCode=ke.prototype.Ba,ke.prototype.getStatus=ke.prototype.Z,ke.prototype.getResponseJson=ke.prototype.Oa,ke.prototype.getResponseText=ke.prototype.oa,ke.prototype.send=ke.prototype.ea,ke.prototype.setWithCredentials=ke.prototype.Ha,ST=ke}).apply(typeof $l<"u"?$l:typeof self<"u"?self:typeof window<"u"?window:{});const t_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ut=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ut.UNAUTHENTICATED=new ut(null),ut.GOOGLE_CREDENTIALS=new ut("google-credentials-uid"),ut.FIRST_PARTY=new ut("first-party-uid"),ut.MOCK_USER=new ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=new _m("@firebase/firestore");function Io(){return Ps.logLevel}function W(t,...e){if(Ps.logLevel<=re.DEBUG){const n=e.map(Nm);Ps.debug(`Firestore (${Yi}): ${t}`,...n)}}function Jn(t,...e){if(Ps.logLevel<=re.ERROR){const n=e.map(Nm);Ps.error(`Firestore (${Yi}): ${t}`,...n)}}function Ri(t,...e){if(Ps.logLevel<=re.WARN){const n=e.map(Nm);Ps.warn(`Firestore (${Yi}): ${t}`,...n)}}function Nm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t="Unexpected state"){const e=`FIRESTORE (${Yi}) INTERNAL ASSERTION FAILED: `+t;throw Jn(e),new Error(e)}function ue(t,e){t||X()}function Z(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends In{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Xj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ut.UNAUTHENTICATED))}shutdown(){}}class Yj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Jj{constructor(e){this.t=e,this.currentUser=ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ue(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Dr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Dr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Dr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ue(typeof r.accessToken=="string"),new CT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ue(e===null||typeof e=="string"),new ut(e)}}class Zj{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ut.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class eD{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Zj(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nD{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ue(this.o===void 0);const r=i=>{i.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ue(typeof n.token=="string"),this.R=n.token,new tD(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=rD(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ae(t,e){return t<e?-1:t>e?1:0}function ji(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new q(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ze.fromMillis(Date.now())}static fromDate(e){return ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ze(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.timestamp=e}static fromTimestamp(e){return new J(e)}static min(){return new J(new ze(0,0))}static max(){return new J(new ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,n,r){n===void 0?n=0:n>e.length&&X(),r===void 0?r=e.length-n:r>e.length-n&&X(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ia.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ia?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ve extends Ia{construct(e,n,r){return new ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ve(n)}static emptyPath(){return new ve([])}}const sD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ye extends Ia{construct(e,n,r){return new Ye(e,n,r)}static isValidIdentifier(e){return sD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ye.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ye(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new q(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new q(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new q(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new q(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ye(n)}static emptyPath(){return new Ye([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.path=e}static fromPath(e){return new H(ve.fromString(e))}static fromName(e){return new H(ve.fromString(e).popFirst(5))}static empty(){return new H(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new H(new ve(e.slice()))}}function iD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=J.fromTimestamp(r===1e9?new ze(n+1,0):new ze(n,r));return new Ur(s,H.empty(),e)}function oD(t){return new Ur(t.readTime,t.key,-1)}class Ur{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ur(J.min(),H.empty(),-1)}static max(){return new Ur(J.max(),H.empty(),-1)}}function aD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=H.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==lD)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function cD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Qa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Rm.oe=-1;function Wc(t){return t==null}function rc(t){return t===0&&1/t==-1/0}function hD(t){return typeof t=="number"&&Number.isInteger(t)&&!rc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ls(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function NT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e,n){this.comparator=e,this.root=n||Qe.EMPTY}insert(e,n){return new Ae(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Qe.BLACK,null,null))}remove(e){return new Ae(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qe.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ql(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ql(this.root,e,this.comparator,!1)}getReverseIterator(){return new ql(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ql(this.root,e,this.comparator,!0)}}class ql{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qe{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Qe.RED,this.left=s??Qe.EMPTY,this.right=i??Qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Qe(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Qe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Qe.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();const e=this.left.check();if(e!==this.right.check())throw X();return e+(this.isRed()?0:1)}}Qe.EMPTY=null,Qe.RED=!0,Qe.BLACK=!1;Qe.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Qe(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.comparator=e,this.data=new Ae(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new r_(this.data.getIterator())}getIteratorFrom(e){return new r_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ze(this.comparator);return n.data=e,n}}class r_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.fields=e,e.sort(Ye.comparator)}static empty(){return new Vt([])}unionWith(e){let n=new Ze(Ye.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Vt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ji(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new RT("Invalid base64 string: "+i):i}}(e);return new tt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new tt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tt.EMPTY_BYTE_STRING=new tt("");const dD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Br(t){if(ue(!!t),typeof t=="string"){let e=0;const n=dD.exec(t);if(ue(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:De(t.seconds),nanos:De(t.nanos)}}function De(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Cs(t){return typeof t=="string"?tt.fromBase64String(t):tt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Dm(t){const e=t.mapValue.fields.__previous_value__;return jm(e)?Dm(e):e}function Aa(t){const e=Br(t.mapValue.fields.__local_write_time__.timestampValue);return new ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class ka{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ka("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ka&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function bs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?jm(t)?4:mD(t)?9007199254740991:pD(t)?10:11:X()}function Sn(t,e){if(t===e)return!0;const n=bs(t);if(n!==bs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Aa(t).isEqual(Aa(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Br(s.timestampValue),a=Br(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Cs(s.bytesValue).isEqual(Cs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return De(s.geoPointValue.latitude)===De(i.geoPointValue.latitude)&&De(s.geoPointValue.longitude)===De(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return De(s.integerValue)===De(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=De(s.doubleValue),a=De(i.doubleValue);return o===a?rc(o)===rc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ji(t.arrayValue.values||[],e.arrayValue.values||[],Sn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(n_(o)!==n_(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Sn(o[l],a[l])))return!1;return!0}(t,e);default:return X()}}function Pa(t,e){return(t.values||[]).find(n=>Sn(n,e))!==void 0}function Di(t,e){if(t===e)return 0;const n=bs(t),r=bs(e);if(n!==r)return ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=De(i.integerValue||i.doubleValue),l=De(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return s_(t.timestampValue,e.timestampValue);case 4:return s_(Aa(t),Aa(e));case 5:return ae(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Cs(i),l=Cs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=ae(a[c],l[c]);if(d!==0)return d}return ae(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=ae(De(i.latitude),De(o.latitude));return a!==0?a:ae(De(i.longitude),De(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return i_(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,d;const p=i.fields||{},m=o.fields||{},_=(a=p.value)===null||a===void 0?void 0:a.arrayValue,y=(l=m.value)===null||l===void 0?void 0:l.arrayValue,I=ae(((c=_==null?void 0:_.values)===null||c===void 0?void 0:c.length)||0,((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0);return I!==0?I:i_(_,y)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Wl.mapValue&&o===Wl.mapValue)return 0;if(i===Wl.mapValue)return 1;if(o===Wl.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let p=0;p<l.length&&p<d.length;++p){const m=ae(l[p],d[p]);if(m!==0)return m;const _=Di(a[l[p]],c[d[p]]);if(_!==0)return _}return ae(l.length,d.length)}(t.mapValue,e.mapValue);default:throw X()}}function s_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);const n=Br(t),r=Br(e),s=ae(n.seconds,r.seconds);return s!==0?s:ae(n.nanos,r.nanos)}function i_(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Di(n[s],r[s]);if(i)return i}return ae(n.length,r.length)}function Vi(t){return qf(t)}function qf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Br(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Cs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return H.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=qf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${qf(n.fields[o])}`;return s+"}"}(t.mapValue):X()}function o_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Wf(t){return!!t&&"integerValue"in t}function Vm(t){return!!t&&"arrayValue"in t}function a_(t){return!!t&&"nullValue"in t}function l_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function gu(t){return!!t&&"mapValue"in t}function pD(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Qo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ls(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Qo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Qo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function mD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.value=e}static empty(){return new kt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!gu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qo(n)}setAll(e){let n=Ye.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Qo(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());gu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Sn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];gu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ls(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new kt(Qo(this.value))}}function jT(t){const e=[];return Ls(t.fields,(n,r)=>{const s=new Ye([n]);if(gu(r)){const i=jT(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Vt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ht(e,0,J.min(),J.min(),J.min(),kt.empty(),0)}static newFoundDocument(e,n,r,s){return new ht(e,1,n,J.min(),r,s,0)}static newNoDocument(e,n){return new ht(e,2,n,J.min(),J.min(),kt.empty(),0)}static newUnknownDocument(e,n){return new ht(e,3,n,J.min(),J.min(),kt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,n){this.position=e,this.inclusive=n}}function u_(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=H.comparator(H.fromName(o.referenceValue),n.key):r=Di(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function c_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Sn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,n="asc"){this.field=e,this.dir=n}}function gD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DT=class{};class Fe extends DT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new vD(e,n,r):n==="array-contains"?new wD(e,r):n==="in"?new ED(e,r):n==="not-in"?new TD(e,r):n==="array-contains-any"?new SD(e,r):new Fe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new _D(e,r):new xD(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Di(n,this.value)):n!==null&&bs(this.value)===bs(n)&&this.matchesComparison(Di(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class un extends DT{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new un(e,n)}matches(e){return VT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function VT(t){return t.op==="and"}function OT(t){return yD(t)&&VT(t)}function yD(t){for(const e of t.filters)if(e instanceof un)return!1;return!0}function Hf(t){if(t instanceof Fe)return t.field.canonicalString()+t.op.toString()+Vi(t.value);if(OT(t))return t.filters.map(e=>Hf(e)).join(",");{const e=t.filters.map(n=>Hf(n)).join(",");return`${t.op}(${e})`}}function LT(t,e){return t instanceof Fe?function(r,s){return s instanceof Fe&&r.op===s.op&&r.field.isEqual(s.field)&&Sn(r.value,s.value)}(t,e):t instanceof un?function(r,s){return s instanceof un&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&LT(o,s.filters[a]),!0):!1}(t,e):void X()}function MT(t){return t instanceof Fe?function(n){return`${n.field.canonicalString()} ${n.op} ${Vi(n.value)}`}(t):t instanceof un?function(n){return n.op.toString()+" {"+n.getFilters().map(MT).join(" ,")+"}"}(t):"Filter"}class vD extends Fe{constructor(e,n,r){super(e,n,r),this.key=H.fromName(r.referenceValue)}matches(e){const n=H.comparator(e.key,this.key);return this.matchesComparison(n)}}class _D extends Fe{constructor(e,n){super(e,"in",n),this.keys=FT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class xD extends Fe{constructor(e,n){super(e,"not-in",n),this.keys=FT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function FT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>H.fromName(r.referenceValue))}class wD extends Fe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Vm(n)&&Pa(n.arrayValue,this.value)}}class ED extends Fe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Pa(this.value.arrayValue,n)}}class TD extends Fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Pa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Pa(this.value.arrayValue,n)}}class SD extends Fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Vm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Pa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function h_(t,e=null,n=[],r=[],s=null,i=null,o=null){return new ID(t,e,n,r,s,i,o)}function Om(t){const e=Z(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Hf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Wc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Vi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Vi(r)).join(",")),e.ue=n}return e.ue}function Lm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!gD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!LT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!c_(t.startAt,e.startAt)&&c_(t.endAt,e.endAt)}function Kf(t){return H.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function AD(t,e,n,r,s,i,o,a){return new Ji(t,e,n,r,s,i,o,a)}function UT(t){return new Ji(t)}function d_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function BT(t){return t.collectionGroup!==null}function Xo(t){const e=Z(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ze(Ye.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Ca(i,r))}),n.has(Ye.keyField().canonicalString())||e.ce.push(new Ca(Ye.keyField(),r))}return e.ce}function _n(t){const e=Z(t);return e.le||(e.le=kD(e,Xo(t))),e.le}function kD(t,e){if(t.limitType==="F")return h_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ca(s.field,i)});const n=t.endAt?new sc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new sc(t.startAt.position,t.startAt.inclusive):null;return h_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Gf(t,e){const n=t.filters.concat([e]);return new Ji(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ic(t,e,n){return new Ji(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hc(t,e){return Lm(_n(t),_n(e))&&t.limitType===e.limitType}function zT(t){return`${Om(_n(t))}|lt:${t.limitType}`}function Ks(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>MT(s)).join(", ")}]`),Wc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Vi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Vi(s)).join(",")),`Target(${r})`}(_n(t))}; limitType=${t.limitType})`}function Kc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):H.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Xo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=u_(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Xo(r),s)||r.endAt&&!function(o,a,l){const c=u_(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Xo(r),s))}(t,e)}function PD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function $T(t){return(e,n)=>{let r=!1;for(const s of Xo(t)){const i=CD(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function CD(t,e,n){const r=t.field.isKeyField()?H.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Di(l,c):X()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return X()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ls(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return NT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD=new Ae(H.comparator);function Zn(){return bD}const qT=new Ae(H.comparator);function Vo(...t){let e=qT;for(const n of t)e=e.insert(n.key,n);return e}function WT(t){let e=qT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ps(){return Yo()}function HT(){return Yo()}function Yo(){return new Zi(t=>t.toString(),(t,e)=>t.isEqual(e))}const ND=new Ae(H.comparator),RD=new Ze(H.comparator);function ne(...t){let e=RD;for(const n of t)e=e.add(n);return e}const jD=new Ze(ae);function DD(){return jD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rc(e)?"-0":e}}function KT(t){return{integerValue:""+t}}function VD(t,e){return hD(e)?KT(e):Mm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(){this._=void 0}}function OD(t,e,n){return t instanceof ba?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&jm(i)&&(i=Dm(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Na?QT(t,e):t instanceof Ra?XT(t,e):function(s,i){const o=GT(s,i),a=f_(o)+f_(s.Pe);return Wf(o)&&Wf(s.Pe)?KT(a):Mm(s.serializer,a)}(t,e)}function LD(t,e,n){return t instanceof Na?QT(t,e):t instanceof Ra?XT(t,e):n}function GT(t,e){return t instanceof oc?function(r){return Wf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class ba extends Gc{}class Na extends Gc{constructor(e){super(),this.elements=e}}function QT(t,e){const n=YT(e);for(const r of t.elements)n.some(s=>Sn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ra extends Gc{constructor(e){super(),this.elements=e}}function XT(t,e){let n=YT(e);for(const r of t.elements)n=n.filter(s=>!Sn(s,r));return{arrayValue:{values:n}}}class oc extends Gc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function f_(t){return De(t.integerValue||t.doubleValue)}function YT(t){return Vm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,n){this.field=e,this.transform=n}}function FD(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Na&&s instanceof Na||r instanceof Ra&&s instanceof Ra?ji(r.elements,s.elements,Sn):r instanceof oc&&s instanceof oc?Sn(r.Pe,s.Pe):r instanceof ba&&s instanceof ba}(t.transform,e.transform)}class UD{constructor(e,n){this.version=e,this.transformResults=n}}class on{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Qc{}function JT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Fm(t.key,on.none()):new Xa(t.key,t.data,on.none());{const n=t.data,r=kt.empty();let s=new Ze(Ye.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Jr(t.key,r,new Vt(s.toArray()),on.none())}}function BD(t,e,n){t instanceof Xa?function(s,i,o){const a=s.value.clone(),l=m_(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Jr?function(s,i,o){if(!yu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=m_(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(ZT(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Jo(t,e,n,r){return t instanceof Xa?function(i,o,a,l){if(!yu(i.precondition,o))return a;const c=i.value.clone(),d=g_(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Jr?function(i,o,a,l){if(!yu(i.precondition,o))return a;const c=g_(i.fieldTransforms,l,o),d=o.data;return d.setAll(ZT(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,a){return yu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function zD(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=GT(r.transform,s||null);i!=null&&(n===null&&(n=kt.empty()),n.set(r.field,i))}return n||null}function p_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ji(r,s,(i,o)=>FD(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Xa extends Qc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Jr extends Qc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ZT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function m_(t,e,n){const r=new Map;ue(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,LD(o,a,n[s]))}return r}function g_(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,OD(i,o,e))}return r}class Fm extends Qc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $D extends Qc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&BD(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Jo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Jo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=HT();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=JT(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ne())}isEqual(e){return this.batchId===e.batchId&&ji(this.mutations,e.mutations,(n,r)=>p_(n,r))&&ji(this.baseMutations,e.baseMutations,(n,r)=>p_(n,r))}}class Um{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ue(e.mutations.length===r.length);let s=function(){return ND}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Um(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le,se;function KD(t){switch(t){default:return X();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function eS(t){if(t===void 0)return Jn("GRPC error has no .code"),L.UNKNOWN;switch(t){case Le.OK:return L.OK;case Le.CANCELLED:return L.CANCELLED;case Le.UNKNOWN:return L.UNKNOWN;case Le.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Le.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Le.INTERNAL:return L.INTERNAL;case Le.UNAVAILABLE:return L.UNAVAILABLE;case Le.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Le.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Le.NOT_FOUND:return L.NOT_FOUND;case Le.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Le.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Le.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Le.ABORTED:return L.ABORTED;case Le.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Le.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Le.DATA_LOSS:return L.DATA_LOSS;default:return X()}}(se=Le||(Le={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD=new vs([4294967295,4294967295],0);function y_(t){const e=GD().encode(t),n=new TT;return n.update(e),new Uint8Array(n.digest())}function v_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new vs([n,r],0),new vs([s,i],0)]}class Bm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Oo(`Invalid padding: ${n}`);if(r<0)throw new Oo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Oo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Oo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=vs.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(vs.fromNumber(r)));return s.compare(QD)===1&&(s=new vs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=y_(e),[r,s]=v_(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Bm(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=y_(e),[r,s]=v_(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Oo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ya.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Xc(J.min(),s,new Ae(ae),Zn(),ne())}}class Ya{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ya(r,n,ne(),ne(),ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class tS{constructor(e,n){this.targetId=e,this.me=n}}class nS{constructor(e,n,r=tt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class __{constructor(){this.fe=0,this.ge=w_(),this.pe=tt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ne(),n=ne(),r=ne();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:X()}}),new Ya(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=w_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ue(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class XD{constructor(e){this.Le=e,this.Be=new Map,this.ke=Zn(),this.qe=x_(),this.Qe=new Ae(ae)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:X()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Kf(i))if(r===0){const o=new H(i.path);this.Ue(n,o,ht.newNoDocument(o,J.min()))}else ue(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Cs(r).toUint8Array()}catch(l){if(l instanceof RT)return Ri("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Bm(o,s,i)}catch(l){return Ri(l instanceof Oo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&Kf(a.target)){const l=new H(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,ht.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ne();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Xc(e,n,this.Qe,this.ke,r);return this.ke=Zn(),this.qe=x_(),this.Qe=new Ae(ae),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new __,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ze(ae),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new __),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function x_(){return new Ae(H.comparator)}function w_(){return new Ae(H.comparator)}const YD={asc:"ASCENDING",desc:"DESCENDING"},JD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ZD={and:"AND",or:"OR"};class eV{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Qf(t,e){return t.useProto3Json||Wc(e)?e:{value:e}}function ac(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function tV(t,e){return ac(t,e.toTimestamp())}function xn(t){return ue(!!t),J.fromTimestamp(function(n){const r=Br(n);return new ze(r.seconds,r.nanos)}(t))}function zm(t,e){return Xf(t,e).canonicalString()}function Xf(t,e){const n=function(s){return new ve(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function sS(t){const e=ve.fromString(t);return ue(uS(e)),e}function Yf(t,e){return zm(t.databaseId,e.path)}function vd(t,e){const n=sS(e);if(n.get(1)!==t.databaseId.projectId)throw new q(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new H(oS(n))}function iS(t,e){return zm(t.databaseId,e)}function nV(t){const e=sS(t);return e.length===4?ve.emptyPath():oS(e)}function Jf(t){return new ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function oS(t){return ue(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function E_(t,e,n){return{name:Yf(t,e),fields:n.value.mapValue.fields}}function rV(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:X()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(ue(d===void 0||typeof d=="string"),tt.fromBase64String(d||"")):(ue(d===void 0||d instanceof Buffer||d instanceof Uint8Array),tt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?L.UNKNOWN:eS(c.code);return new q(d,c.message||"")}(o);n=new nS(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=vd(t,r.document.name),i=xn(r.document.updateTime),o=r.document.createTime?xn(r.document.createTime):J.min(),a=new kt({mapValue:{fields:r.document.fields}}),l=ht.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new vu(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=vd(t,r.document),i=r.readTime?xn(r.readTime):J.min(),o=ht.newNoDocument(s,i),a=r.removedTargetIds||[];n=new vu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=vd(t,r.document),i=r.removedTargetIds||[];n=new vu([],i,s,null)}else{if(!("filter"in e))return X();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new HD(s,i),a=r.targetId;n=new tS(a,o)}}return n}function sV(t,e){let n;if(e instanceof Xa)n={update:E_(t,e.key,e.value)};else if(e instanceof Fm)n={delete:Yf(t,e.key)};else if(e instanceof Jr)n={update:E_(t,e.key,e.data),updateMask:fV(e.fieldMask)};else{if(!(e instanceof $D))return X();n={verify:Yf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof ba)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Na)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ra)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof oc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw X()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:tV(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:X()}(t,e.precondition)),n}function iV(t,e){return t&&t.length>0?(ue(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?xn(s.updateTime):xn(i);return o.isEqual(J.min())&&(o=xn(i)),new UD(o,s.transformResults||[])}(n,e))):[]}function oV(t,e){return{documents:[iS(t,e.path)]}}function aV(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=iS(t,s);const i=function(c){if(c.length!==0)return lS(un.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(m){return{field:Gs(m.field),direction:cV(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Qf(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function lV(t){let e=nV(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ue(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(p){const m=aS(p);return m instanceof un&&OT(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(y){return new Ca(Qs(y.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Wc(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(p){const m=!!p.before,_=p.values||[];return new sc(_,m)}(n.startAt));let c=null;return n.endAt&&(c=function(p){const m=!p.before,_=p.values||[];return new sc(_,m)}(n.endAt)),AD(e,s,o,i,a,"F",l,c)}function uV(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function aS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Qs(n.unaryFilter.field);return Fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Qs(n.unaryFilter.field);return Fe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Qs(n.unaryFilter.field);return Fe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Qs(n.unaryFilter.field);return Fe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(t):t.fieldFilter!==void 0?function(n){return Fe.create(Qs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return un.create(n.compositeFilter.filters.map(r=>aS(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return X()}}(n.compositeFilter.op))}(t):X()}function cV(t){return YD[t]}function hV(t){return JD[t]}function dV(t){return ZD[t]}function Gs(t){return{fieldPath:t.canonicalString()}}function Qs(t){return Ye.fromServerFormat(t.fieldPath)}function lS(t){return t instanceof Fe?function(n){if(n.op==="=="){if(l_(n.value))return{unaryFilter:{field:Gs(n.field),op:"IS_NAN"}};if(a_(n.value))return{unaryFilter:{field:Gs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(l_(n.value))return{unaryFilter:{field:Gs(n.field),op:"IS_NOT_NAN"}};if(a_(n.value))return{unaryFilter:{field:Gs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gs(n.field),op:hV(n.op),value:n.value}}}(t):t instanceof un?function(n){const r=n.getFilters().map(s=>lS(s));return r.length===1?r[0]:{compositeFilter:{op:dV(n.op),filters:r}}}(t):X()}function fV(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function uS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n,r,s,i=J.min(),o=J.min(),a=tt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new wr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e){this.ct=e}}function mV(t){const e=lV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ic(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(){this.un=new yV}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Ur.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Ur.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class yV{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ze(ve.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ze(ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Oi(0)}static kn(){return new Oi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(){this.changes=new Zi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Jo(r.mutation,s,Vt.empty(),ze.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ne()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ne()){const s=ps();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Vo();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ps();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ne()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Zn();const o=Yo(),a=function(){return Yo()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Jr)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Jo(d.mutation,c,d.mutation.getFieldMask(),ze.now())):o.set(c.key,Vt.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var p;return a.set(c,new _V(d,(p=o.get(c))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Yo();let s=new Ae((o,a)=>o-a),i=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Vt.empty();d=a.applyToLocalView(c,d),r.set(l,d);const p=(s.get(a.batchId)||ne()).add(l);s=s.insert(a.batchId,p)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,p=HT();d.forEach(m=>{if(!i.has(m)){const _=JT(n.get(m),r.get(m));_!==null&&p.set(m,_),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,p))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return H.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):BT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(ps());let a=-1,l=i;return o.next(c=>F.forEach(c,(d,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),i.get(d)?F.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,ne())).next(d=>({batchId:a,changes:WT(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new H(n)).next(r=>{let s=Vo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Vo();return this.indexManager.getCollectionParents(e,i).next(a=>F.forEach(a,l=>{const c=function(p,m){return new Ji(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,ht.newInvalidDocument(d)))});let a=Vo();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&Jo(d.mutation,c,Vt.empty(),ze.now()),Kc(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:xn(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:mV(s.bundledQuery),readTime:xn(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(){this.overlays=new Ae(H.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ps();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=ps(),i=n.length+1,o=new H(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ae((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=ps(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=ps(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return F.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new WD(n,r));let i=this.Ir.get(n);i===void 0&&(i=ne(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(){this.sessionToken=tt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(){this.Tr=new Ze($e.Er),this.dr=new Ze($e.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new $e(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new $e(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new H(new ve([])),r=new $e(n,e),s=new $e(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new H(new ve([])),r=new $e(n,e),s=new $e(n,e+1);let i=ne();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new $e(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class $e{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return H.comparator(e.key,n.key)||ae(e.wr,n.wr)}static Ar(e,n){return ae(e.wr,n.wr)||H.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ze($e.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new qD(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new $e(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new $e(n,0),s=new $e(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ze(ae);return n.forEach(s=>{const i=new $e(s,0),o=new $e(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;H.isDocumentKey(i)||(i=i.child(""));const o=new $e(new H(i),0);let a=new Ze(ae);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.wr)),!0)},o),F.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ue(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,s=>{const i=new $e(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new $e(n,0),s=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e){this.Mr=e,this.docs=function(){return new Ae(H.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():ht.newInvalidDocument(n))}getEntries(e,n){let r=Zn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ht.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Zn();const o=n.path,a=new H(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||aD(oD(d),r)<=0||(s.has(d.key)||Kc(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){X()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new AV(this)}getSize(e){return F.resolve(this.size)}}class AV extends vV{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e){this.persistence=e,this.Nr=new Zi(n=>Om(n),Lm),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Lr=0,this.Br=new $m,this.targetCount=0,this.kr=Oi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Oi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Rm(0),this.Kr=!1,this.Kr=!0,this.$r=new TV,this.referenceDelegate=e(this),this.Ur=new kV(this),this.indexManager=new gV,this.remoteDocumentCache=function(s){return new IV(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new pV(n),this.Gr=new wV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new EV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new SV(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const s=new CV(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class CV extends uD{constructor(e){super(),this.currentSequenceNumber=e}}class qm{constructor(e){this.persistence=e,this.Jr=new $m,this.Yr=null}static Zr(e){return new qm(e)}get Xr(){if(this.Yr)return this.Yr;throw X()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const s=H.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,J.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ne(),s=ne();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Wm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return xN()?8:cD(gt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new bV;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Io()<=re.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Ks(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(Io()<=re.DEBUG&&W("QueryEngine","Query:",Ks(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Io()<=re.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Ks(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_n(n))):F.resolve())}Yi(e,n){if(d_(n))return F.resolve(null);let r=_n(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=ic(n,null,"F"),r=_n(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ne(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,ic(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,s){return d_(n)||s.isEqual(J.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?F.resolve(null):(Io()<=re.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ks(n)),this.rs(e,o,n,iD(s,-1)).next(a=>a))})}ts(e,n){let r=new Ze($T(e));return n.forEach((s,i)=>{Kc(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Io()<=re.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Ks(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ur.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ae(ae),this._s=new Zi(i=>Om(i),Lm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xV(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function jV(t,e,n,r){return new RV(t,e,n,r)}async function cS(t,e){const n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=ne();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function DV(t,e){const n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const p=c.batch,m=p.keys();let _=F.resolve();return m.forEach(y=>{_=_.next(()=>d.getEntry(l,y)).next(I=>{const T=c.docVersions.get(y);ue(T!==null),I.version.compareTo(T)<0&&(p.applyToRemoteDocument(I,c),I.isValidDocument()&&(I.setReadTime(c.commitVersion),d.addEntry(I)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ne();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function hS(t){const e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function VV(t,e){const n=Z(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((d,p)=>{const m=s.get(p);if(!m)return;a.push(n.Ur.removeMatchingKeys(i,d.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(i,d.addedDocuments,p)));let _=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(tt.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,r)),s=s.insert(p,_),function(I,T,x){return I.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(m,_,d)&&a.push(n.Ur.updateTargetData(i,_))});let l=Zn(),c=ne();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(OV(i,o,e.documentUpdates).next(d=>{l=d.Ps,c=d.Is})),!r.isEqual(J.min())){const d=n.Ur.getLastRemoteSnapshotVersion(i).next(p=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return F.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.os=s,i))}function OV(t,e,n){let r=ne(),s=ne();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Zn();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(J.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):W("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function LV(t,e){const n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function MV(t,e){const n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new wr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Zf(t,e,n){const r=Z(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Qa(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function T_(t,e,n){const r=Z(t);let s=J.min(),i=ne();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const p=Z(l),m=p._s.get(d);return m!==void 0?F.resolve(p.os.get(m)):p.Ur.getTargetData(c,d)}(r,o,_n(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:J.min(),n?i:ne())).next(a=>(FV(r,PD(e),a),{documents:a,Ts:i})))}function FV(t,e,n){let r=t.us.get(e)||J.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class S_{constructor(){this.activeTargetIds=DD()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class UV{constructor(){this.so=new S_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new S_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hl=null;function _d(){return Hl===null?Hl=function(){return 268435456+Math.round(2147483648*Math.random())}():Hl++,"0x"+Hl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const at="WebChannelConnection";class qV extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=_d(),l=this.xo(n,r.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,l,c,s).then(d=>(W("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Ri("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",s),d})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Yi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=zV[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=_d();return new Promise((o,a)=>{const l=new ST;l.setWithCredentials(!0),l.listenOnce(IT.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case mu.NO_ERROR:const d=l.getResponseJson();W(at,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case mu.TIMEOUT:W(at,`RPC '${e}' ${i} timed out`),a(new q(L.DEADLINE_EXCEEDED,"Request time out"));break;case mu.HTTP_ERROR:const p=l.getStatus();if(W(at,`RPC '${e}' ${i} failed with status:`,p,"response text:",l.getResponseText()),p>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const _=m==null?void 0:m.error;if(_&&_.status&&_.message){const y=function(T){const x=T.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(x)>=0?x:L.UNKNOWN}(_.status);a(new q(y,_.message))}else a(new q(L.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new q(L.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{W(at,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);W(at,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=_d(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=PT(),a=kT(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");W(at,`Creating RPC '${e}' stream ${s}: ${d}`,l);const p=o.createWebChannel(d,l);let m=!1,_=!1;const y=new $V({Io:T=>{_?W(at,`Not sending because RPC '${e}' stream ${s} is closed:`,T):(m||(W(at,`Opening RPC '${e}' stream ${s} transport.`),p.open(),m=!0),W(at,`RPC '${e}' stream ${s} sending:`,T),p.send(T))},To:()=>p.close()}),I=(T,x,v)=>{T.listen(x,S=>{try{v(S)}catch(R){setTimeout(()=>{throw R},0)}})};return I(p,Do.EventType.OPEN,()=>{_||(W(at,`RPC '${e}' stream ${s} transport opened.`),y.yo())}),I(p,Do.EventType.CLOSE,()=>{_||(_=!0,W(at,`RPC '${e}' stream ${s} transport closed`),y.So())}),I(p,Do.EventType.ERROR,T=>{_||(_=!0,Ri(at,`RPC '${e}' stream ${s} transport errored:`,T),y.So(new q(L.UNAVAILABLE,"The operation could not be completed")))}),I(p,Do.EventType.MESSAGE,T=>{var x;if(!_){const v=T.data[0];ue(!!v);const S=v,R=S.error||((x=S[0])===null||x===void 0?void 0:x.error);if(R){W(at,`RPC '${e}' stream ${s} received error:`,R);const O=R.status;let M=function(A){const P=Le[A];if(P!==void 0)return eS(P)}(O),k=R.message;M===void 0&&(M=L.INTERNAL,k="Unknown error status: "+O+" with message "+R.message),_=!0,y.So(new q(M,k)),p.close()}else W(at,`RPC '${e}' stream ${s} received:`,v),y.bo(v)}}),I(a,AT.STAT_EVENT,T=>{T.stat===$f.PROXY?W(at,`RPC '${e}' stream ${s} detected buffering proxy`):T.stat===$f.NOPROXY&&W(at,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}function xd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(t){return new eV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&W("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e,n,r,s,i,o,a,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new dS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(Jn(n.toString()),Jn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new q(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class WV extends fS{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=rV(this.serializer,e),r=function(i){if(!("targetChange"in i))return J.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?J.min():o.readTime?xn(o.readTime):J.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Jf(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Kf(l)?{documents:oV(i,l)}:{query:aV(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=rS(i,o.resumeToken);const c=Qf(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(J.min())>0){a.readTime=ac(i,o.snapshotVersion.toTimestamp());const c=Qf(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=uV(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Jf(this.serializer),n.removeTarget=e,this.a_(n)}}class HV extends fS{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ue(!!e.streamToken),this.lastStreamToken=e.streamToken,ue(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ue(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=iV(e.writeResults,e.commitTime),r=xn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Jf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>sV(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new q(L.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Xf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new q(L.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Xf(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(L.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class GV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Jn(n),this.D_=!1):W("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ms(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Z(l);c.L_.add(4),await Ja(c),c.q_.set("Unknown"),c.L_.delete(4),await Jc(c)}(this))})}),this.q_=new GV(r,s)}}async function Jc(t){if(Ms(t))for(const e of t.B_)await e(!0)}async function Ja(t){for(const e of t.B_)await e(!1)}function pS(t,e){const n=Z(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Qm(n)?Gm(n):eo(n).r_()&&Km(n,e))}function Hm(t,e){const n=Z(t),r=eo(n);n.N_.delete(e),r.r_()&&mS(n,e),n.N_.size===0&&(r.r_()?r.o_():Ms(n)&&n.q_.set("Unknown"))}function Km(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}eo(t).A_(e)}function mS(t,e){t.Q_.xe(e),eo(t).R_(e)}function Gm(t){t.Q_=new XD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),eo(t).start(),t.q_.v_()}function Qm(t){return Ms(t)&&!eo(t).n_()&&t.N_.size>0}function Ms(t){return Z(t).L_.size===0}function gS(t){t.Q_=void 0}async function XV(t){t.q_.set("Online")}async function YV(t){t.N_.forEach((e,n)=>{Km(t,e)})}async function JV(t,e){gS(t),Qm(t)?(t.q_.M_(e),Gm(t)):t.q_.set("Unknown")}async function ZV(t,e,n){if(t.q_.set("Online"),e instanceof nS&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await lc(t,r)}else if(e instanceof vu?t.Q_.Ke(e):e instanceof tS?t.Q_.He(e):t.Q_.We(e),!n.isEqual(J.min()))try{const r=await hS(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.N_.get(c);d&&i.N_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.N_.get(l);if(!d)return;i.N_.set(l,d.withResumeToken(tt.EMPTY_BYTE_STRING,d.snapshotVersion)),mS(i,l);const p=new wr(d.target,l,c,d.sequenceNumber);Km(i,p)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await lc(t,r)}}async function lc(t,e,n){if(!Qa(e))throw e;t.L_.add(1),await Ja(t),t.q_.set("Offline"),n||(n=()=>hS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Jc(t)})}function yS(t,e){return e().catch(n=>lc(t,n,e))}async function Zc(t){const e=Z(t),n=zr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;eO(e);)try{const s=await LV(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,tO(e,s)}catch(s){await lc(e,s)}vS(e)&&_S(e)}function eO(t){return Ms(t)&&t.O_.length<10}function tO(t,e){t.O_.push(e);const n=zr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function vS(t){return Ms(t)&&!zr(t).n_()&&t.O_.length>0}function _S(t){zr(t).start()}async function nO(t){zr(t).p_()}async function rO(t){const e=zr(t);for(const n of t.O_)e.m_(n.mutations)}async function sO(t,e,n){const r=t.O_.shift(),s=Um.from(r,e,n);await yS(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Zc(t)}async function iO(t,e){e&&zr(t).V_&&await async function(r,s){if(function(o){return KD(o)&&o!==L.ABORTED}(s.code)){const i=r.O_.shift();zr(r).s_(),await yS(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Zc(r)}}(t,e),vS(t)&&_S(t)}async function A_(t,e){const n=Z(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=Ms(n);n.L_.add(3),await Ja(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Jc(n)}async function oO(t,e){const n=Z(t);e?(n.L_.delete(2),await Jc(n)):e||(n.L_.add(2),await Ja(n),n.q_.set("Unknown"))}function eo(t){return t.K_||(t.K_=function(n,r,s){const i=Z(n);return i.w_(),new WV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:XV.bind(null,t),Ro:YV.bind(null,t),mo:JV.bind(null,t),d_:ZV.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Qm(t)?Gm(t):t.q_.set("Unknown")):(await t.K_.stop(),gS(t))})),t.K_}function zr(t){return t.U_||(t.U_=function(n,r,s){const i=Z(n);return i.w_(),new HV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:nO.bind(null,t),mo:iO.bind(null,t),f_:rO.bind(null,t),g_:sO.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Zc(t)):(await t.U_.stop(),t.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Xm(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ym(t,e){if(Jn("AsyncQueue",`${e}: ${t}`),Qa(t))return new q(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e){this.comparator=e?(n,r)=>e(n,r)||H.comparator(n.key,r.key):(n,r)=>H.comparator(n.key,r.key),this.keyedMap=Vo(),this.sortedSet=new Ae(this.comparator)}static emptySet(e){return new Ti(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ti)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ti;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(){this.W_=new Ae(H.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):X():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Li{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Li(e,n,Ti.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class lO{constructor(){this.queries=P_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Z(n),i=s.queries;s.queries=P_(),i.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new q(L.ABORTED,"Firestore shutting down"))}}function P_(){return new Zi(t=>zT(t),Hc)}async function uO(t,e){const n=Z(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new aO,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Ym(o,`Initialization of query '${Ks(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Jm(n)}async function cO(t,e){const n=Z(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function hO(t,e){const n=Z(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&Jm(n)}function dO(t,e,n){const r=Z(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Jm(t){t.Y_.forEach(e=>{e.next()})}var ep,C_;(C_=ep||(ep={})).ea="default",C_.Cache="cache";class fO{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Li(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Li.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ep.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e){this.key=e}}class wS{constructor(e){this.key=e}}class pO{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ne(),this.mutatedKeys=ne(),this.Aa=$T(e),this.Ra=new Ti(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new k_,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,p)=>{const m=s.get(d),_=Kc(this.query,p)?p:null,y=!!m&&this.mutatedKeys.has(m.key),I=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let T=!1;m&&_?m.data.isEqual(_.data)?y!==I&&(r.track({type:3,doc:_}),T=!0):this.ga(m,_)||(r.track({type:2,doc:_}),T=!0,(l&&this.Aa(_,l)>0||c&&this.Aa(_,c)<0)&&(a=!0)):!m&&_?(r.track({type:0,doc:_}),T=!0):m&&!_&&(r.track({type:1,doc:m}),T=!0,(l||c)&&(a=!0)),T&&(_?(o=o.add(_),i=I?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,p)=>function(_,y){const I=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return I(_)-I(y)}(d.type,p.type)||this.Aa(d.doc,p.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Li(this.query,e.Ra,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new k_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ne(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new wS(r))}),this.da.forEach(r=>{e.has(r)||n.push(new xS(r))}),n}ba(e){this.Ta=e.Ts,this.da=ne();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Li.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class mO{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class gO{constructor(e){this.key=e,this.va=!1}}class yO{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Zi(a=>zT(a),Hc),this.Ma=new Map,this.xa=new Set,this.Oa=new Ae(H.comparator),this.Na=new Map,this.La=new $m,this.Ba={},this.ka=new Map,this.qa=Oi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function vO(t,e,n=!0){const r=kS(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await ES(r,e,n,!0),s}async function _O(t,e){const n=kS(t);await ES(n,e,!0,!1)}async function ES(t,e,n,r){const s=await MV(t.localStore,_n(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await xO(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&pS(t.remoteStore,s),a}async function xO(t,e,n,r,s){t.Ka=(p,m,_)=>async function(I,T,x,v){let S=T.view.ma(x);S.ns&&(S=await T_(I.localStore,T.query,!1).then(({documents:k})=>T.view.ma(k,S)));const R=v&&v.targetChanges.get(T.targetId),O=v&&v.targetMismatches.get(T.targetId)!=null,M=T.view.applyChanges(S,I.isPrimaryClient,R,O);return N_(I,T.targetId,M.wa),M.snapshot}(t,p,m,_);const i=await T_(t.localStore,e,!0),o=new pO(e,i.Ts),a=o.ma(i.documents),l=Ya.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);N_(t,n,c.wa);const d=new mO(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function wO(t,e,n){const r=Z(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Hc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Zf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Hm(r.remoteStore,s.targetId),tp(r,s.targetId)}).catch(Ga)):(tp(r,s.targetId),await Zf(r.localStore,s.targetId,!0))}async function EO(t,e){const n=Z(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Hm(n.remoteStore,r.targetId))}async function TO(t,e,n){const r=bO(t);try{const s=await function(o,a){const l=Z(o),c=ze.now(),d=a.reduce((_,y)=>_.add(y.key),ne());let p,m;return l.persistence.runTransaction("Locally write mutations","readwrite",_=>{let y=Zn(),I=ne();return l.cs.getEntries(_,d).next(T=>{y=T,y.forEach((x,v)=>{v.isValidDocument()||(I=I.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(_,y)).next(T=>{p=T;const x=[];for(const v of a){const S=zD(v,p.get(v.key).overlayedDocument);S!=null&&x.push(new Jr(v.key,S,jT(S.value.mapValue),on.exists(!0)))}return l.mutationQueue.addMutationBatch(_,c,x,a)}).next(T=>{m=T;const x=T.applyToLocalDocumentSet(p,I);return l.documentOverlayCache.saveOverlays(_,T.batchId,x)})}).then(()=>({batchId:m.batchId,changes:WT(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Ae(ae)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await Za(r,s.changes),await Zc(r.remoteStore)}catch(s){const i=Ym(s,"Failed to persist write");n.reject(i)}}async function TS(t,e){const n=Z(t);try{const r=await VV(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(ue(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?ue(o.va):s.removedDocuments.size>0&&(ue(o.va),o.va=!1))}),await Za(n,r,e)}catch(r){await Ga(r)}}function b_(t,e,n){const r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=Z(o);l.onlineState=a;let c=!1;l.queries.forEach((d,p)=>{for(const m of p.j_)m.Z_(a)&&(c=!0)}),c&&Jm(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function SO(t,e,n){const r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Ae(H.comparator);o=o.insert(i,ht.newNoDocument(i,J.min()));const a=ne().add(i),l=new Xc(J.min(),new Map,new Ae(ae),o,a);await TS(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),Zm(r)}else await Zf(r.localStore,e,!1).then(()=>tp(r,e,n)).catch(Ga)}async function IO(t,e){const n=Z(t),r=e.batch.batchId;try{const s=await DV(n.localStore,e);IS(n,r,null),SS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Za(n,s)}catch(s){await Ga(s)}}async function AO(t,e,n){const r=Z(t);try{const s=await function(o,a){const l=Z(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(p=>(ue(p!==null),d=p.keys(),l.mutationQueue.removeMutationBatch(c,p))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);IS(r,e,n),SS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Za(r,s)}catch(s){await Ga(s)}}function SS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function IS(t,e,n){const r=Z(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function tp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||AS(t,r)})}function AS(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Hm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Zm(t))}function N_(t,e,n){for(const r of n)r instanceof xS?(t.La.addReference(r.key,e),kO(t,r)):r instanceof wS?(W("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||AS(t,r.key)):X()}function kO(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(W("SyncEngine","New document in limbo: "+n),t.xa.add(r),Zm(t))}function Zm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new H(ve.fromString(e)),r=t.qa.next();t.Na.set(r,new gO(n)),t.Oa=t.Oa.insert(n,r),pS(t.remoteStore,new wr(_n(UT(n.path)),r,"TargetPurposeLimboResolution",Rm.oe))}}async function Za(t,e,n){const r=Z(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const p=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(c){s.push(c);const p=Wm.Wi(l.targetId,c);i.push(p)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,c){const d=Z(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>F.forEach(c,m=>F.forEach(m.$i,_=>d.persistence.referenceDelegate.addReference(p,m.targetId,_)).next(()=>F.forEach(m.Ui,_=>d.persistence.referenceDelegate.removeReference(p,m.targetId,_)))))}catch(p){if(!Qa(p))throw p;W("LocalStore","Failed to update sequence numbers: "+p)}for(const p of c){const m=p.targetId;if(!p.fromCache){const _=d.os.get(m),y=_.snapshotVersion,I=_.withLastLimboFreeSnapshotVersion(y);d.os=d.os.insert(m,I)}}}(r.localStore,i))}async function PO(t,e){const n=Z(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await cS(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(l=>{l.reject(new q(L.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Za(n,r.hs)}}function CO(t,e){const n=Z(t),r=n.Na.get(e);if(r&&r.va)return ne().add(r.key);{let s=ne();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function kS(t){const e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=TS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=CO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SO.bind(null,e),e.Ca.d_=hO.bind(null,e.eventManager),e.Ca.$a=dO.bind(null,e.eventManager),e}function bO(t){const e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=IO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AO.bind(null,e),e}class uc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return jV(this.persistence,new NV,e.initialUser,this.serializer)}Ga(e){return new PV(qm.Zr,this.serializer)}Wa(e){return new UV}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uc.provider={build:()=>new uc};class np{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>b_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=PO.bind(null,this.syncEngine),await oO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new lO}()}createDatastore(e){const n=Yc(e.databaseInfo.databaseId),r=function(i){return new qV(i)}(e.databaseInfo);return function(i,o,a,l){return new KV(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new QV(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>b_(this.syncEngine,n,0),function(){return I_.D()?new I_:new BV}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const p=new yO(s,i,o,a,l,c);return d&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Z(s);W("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Ja(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}np.provider={build:()=>new np};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Jn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ut.UNAUTHENTICATED,this.clientId=bT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{W("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ym(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function wd(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await cS(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function R_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await jO(t);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>A_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>A_(e.remoteStore,s)),t._onlineComponents=e}async function jO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await wd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===L.FAILED_PRECONDITION||s.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ri("Error using user provided cache. Falling back to memory cache: "+n),await wd(t,new uc)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await wd(t,new uc);return t._offlineComponents}async function PS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await R_(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await R_(t,new np))),t._onlineComponents}function DO(t){return PS(t).then(e=>e.syncEngine)}async function VO(t){const e=await PS(t),n=e.eventManager;return n.onListen=vO.bind(null,e.syncEngine),n.onUnlisten=wO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=_O.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=EO.bind(null,e.syncEngine),n}function OO(t,e,n={}){const r=new Dr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new NO({next:m=>{d.Za(),o.enqueueAndForget(()=>cO(i,p)),m.fromCache&&l.source==="server"?c.reject(new q(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),p=new fO(a,d,{includeMetadataChanges:!0,_a:!0});return uO(i,p)}(await VO(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(t,e,n){if(!n)throw new q(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function LO(t,e,n,r){if(e===!0&&r===!0)throw new q(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function D_(t){if(!H.isDocumentKey(t))throw new q(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function V_(t){if(H.isDocumentKey(t))throw new q(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function eh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X()}function Ns(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=eh(t);throw new q(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new q(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=CS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class th{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new O_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new O_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Xj;switch(r.type){case"firstParty":return new eD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=j_.get(n);r&&(W("ComponentProvider","Removing Datastore"),j_.delete(n),r.terminate())}(this),Promise.resolve()}}function MO(t,e,n,r={}){var s;const i=(t=Ns(t,th))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Ri("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=ut.MOCK_USER;else{a=L1(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new q(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ut(c)}t._authCredentials=new Yj(new CT(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Zr(this.firestore,e,this._query)}}class Mt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mt(this.firestore,e,this._key)}}class Vr extends Zr{constructor(e,n,r){super(e,n,UT(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mt(this.firestore,null,new H(e))}withConverter(e){return new Vr(this.firestore,e,this._path)}}function tr(t,e,...n){if(t=Ce(t),bS("collection","path",e),t instanceof th){const r=ve.fromString(e,...n);return V_(r),new Vr(t,null,r)}{if(!(t instanceof Mt||t instanceof Vr))throw new q(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return V_(r),new Vr(t.firestore,null,r)}}function Or(t,e,...n){if(t=Ce(t),arguments.length===1&&(e=bT.newId()),bS("doc","path",e),t instanceof th){const r=ve.fromString(e,...n);return D_(r),new Mt(t,null,new H(r))}{if(!(t instanceof Mt||t instanceof Vr))throw new q(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return D_(r),new Mt(t.firestore,t instanceof Vr?t.converter:null,new H(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new dS(this,"async_queue_retry"),this.Vu=()=>{const r=xd();r&&W("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=xd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=xd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Dr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Qa(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Jn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Xm.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&X()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class el extends th{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new L_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new L_(e),this._firestoreClient=void 0,await e}}}function FO(t,e){const n=typeof t=="object"?t:wm(),r=typeof t=="string"?t:"(default)",s=Uc(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=D1("firestore");i&&MO(s,...i)}return s}function NS(t){if(t._terminated)throw new q(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||UO(t),t._firestoreClient}function UO(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,d){return new fD(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,CS(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new RO(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Mi(tt.fromBase64String(e))}catch(n){throw new q(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Mi(tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ye(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO=/^__.*__$/;class zO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Jr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xa(e,this.data,n,this.fieldTransforms)}}class RS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Jr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function jS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}class ng{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new ng(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return cc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(jS(this.Cu)&&BO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class $O{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Yc(e)}Qu(e,n,r,s=!1){return new ng({Cu:e,methodName:n,qu:r,path:Ye.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rg(t){const e=t._freezeSettings(),n=Yc(t._databaseId);return new $O(t._databaseId,!!e.ignoreUndefinedProperties,n)}function qO(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);ig("Data must be an object, but it was:",o,r);const a=DS(r,o);let l,c;if(i.merge)l=new Vt(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const p of i.mergeFields){const m=rp(e,p,n);if(!o.contains(m))throw new q(L.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);OS(d,m)||d.push(m)}l=new Vt(d),c=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,c=o.fieldTransforms;return new zO(new kt(a),l,c)}class sh extends rh{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sh}}class sg extends rh{_toFieldTransform(e){return new MD(e.path,new ba)}isEqual(e){return e instanceof sg}}function WO(t,e,n,r){const s=t.Qu(1,e,n);ig("Data must be an object, but it was:",s,r);const i=[],o=kt.empty();Ls(r,(l,c)=>{const d=og(e,l,n);c=Ce(c);const p=s.Nu(d);if(c instanceof sh)i.push(d);else{const m=tl(c,p);m!=null&&(i.push(d),o.set(d,m))}});const a=new Vt(i);return new RS(o,a,s.fieldTransforms)}function HO(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[rp(e,r,n)],l=[s];if(i.length%2!=0)throw new q(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)a.push(rp(e,i[m])),l.push(i[m+1]);const c=[],d=kt.empty();for(let m=a.length-1;m>=0;--m)if(!OS(c,a[m])){const _=a[m];let y=l[m];y=Ce(y);const I=o.Nu(_);if(y instanceof sh)c.push(_);else{const T=tl(y,I);T!=null&&(c.push(_),d.set(_,T))}}const p=new Vt(c);return new RS(d,p,o.fieldTransforms)}function KO(t,e,n,r=!1){return tl(n,t.Qu(r?4:3,e))}function tl(t,e){if(VS(t=Ce(t)))return ig("Unsupported field value:",e,t),DS(t,e);if(t instanceof rh)return function(r,s){if(!jS(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=tl(a,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ce(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return VD(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ze.fromDate(r);return{timestampValue:ac(s.serializer,i)}}if(r instanceof ze){const i=new ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ac(s.serializer,i)}}if(r instanceof eg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Mi)return{bytesValue:rS(s.serializer,r._byteString)};if(r instanceof Mt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:zm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof tg)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Mm(a.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${eh(r)}`)}(t,e)}function DS(t,e){const n={};return NT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ls(t,(r,s)=>{const i=tl(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function VS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ze||t instanceof eg||t instanceof Mi||t instanceof Mt||t instanceof rh||t instanceof tg)}function ig(t,e,n){if(!VS(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=eh(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function rp(t,e,n){if((e=Ce(e))instanceof nh)return e._internalPath;if(typeof e=="string")return og(t,e);throw cc("Field path arguments must be of type string or ",t,!1,void 0,n)}const GO=new RegExp("[~\\*/\\[\\]]");function og(t,e,n){if(e.search(GO)>=0)throw cc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new nh(...e.split("."))._internalPath}catch{throw cc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function cc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new q(L.INVALID_ARGUMENT,a+t+l)}function OS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ih("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class QO extends LS{data(){return super.data()}}function ih(t,e){return typeof e=="string"?og(t,e):e instanceof nh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ag{}class lg extends ag{}function to(t,e,...n){let r=[];e instanceof ag&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof cg).length,a=i.filter(l=>l instanceof oh).length;if(o>1||o>0&&a>0)throw new q(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class oh extends lg{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new oh(e,n,r)}_apply(e){const n=this._parse(e);return FS(e._query,n),new Zr(e.firestore,e.converter,Gf(e._query,n))}_parse(e){const n=rg(e.firestore);return function(i,o,a,l,c,d,p){let m;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new q(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){F_(p,d);const _=[];for(const y of p)_.push(M_(l,i,y));m={arrayValue:{values:_}}}else m=M_(l,i,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||F_(p,d),m=KO(a,o,p,d==="in"||d==="not-in");return Fe.create(c,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ug(t,e,n){const r=e,s=ih("where",t);return oh._create(s,r,n)}class cg extends ag{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new cg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:un.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)FS(o,l),o=Gf(o,l)}(e._query,n),new Zr(e.firestore,e.converter,Gf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class hg extends lg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new hg(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new q(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new q(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ca(i,o)}(e._query,this._field,this._direction);return new Zr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Ji(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function MS(t,e="asc"){const n=e,r=ih("orderBy",t);return hg._create(r,n)}class dg extends lg{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new dg(e,n,r)}_apply(e){return new Zr(e.firestore,e.converter,ic(e._query,this._limit,this._limitType))}}function YO(t){return dg._create("limit",t,"F")}function M_(t,e,n){if(typeof(n=Ce(n))=="string"){if(n==="")throw new q(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BT(e)&&n.indexOf("/")!==-1)throw new q(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ve.fromString(n));if(!H.isDocumentKey(r))throw new q(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return o_(t,new H(r))}if(n instanceof Mt)return o_(t,n._key);throw new q(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${eh(n)}.`)}function F_(t,e){if(!Array.isArray(t)||t.length===0)throw new q(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function FS(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class JO{convertValue(e,n="none"){switch(bs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return De(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ls(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>De(o.doubleValue));return new tg(i)}convertGeoPoint(e){return new eg(De(e.latitude),De(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Dm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Aa(e));default:return null}}convertTimestamp(e){const n=Br(e);return new ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ve.fromString(e);ue(uS(r));const s=new ka(r.get(1),r.get(3)),i=new H(r.popFirst(5));return s.isEqual(n)||Jn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class eL extends LS{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new _u(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ih("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class _u extends eL{data(e={}){return super.data(e)}}class tL{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Kl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new _u(this._firestore,this._userDataWriter,r.key,r,new Kl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new _u(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Kl(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new _u(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Kl(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:nL(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function nL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X()}}class rL extends JO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,n)}}function Fs(t){t=Ns(t,Zr);const e=Ns(t.firestore,el),n=NS(e),r=new rL(e);return XO(t._query),OO(n,t._query).then(s=>new tL(e,r,t,s))}function hc(t,e,n,...r){t=Ns(t,Mt);const s=Ns(t.firestore,el),i=rg(s);let o;return o=typeof(e=Ce(e))=="string"||e instanceof nh?HO(i,"updateDoc",t._key,e,n,r):WO(i,"updateDoc",t._key,e),pg(s,[o.toMutation(t._key,on.exists(!0))])}function fg(t){return pg(Ns(t.firestore,el),[new Fm(t._key,on.none())])}function US(t,e){const n=Ns(t.firestore,el),r=Or(t),s=ZO(t.converter,e);return pg(n,[qO(rg(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,on.exists(!1))]).then(()=>r)}function pg(t,e){return function(r,s){const i=new Dr;return r.asyncQueue.enqueueAndForget(async()=>TO(await DO(r),s,i)),i.promise}(NS(t),e)}function dc(){return new sg("serverTimestamp")}(function(e,n=!0){(function(s){Yi=s})(Vs),As(new Fr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new el(new Jj(r.getProvider("auth-internal")),new nD(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new q(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ka(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),gn(t_,"4.7.3",e),gn(t_,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS="firebasestorage.googleapis.com",zS="storageBucket",sL=2*60*1e3,iL=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne extends In{constructor(e,n,r=0){super(Ed(e),`Firebase Storage: ${n} (${Ed(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ne.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ed(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var be;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(be||(be={}));function Ed(t){return"storage/"+t}function mg(){const t="An unknown error occurred, please check the error payload for server response.";return new Ne(be.UNKNOWN,t)}function oL(t){return new Ne(be.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function aL(t){return new Ne(be.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function lL(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ne(be.UNAUTHENTICATED,t)}function uL(){return new Ne(be.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function cL(t){return new Ne(be.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function hL(){return new Ne(be.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function dL(){return new Ne(be.CANCELED,"User canceled the upload/download.")}function fL(t){return new Ne(be.INVALID_URL,"Invalid URL '"+t+"'.")}function pL(t){return new Ne(be.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function mL(){return new Ne(be.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+zS+"' property when initializing the app?")}function gL(){return new Ne(be.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function yL(){return new Ne(be.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function vL(t){return new Ne(be.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function sp(t){return new Ne(be.INVALID_ARGUMENT,t)}function $S(){return new Ne(be.APP_DELETED,"The Firebase app was deleted.")}function _L(t){return new Ne(be.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Zo(t,e){return new Ne(be.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ao(t){throw new Ne(be.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ot.makeFromUrl(e,n)}catch{return new Ot(e,"")}if(r.path==="")return r;throw pL(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(R){R.path_=decodeURIComponent(R.path)}const d="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",_=new RegExp(`^https?://${p}/${d}/b/${s}/o${m}`,"i"),y={bucket:1,path:3},I=n===BS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",x=new RegExp(`^https?://${I}/${s}/${T}`,"i"),S=[{regex:a,indices:l,postModify:i},{regex:_,indices:y,postModify:c},{regex:x,indices:{bucket:1,path:2},postModify:c}];for(let R=0;R<S.length;R++){const O=S[R],M=O.regex.exec(e);if(M){const k=M[O.indices.bucket];let w=M[O.indices.path];w||(w=""),r=new Ot(k,w),O.postModify(r);break}}if(r==null)throw fL(e);return r}}class xL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wL(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...T){c||(c=!0,e.apply(null,T))}function p(T){s=setTimeout(()=>{s=null,t(_,l())},T)}function m(){i&&clearTimeout(i)}function _(T,...x){if(c){m();return}if(T){m(),d.call(null,T,...x);return}if(l()||o){m(),d.call(null,T,...x);return}r<64&&(r*=2);let S;a===1?(a=2,S=0):S=(r+Math.random())*1e3,p(S)}let y=!1;function I(T){y||(y=!0,m(),!c&&(s!==null?(T||(a=2),clearTimeout(s),p(0)):T||(a=1)))}return p(0),i=setTimeout(()=>{o=!0,I(!0)},n),I}function EL(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TL(t){return t!==void 0}function SL(t){return typeof t=="object"&&!Array.isArray(t)}function gg(t){return typeof t=="string"||t instanceof String}function U_(t){return yg()&&t instanceof Blob}function yg(){return typeof Blob<"u"}function B_(t,e,n,r){if(r<e)throw sp(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw sp(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function qS(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var _s;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(_s||(_s={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IL(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(e,n,r,s,i,o,a,l,c,d,p,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=p,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,y)=>{this.resolve_=_,this.reject_=y,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Gl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===_s.NO_ERROR,l=i.getStatus();if(!a||IL(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===_s.ABORT;r(!1,new Gl(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Gl(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());TL(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=mg();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?$S():dL();o(l)}else{const l=hL();o(l)}};this.canceled_?n(!1,new Gl(!1,null,!0)):this.backoffId_=wL(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&EL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Gl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function kL(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function PL(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function CL(t,e){e&&(t["X-Firebase-GMPID"]=e)}function bL(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function NL(t,e,n,r,s,i,o=!0){const a=qS(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return CL(c,e),kL(c,n),PL(c,i),bL(c,r),new AL(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function jL(...t){const e=RL();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(yg())return new Blob(t);throw new Ne(be.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function DL(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VL(t){if(typeof atob>"u")throw vL("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Td{constructor(e,n){this.data=e,this.contentType=n||null}}function OL(t,e){switch(t){case fn.RAW:return new Td(WS(e));case fn.BASE64:case fn.BASE64URL:return new Td(HS(t,e));case fn.DATA_URL:return new Td(ML(e),FL(e))}throw mg()}function WS(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function LL(t){let e;try{e=decodeURIComponent(t)}catch{throw Zo(fn.DATA_URL,"Malformed data URL.")}return WS(e)}function HS(t,e){switch(t){case fn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Zo(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case fn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Zo(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=VL(e)}catch(s){throw s.message.includes("polyfill")?s:Zo(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class KS{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Zo(fn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=UL(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function ML(t){const e=new KS(t);return e.base64?HS(fn.BASE64,e.rest):LL(e.rest)}function FL(t){return new KS(t).contentType}function UL(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,n){let r=0,s="";U_(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(U_(this.data_)){const r=this.data_,s=DL(r,e,n);return s===null?null:new yr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new yr(r,!0)}}static getBlob(...e){if(yg()){const n=e.map(r=>r instanceof yr?r.data_:r);return new yr(jL.apply(null,n))}else{const n=e.map(o=>gg(o)?OL(fn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new yr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(t){let e;try{e=JSON.parse(t)}catch{return null}return SL(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BL(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function zL(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function QS(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $L(t,e){return e}class xt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||$L}}let Ql=null;function qL(t){return!gg(t)||t.length<2?t:QS(t)}function XS(){if(Ql)return Ql;const t=[];t.push(new xt("bucket")),t.push(new xt("generation")),t.push(new xt("metageneration")),t.push(new xt("name","fullPath",!0));function e(i,o){return qL(o)}const n=new xt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new xt("size");return s.xform=r,t.push(s),t.push(new xt("timeCreated")),t.push(new xt("updated")),t.push(new xt("md5Hash",null,!0)),t.push(new xt("cacheControl",null,!0)),t.push(new xt("contentDisposition",null,!0)),t.push(new xt("contentEncoding",null,!0)),t.push(new xt("contentLanguage",null,!0)),t.push(new xt("contentType",null,!0)),t.push(new xt("metadata","customMetadata",!0)),Ql=t,Ql}function WL(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Ot(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function HL(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return WL(r,t),r}function YS(t,e,n){const r=GS(e);return r===null?null:HL(t,r,n)}function KL(t,e,n,r){const s=GS(e);if(s===null||!gg(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,p=t.fullPath,m="/b/"+o(d)+"/o/"+o(p),_=vg(m,n,r),y=qS({alt:"media",token:c});return _+y})[0]}function GL(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class JS{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(t){if(!t)throw mg()}function QL(t,e){function n(r,s){const i=YS(t,s,e);return ZS(i!==null),i}return n}function XL(t,e){function n(r,s){const i=YS(t,s,e);return ZS(i!==null),KL(i,s,t.host,t._protocol)}return n}function eI(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=uL():s=lL():n.getStatus()===402?s=aL(t.bucket):n.getStatus()===403?s=cL(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function YL(t){const e=eI(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=oL(t.path)),i.serverResponse=s.serverResponse,i}return n}function JL(t,e,n){const r=e.fullServerUrl(),s=vg(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new JS(s,i,XL(t,n),o);return a.errorHandler=YL(e),a}function ZL(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function eM(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=ZL(null,e)),r}function tM(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let S="";for(let R=0;R<2;R++)S=S+Math.random().toString().slice(2);return S}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=eM(e,r,s),d=GL(c,n),p="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,m=`\r
--`+l+"--",_=yr.getBlob(p,r,m);if(_===null)throw gL();const y={name:c.fullPath},I=vg(i,t.host,t._protocol),T="POST",x=t.maxUploadRetryTime,v=new JS(I,T,QL(t,n),x);return v.urlParams=y,v.headers=o,v.body=_.uploadData(),v.errorHandler=eI(e),v}class nM{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=_s.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=_s.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=_s.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Ao("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ao("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ao("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ao("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ao("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class rM extends nM{initXhr(){this.xhr_.responseType="text"}}function tI(){return new rM}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,n){this._service=e,n instanceof Ot?this._location=n:this._location=Ot.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Rs(e,n)}get root(){const e=new Ot(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return QS(this._location.path)}get storage(){return this._service}get parent(){const e=BL(this._location.path);if(e===null)return null;const n=new Ot(this._location.bucket,e);return new Rs(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw _L(e)}}function sM(t,e,n){t._throwIfRoot("uploadBytes");const r=tM(t.storage,t._location,XS(),new yr(e,!0),n);return t.storage.makeRequestWithTokens(r,tI).then(s=>({metadata:s,ref:t}))}function iM(t){t._throwIfRoot("getDownloadURL");const e=JL(t.storage,t._location,XS());return t.storage.makeRequestWithTokens(e,tI).then(n=>{if(n===null)throw yL();return n})}function oM(t,e){const n=zL(t._location.path,e),r=new Ot(t._location.bucket,n);return new Rs(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(t){return/^[A-Za-z]+:\/\//.test(t)}function lM(t,e){return new Rs(t,e)}function nI(t,e){if(t instanceof _g){const n=t;if(n._bucket==null)throw mL();const r=new Rs(n,n._bucket);return e!=null?nI(r,e):r}else return e!==void 0?oM(t,e):t}function uM(t,e){if(e&&aM(e)){if(t instanceof _g)return lM(t,e);throw sp("To use ref(service, url), the first argument must be a Storage instance.")}else return nI(t,e)}function z_(t,e){const n=e==null?void 0:e[zS];return n==null?null:Ot.makeFromBucketSpec(n,t)}function cM(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:L1(s,t.app.options.projectId))}class _g{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=BS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=sL,this._maxUploadRetryTime=iL,this._requests=new Set,s!=null?this._bucket=Ot.makeFromBucketSpec(s,this._host):this._bucket=z_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ot.makeFromBucketSpec(this._url,e):this._bucket=z_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){B_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){B_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Rs(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new xL($S());{const o=NL(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const $_="@firebase/storage",q_="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI="storage";function hM(t,e,n){return t=Ce(t),sM(t,e,n)}function dM(t){return t=Ce(t),iM(t)}function fM(t,e){return t=Ce(t),uM(t,e)}function pM(t=wm(),e){t=Ce(t);const r=Uc(t,rI).getImmediate({identifier:e}),s=D1("storage");return s&&mM(r,...s),r}function mM(t,e,n,r={}){cM(t,e,n,r)}function gM(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new _g(n,r,s,e,Vs)}function yM(){As(new Fr(rI,gM,"PUBLIC").setMultipleInstances(!0)),gn($_,q_,""),gn($_,q_,"esm2017")}yM();const vM={apiKey:"AIzaSyBKU1P3u4jN15fvmZgRxgNOk1Cr9XGp50g",authDomain:"aura-da8f5.firebaseapp.com",projectId:"aura-da8f5",storageBucket:"aura-da8f5.firebasestorage.app",messagingSenderId:"355946697342",appId:"1:355946697342:web:c39a53f186401bec8bfe2f"},xg=U1(vM),ah=Hj(xg),dt=FO(xg),_M=pM(xg),sI=b.createContext({currentUser:null,loading:!0});function xM({children:t}){const[e,n]=b.useState(null),[r,s]=b.useState(!0);return b.useEffect(()=>D2(ah,o=>{n(o),s(!1)}),[]),h.jsx(sI.Provider,{value:{currentUser:e,loading:r},children:!r&&t})}function iI(){return b.useContext(sI)}const oI=b.createContext(null);function wM({children:t}){const[e,n]=b.useState(()=>{const o=localStorage.getItem("favorites");return o?JSON.parse(o):[]});b.useEffect(()=>{localStorage.setItem("favorites",JSON.stringify(e))},[e]);const r=o=>{n(a=>[...a,o])},s=o=>{n(a=>a.filter(l=>l.id!==o))},i=o=>e.some(a=>a.id===o);return h.jsx(oI.Provider,{value:{favorites:e,addToFavorites:r,removeFromFavorites:s,isFavorite:i},children:t})}function wg(){const t=b.useContext(oI);if(!t)throw new Error("useFavorites must be used within a FavoritesProvider");return t}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var EM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ee=(t,e)=>{const n=b.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...c},d)=>b.createElement("svg",{ref:d,...EM,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${TM(t)}`,a].join(" "),...c},[...e.map(([p,m])=>b.createElement(p,m)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_=ee("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aI=ee("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lI=ee("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=ee("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=ee("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uI=ee("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eg=ee("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=ee("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=ee("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=ee("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=ee("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cI=ee("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=ee("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=ee("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=ee("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hI=ee("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=ee("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tg=ee("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=ee("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=ee("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dI=ee("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fc=ee("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lh=ee("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sg=ee("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=ee("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=ee("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=ee("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=ee("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=ee("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fI=ee("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=ee("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ag=ee("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=ee("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=ee("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=ee("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=ee("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=ee("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=ee("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function BM({item:t,onClose:e,onSave:n}){const[r,s]=b.useState(t.selectedSize),[i,o]=b.useState(t.selectedColor),[a,l]=b.useState(t.quantity);return h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[h.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:e}),h.jsxs("div",{className:"relative bg-white rounded-lg p-4 sm:p-6 w-full max-w-md",children:[h.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Modifier l'article"}),h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Taille"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:t.sizes.map(c=>h.jsx("button",{onClick:()=>s(c),className:`px-3 py-1 rounded-md text-sm ${r===c?"bg-sky-600 text-white":"bg-gray-100 text-gray-800"}`,children:c},c))})]}),h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Couleur"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:t.colors.map(c=>h.jsx("button",{onClick:()=>o(c),className:`w-8 h-8 rounded-full border-2 ${i===c?"border-sky-600":"border-transparent"}`,style:{backgroundColor:c}},c))})]}),h.jsxs("div",{className:"mb-6",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantité"}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("button",{onClick:()=>l(Math.max(1,a-1)),className:"p-1 rounded-md bg-gray-100",children:h.jsx(dI,{className:"h-4 w-4"})}),h.jsx("span",{className:"w-12 text-center",children:a}),h.jsx("button",{onClick:()=>l(a+1),className:"p-1 rounded-md bg-gray-100",children:h.jsx(ja,{className:"h-4 w-4"})})]})]}),h.jsxs("div",{className:"flex space-x-4",children:[h.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Annuler"}),h.jsx("button",{onClick:()=>{n(t.id,r,i,a),e()},className:"flex-1 px-4 py-2 bg-sky-600 text-white rounded-md hover:bg-sky-700",children:"Enregistrer"})]})]})]})}function zM({isOpen:t,onClose:e}){const{state:n,dispatch:r}=Mc(),[s,i]=b.useState(null),o=(l,c)=>{c<1||r({type:"UPDATE_QUANTITY",payload:{id:l,quantity:c}})},a=(l,c,d,p)=>{r({type:"UPDATE_ITEM",payload:{id:l,size:c,color:d,quantity:p}})};return t?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:e}),h.jsx("div",{className:"absolute right-0 top-0 h-full w-full sm:max-w-md bg-white shadow-xl",children:h.jsxs("div",{className:"flex h-full flex-col",children:[h.jsxs("div",{className:"flex items-center justify-between border-b px-4 py-3",children:[h.jsx("h2",{className:"text-lg font-semibold",children:"Votre panier"}),h.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-500",children:h.jsx(wn,{className:"h-6 w-6"})})]}),h.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:n.items.length===0?h.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[h.jsx(Ig,{className:"h-12 w-12 mb-4"}),h.jsx("p",{children:"Votre panier est vide"})]}):h.jsx("ul",{className:"divide-y divide-gray-200",children:n.items.map(l=>h.jsx("li",{className:"py-4",children:h.jsxs("div",{className:"flex items-start space-x-4",children:[h.jsx("img",{src:l.images[0],alt:l.name,className:"h-20 w-20 rounded-md object-cover"}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:l.name}),h.jsxs("p",{className:"text-sm text-gray-500",children:["Taille: ",l.selectedSize," | Couleur: ",l.selectedColor]}),h.jsxs("p",{className:"text-sm font-medium text-sky-600",children:[(l.price*l.quantity).toLocaleString()," FDJ"]})]}),h.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[h.jsx("button",{onClick:()=>i(l),className:"p-1 text-gray-400 hover:text-gray-500",children:h.jsx(lh,{className:"h-4 w-4"})}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("button",{onClick:()=>o(l.id,l.quantity-1),className:"p-1 text-gray-400 hover:text-gray-500",children:h.jsx(dI,{className:"h-4 w-4"})}),h.jsx("span",{className:"text-gray-600",children:l.quantity}),h.jsx("button",{onClick:()=>o(l.id,l.quantity+1),className:"p-1 text-gray-400 hover:text-gray-500",children:h.jsx(ja,{className:"h-4 w-4"})})]}),h.jsx("button",{onClick:()=>r({type:"REMOVE_ITEM",payload:l.id}),className:"text-sm text-red-500 hover:text-red-600",children:"Supprimer"})]})]})},`${l.id}-${l.selectedSize}-${l.selectedColor}`))})}),h.jsxs("div",{className:"border-t p-4",children:[h.jsxs("div",{className:"flex justify-between text-base font-medium text-gray-900 mb-4",children:[h.jsx("p",{children:"Total"}),h.jsxs("p",{children:[n.total.toLocaleString()," FDJ"]})]}),h.jsxs(fe,{to:"/checkout",onClick:e,className:`block w-full rounded-md bg-sky-600 px-4 py-3 text-center text-sm font-medium text-white hover:bg-sky-700 ${n.items.length===0?"opacity-50 cursor-not-allowed":""}`,disabled:n.items.length===0,children:["Commander (",n.items.length," article",n.items.length!==1?"s":"",")"]})]})]})})]}),s&&h.jsx(BM,{item:s,onClose:()=>i(null),onSave:a})]}):null}function $M({isOpen:t,onClose:e}){const[n,r]=b.useState(""),[s,i]=b.useState(""),[o,a]=b.useState(""),[l,c]=b.useState(!1),d=Gi(),p=async m=>{m.preventDefault(),a(""),c(!0);try{await dT(ah,n,s),e(),d("/admin/dashboard")}catch{a("Email ou mot de passe incorrect")}finally{c(!1)}};return t?h.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50 backdrop-blur-sm",children:h.jsx("div",{className:"flex items-center justify-center min-h-screen px-4",children:h.jsxs("div",{className:"relative bg-white rounded-2xl w-full max-w-md p-8 shadow-2xl transform transition-all",onClick:m=>m.stopPropagation(),children:[h.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors",children:h.jsx(wn,{className:"w-5 h-5"})}),h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("div",{className:"bg-sky-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx(hI,{className:"h-8 w-8 text-sky-600"})}),h.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Administration"}),h.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Connectez-vous pour accéder au tableau de bord"})]}),o&&h.jsx("div",{className:"mb-6 bg-red-50 border-l-4 border-red-500 p-4 rounded",children:h.jsxs("div",{className:"flex items-center",children:[h.jsx("div",{className:"flex-shrink-0",children:h.jsx(wn,{className:"h-5 w-5 text-red-500"})}),h.jsx("div",{className:"ml-3",children:h.jsx("p",{className:"text-sm text-red-700",children:o})})]})}),h.jsxs("form",{onSubmit:p,className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),h.jsxs("div",{className:"mt-1 relative",children:[h.jsx("input",{type:"email",id:"email",value:n,onChange:m=>r(m.target.value),className:"pl-10 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-2 focus:ring-sky-500 focus:border-transparent",required:!0}),h.jsx(Tg,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"})]})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Mot de passe"}),h.jsxs("div",{className:"mt-1 relative",children:[h.jsx("input",{type:"password",id:"password",value:s,onChange:m=>i(m.target.value),className:"pl-10 block w-full rounded-lg border-gray-300 shadow-sm focus:ring-2 focus:ring-sky-500 focus:border-transparent",required:!0}),h.jsx(NM,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"})]})]}),h.jsxs("div",{className:"flex flex-col space-y-3",children:[h.jsx("button",{type:"submit",disabled:l,className:`w-full py-3 px-4 bg-sky-600 hover:bg-sky-700 text-white rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500 ${l?"opacity-50 cursor-not-allowed":""}`,children:l?h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Connexion en cours..."]}):"Se connecter"}),h.jsx("button",{type:"button",onClick:e,className:"w-full py-3 px-4 bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-lg font-medium transition-colors",children:"Annuler"})]})]})]})})}):null}function qM(){const[t,e]=b.useState(!1),[n,r]=b.useState(!1),[s,i]=b.useState(!1),[o,a]=b.useState(!1),l=Ki(),{state:c}=Mc(),{favorites:d}=wg();iI(),b.useEffect(()=>{e(!1)},[l]);const p=m=>{m.ctrlKey&&m.altKey&&m.key==="a"&&(m.preventDefault(),a(!0))};return b.useEffect(()=>(window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)),[]),h.jsxs("nav",{className:"bg-white shadow-md fixed w-full z-50 top-0",children:[h.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[h.jsxs("div",{className:"flex justify-between h-16",children:[h.jsx("div",{className:"flex items-center",children:h.jsx(fe,{to:"/",className:"text-2xl font-bold text-sky-600",children:"AuraShop"})}),h.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[h.jsx(fe,{to:"/",className:"text-gray-600 hover:text-sky-600 transition-colors",children:"Accueil"}),h.jsx(fe,{to:"/hommes",className:"text-gray-600 hover:text-sky-600 transition-colors",children:"Hommes"}),h.jsx(fe,{to:"/femmes",className:"text-gray-600 hover:text-sky-600 transition-colors",children:"Femmes"}),h.jsx(fe,{to:"/enfants",className:"text-gray-600 hover:text-sky-600 transition-colors",children:"Enfants"}),h.jsx(fe,{to:"/about",className:"text-gray-600 hover:text-sky-600 transition-colors",children:"À propos"}),h.jsx(fe,{to:"/contact",className:"text-gray-600 hover:text-sky-600 transition-colors",children:"Contact"})]}),h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx("button",{className:"hidden md:flex text-gray-600 hover:text-sky-600 transition-colors",onClick:()=>i(!s),children:h.jsx(Sd,{className:"h-5 w-5"})}),h.jsxs(fe,{to:"/favoris",className:"text-gray-600 hover:text-sky-600 relative transition-colors",children:[h.jsx(cI,{className:"h-5 w-5"}),d.length>0&&h.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center",children:d.length})]}),h.jsxs("button",{className:"text-gray-600 hover:text-sky-600 relative transition-colors",onClick:()=>r(!0),children:[h.jsx(fI,{className:"h-5 w-5"}),c.items.length>0&&h.jsx("span",{className:"absolute -top-2 -right-2 bg-green-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center",children:c.items.length})]}),h.jsx("button",{className:"md:hidden text-gray-600 hover:text-sky-600 transition-colors",onClick:()=>e(!t),children:t?h.jsx(wn,{className:"h-6 w-6"}):h.jsx(DM,{className:"h-6 w-6"})})]})]}),s&&h.jsx("div",{className:"absolute left-0 right-0 bg-white p-4 shadow-lg border-t",children:h.jsxs("div",{className:"max-w-3xl mx-auto relative",children:[h.jsx("input",{type:"search",placeholder:"Rechercher un produit...",className:"w-full px-4 py-2 pl-10 pr-4 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent"}),h.jsx(Sd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),h.jsx("button",{onClick:()=>i(!1),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:h.jsx(wn,{className:"h-5 w-5"})})]})}),h.jsx("div",{className:`md:hidden transition-all duration-300 ease-in-out ${t?"max-h-screen opacity-100 visible":"max-h-0 opacity-0 invisible"}`,children:h.jsxs("div",{className:"py-4 space-y-4 bg-white",children:[h.jsx("div",{className:"px-4 mb-4",children:h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"search",placeholder:"Rechercher un produit...",className:"w-full px-4 py-2 pl-10 pr-4 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent"}),h.jsx(Sd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"})]})}),h.jsxs("div",{className:"space-y-2 px-4",children:[h.jsx(fe,{to:"/",className:"block py-2 text-gray-600 hover:text-sky-600 transition-colors",children:"Accueil"}),h.jsx(fe,{to:"/hommes",className:"block py-2 text-gray-600 hover:text-sky-600 transition-colors",children:"Hommes"}),h.jsx(fe,{to:"/femmes",className:"block py-2 text-gray-600 hover:text-sky-600 transition-colors",children:"Femmes"}),h.jsx(fe,{to:"/enfants",className:"block py-2 text-gray-600 hover:text-sky-600 transition-colors",children:"Enfants"}),h.jsx(fe,{to:"/about",className:"block py-2 text-gray-600 hover:text-sky-600 transition-colors",children:"À propos"}),h.jsx(fe,{to:"/contact",className:"block py-2 text-gray-600 hover:text-sky-600 transition-colors",children:"Contact"})]})]})})]}),h.jsx(zM,{isOpen:n,onClose:()=>r(!1)}),h.jsx($M,{isOpen:o,onClose:()=>a(!1)})]})}function WM(){return h.jsxs("footer",{className:"bg-gray-900 text-gray-300",children:[h.jsx("div",{className:"max-w-7xl mx-auto px-4 py-12",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"AuraShop"}),h.jsx("p",{className:"text-gray-400 mb-4",children:"Votre mode, votre style, livré chez vous à Djibouti."}),h.jsxs("div",{className:"flex space-x-4",children:[h.jsx("a",{href:"https://www.facebook.com/profile.php?id=61556557785486",className:"hover:text-sky-500 transition-colors",target:"_blank",children:h.jsx(PM,{className:"w-5 h-5"})}),h.jsx("a",{href:"https://www.instagram.com/aura_shop_djibouti/",className:"hover:text-sky-500 transition-colors",target:"_blank",children:h.jsx(bM,{className:"w-5 h-5"})}),h.jsx("a",{href:"https://twitter.com",className:"hover:text-sky-500 transition-colors",target:"_blank",children:h.jsx(MM,{className:"w-5 h-5"})})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Navigation rapide"}),h.jsxs("ul",{className:"space-y-2",children:[h.jsx("li",{children:h.jsx(fe,{to:"/",className:"hover:text-sky-500 transition-colors",children:"Accueil"})}),h.jsx("li",{children:h.jsx(fe,{to:"/hommes",className:"hover:text-sky-500 transition-colors",children:"Hommes"})}),h.jsx("li",{children:h.jsx(fe,{to:"/femmes",className:"hover:text-sky-500 transition-colors",children:"Femmes"})}),h.jsx("li",{children:h.jsx(fe,{to:"/enfants",className:"hover:text-sky-500 transition-colors",children:"Enfants"})}),h.jsx("li",{children:h.jsx(fe,{to:"/about",className:"hover:text-sky-500 transition-colors",children:"À propos"})}),h.jsx("li",{children:h.jsx(fe,{to:"/contact",className:"hover:text-sky-500 transition-colors",children:"Contact"})})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Contact"}),h.jsxs("ul",{className:"space-y-4",children:[h.jsxs("li",{className:"flex items-center",children:[h.jsx(Sg,{className:"w-5 h-5 mr-3 text-sky-500"}),h.jsx("span",{children:"+253 77 55 20 28 "})]}),h.jsxs("li",{className:"flex items-center",children:[h.jsx(Tg,{className:"w-5 h-5 mr-3 text-sky-500"}),h.jsx("span",{children:"djibouti.aura@gmail.com"})]}),h.jsxs("li",{className:"flex items-center",children:[h.jsx(Eg,{className:"w-5 h-5 mr-3 text-sky-500"}),h.jsx("span",{children:"7/7j 24/24h"})]})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Newsletter"}),h.jsx("p",{className:"text-gray-400 mb-4",children:"Restez informé(e) des nouveautés et promotions."}),h.jsxs("form",{className:"flex",children:[h.jsx("input",{type:"email",placeholder:"Votre email",className:"flex-1 px-4 py-2 bg-gray-800 rounded-l-lg focus:outline-none focus:ring-1 focus:ring-sky-500"}),h.jsx("button",{type:"submit",className:"px-4 py-2 bg-sky-600 text-white rounded-r-lg hover:bg-sky-700 transition-colors",children:h.jsx(VM,{className:"w-5 h-5"})})]})]})]})}),h.jsx("div",{className:"border-t border-gray-800",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:h.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[h.jsx("p",{className:"text-sm text-gray-400",children:"© 2024 AuraShop. Tous droits réservés."}),h.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[h.jsx(fe,{to:"",className:"text-sm text-gray-400 hover:text-sky-500 transition-colors",children:"Politique de confidentialité"}),h.jsx(fe,{to:"",className:"text-sm text-gray-400 hover:text-sky-500 transition-colors",children:"Conditions d'utilisation"})]})]})})})]})}function HM(){return h.jsxs("div",{className:"relative min-h-[400px] md:min-h-[500px] lg:h-[600px] bg-gradient-to-r from-sky-100 to-green-50",children:[h.jsx("div",{className:"absolute inset-0",children:h.jsx("img",{src:"https://images.unsplash.com/photo-1441986300917-64674bd600d8",alt:"Fashion Store",className:"w-full h-full object-cover opacity-20"})}),h.jsx("div",{className:"relative h-full max-w-7xl mx-auto px-4 lg:px-8 flex items-center",children:h.jsxs("div",{className:"max-w-xl",children:[h.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-gray-800 mb-4 md:mb-6",children:"Découvrez votre style unique"}),h.jsx("p",{className:"text-base md:text-lg lg:text-xl text-gray-600 mb-6 md:mb-8",children:"Les dernières tendances de la mode à Djibouti. Des vêtements de qualité pour toute la famille."}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[h.jsxs(fe,{to:"/hommes",className:"bg-sky-600 text-white px-6 py-3 rounded-lg flex items-center justify-center space-x-2 hover:bg-sky-700 transition-colors text-sm md:text-base",children:[h.jsx("span",{children:"Collection Hommes"}),h.jsx(W_,{className:"w-5 h-5"})]}),h.jsxs(fe,{to:"/femmes",className:"bg-white text-sky-600 px-6 py-3 rounded-lg flex items-center justify-center space-x-2 hover:bg-gray-50 transition-colors text-sm md:text-base",children:[h.jsx("span",{children:"Collection Femmes"}),h.jsx(W_,{className:"w-5 h-5"})]})]})]})})]})}const KM=[{id:"1",name:"Robe d'été florale",price:12e3,image:"https://images.unsplash.com/photo-1515372039744-b8f02a3ae446?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80"},{id:"2",name:"Chemise lin homme",price:8500,image:"https://images.unsplash.com/photo-1586363104862-3a5e2ab60d99?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80"},{id:"3",name:"Ensemble enfant",price:6e3,image:"https://images.unsplash.com/photo-1522771930-78848d9293e8?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80"}];function GM(){return h.jsx("section",{className:"py-16 bg-white",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[h.jsxs("div",{className:"flex items-center mb-8",children:[h.jsx(OM,{className:"w-6 h-6 text-sky-600 mr-2"}),h.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Produits en vedette"})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:KM.map(t=>h.jsxs("div",{className:"group",children:[h.jsxs("div",{className:"relative overflow-hidden rounded-lg",children:[h.jsx("img",{src:t.image,alt:t.name,className:"w-full h-80 object-cover transform group-hover:scale-105 transition-transform "}),h.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-opacity"})]}),h.jsxs("div",{className:"mt-4",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t.name}),h.jsxs("p",{className:"text-sky-600 font-medium",children:[t.price.toLocaleString()," FDJ"]})]})]},t.id))})]})})}function QM({images:t,onClose:e,initialIndex:n=0}){const[r,s]=b.useState(n),i=()=>{s(a=>a===0?t.length-1:a-1)},o=()=>{s(a=>a===t.length-1?0:a+1)};return h.jsxs("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-90 flex items-center justify-center",children:[h.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white hover:text-gray-300 transition-colors",children:h.jsx(wn,{className:"w-8 h-8"})}),t.length>1&&h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:i,className:"absolute left-4 text-white hover:text-gray-300 transition-colors",children:h.jsx(SM,{className:"w-8 h-8"})}),h.jsx("button",{onClick:o,className:"absolute right-4 text-white hover:text-gray-300 transition-colors",children:h.jsx(IM,{className:"w-8 h-8"})})]}),h.jsxs("div",{className:"relative max-w-4xl max-h-[90vh] w-full mx-4",children:[h.jsx("img",{src:t[r],alt:`Preview ${r+1}`,className:"w-full h-full object-contain"}),t.length>1&&h.jsxs("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black bg-opacity-50 text-white px-3 py-1 rounded-full text-sm",children:[r+1," / ",t.length]})]})]})}function nl({product:t}){const[e,n]=b.useState(t.sizes[0]),[r,s]=b.useState(t.colors[0]),[i,o]=b.useState(!1),{dispatch:a}=Mc(),{addToFavorites:l,removeFromFavorites:c,isFavorite:d}=wg(),p=()=>{a({type:"ADD_ITEM",payload:{product:t,size:e,color:r}})},m=()=>{d(t.id)?c(t.id):l(t)};return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-3 sm:p-4 group",children:[h.jsxs("div",{className:"relative overflow-hidden rounded-lg mb-3 sm:mb-4",children:[h.jsx("img",{src:t.images[0],alt:t.name,className:"w-full aspect-[3/4] object-cover transform group-hover:scale-105 transition-transform duration-300"}),h.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-opacity"}),h.jsxs("div",{className:"absolute top-2 sm:top-4 right-2 sm:right-4 space-y-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[h.jsx("button",{onClick:m,className:`bg-white p-2 rounded-full shadow-lg transition-colors ${d(t.id)?"text-red-500 hover:text-red-600":"text-gray-400 hover:text-red-500"}`,children:h.jsx(cI,{className:"w-4 sm:w-5 h-4 sm:h-5",fill:d(t.id)?"currentColor":"none"})}),h.jsx("button",{className:"bg-white p-2 rounded-full shadow-lg hover:bg-sky-50",onClick:()=>o(!0),children:h.jsx(kM,{className:"w-4 sm:w-5 h-4 sm:h-5 text-sky-600"})})]})]}),h.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[h.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-800 line-clamp-2",children:t.name}),h.jsxs("p",{className:"text-sky-600 font-medium",children:[t.price.toLocaleString()," FDJ"]}),h.jsx("div",{className:"flex flex-wrap gap-1 sm:gap-2",children:t.sizes.map(_=>h.jsx("button",{onClick:()=>n(_),className:`px-2 sm:px-3 py-1 rounded-md text-xs sm:text-sm ${e===_?"bg-sky-600 text-white":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:_},_))}),h.jsx("div",{className:"flex flex-wrap gap-1 sm:gap-2",children:t.colors.map(_=>h.jsx("button",{onClick:()=>s(_),className:`w-6 sm:w-8 h-6 sm:h-8 rounded-full border-2 ${r===_?"border-sky-600":"border-transparent"}`,style:{backgroundColor:_}},_))}),h.jsxs("button",{onClick:p,className:"w-full mt-2 sm:mt-4 bg-sky-600 text-white py-2 rounded-lg hover:bg-sky-700 transition-colors flex items-center justify-center text-sm sm:text-base",children:[h.jsx(fI,{className:"w-4 sm:w-5 h-4 sm:h-5 mr-2"}),"Ajouter au panier"]})]})]}),i&&h.jsx(QM,{images:t.images,onClose:()=>o(!1)})]})}function XM(){const[t,e]=b.useState([]),[n,r]=b.useState(!0);return b.useEffect(()=>{(async()=>{try{const i=to(tr(dt,"products"),YO(6)),a=(await Fs(i)).docs.map(l=>({id:l.id,...l.data()}));e(a)}catch(i){console.error("Erreur lors de la récupération des produits:",i)}finally{r(!1)}})()},[]),n?h.jsx("div",{className:"py-8 md:py-12 lg:py-16 bg-gray-50",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsx("div",{className:"flex justify-center items-center h-64",children:h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-sky-600"})})})}):h.jsx("section",{className:"py-8 md:py-12 lg:py-16 bg-gray-50",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[h.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6 md:mb-8",children:"Nos Produits"}),t.length===0?h.jsx("p",{className:"text-center text-gray-500",children:"Aucun produit disponible pour le moment."}):h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8",children:t.map(s=>h.jsx(nl,{product:s},s.id))})]})})}function YM(){return h.jsxs("main",{className:"pt-16",children:[h.jsx(HM,{}),h.jsx(GM,{}),h.jsx(XM,{})]})}function JM(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}function uh(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const ip=t=>Array.isArray(t);function pI(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Da(t){return typeof t=="string"||Array.isArray(t)}function G_(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function kg(t,e,n,r){if(typeof e=="function"){const[s,i]=G_(r);e=e(n!==void 0?n:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=G_(r);e=e(n!==void 0?n:t.custom,s,i)}return e}function ch(t,e,n){const r=t.getProps();return kg(r,e,n!==void 0?n:r.custom,t)}const Pg=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Cg=["initial",...Pg],rl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Us=new Set(rl),zn=t=>t*1e3,$n=t=>t/1e3,ZM={type:"spring",stiffness:500,damping:25,restSpeed:10},e4=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),t4={type:"keyframes",duration:.8},n4={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},r4=(t,{keyframes:e})=>e.length>2?t4:Us.has(t)?t.startsWith("scale")?e4(e[1]):ZM:n4;function bg(t,e){return t?t[e]||t.default||t:void 0}const s4={skipAnimations:!1,useManualTiming:!1},i4=t=>t!==null;function hh(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(i4),i=e&&n!=="loop"&&e%2===1?0:s.length-1;return!i||r===void 0?s[i]:r}const pt=t=>t;function o4(t){let e=new Set,n=new Set,r=!1,s=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){i.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,d=!1,p=!1)=>{const _=p&&r?e:n;return d&&i.add(c),_.has(c)||_.add(c),c},cancel:c=>{n.delete(c),i.delete(c)},process:c=>{if(o=c,r){s=!0;return}r=!0,[e,n]=[n,e],n.clear(),e.forEach(a),r=!1,s&&(s=!1,l.process(c))}};return l}const Xl=["read","resolveKeyframes","update","preRender","render","postRender"],a4=40;function mI(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=Xl.reduce((x,v)=>(x[v]=o4(i),x),{}),{read:a,resolveKeyframes:l,update:c,preRender:d,render:p,postRender:m}=o,_=()=>{const x=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(x-s.timestamp,a4),1),s.timestamp=x,s.isProcessing=!0,a.process(s),l.process(s),c.process(s),d.process(s),p.process(s),m.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(_))},y=()=>{n=!0,r=!0,s.isProcessing||t(_)};return{schedule:Xl.reduce((x,v)=>{const S=o[v];return x[v]=(R,O=!1,M=!1)=>(n||y(),S.schedule(R,O,M)),x},{}),cancel:x=>{for(let v=0;v<Xl.length;v++)o[Xl[v]].cancel(x)},state:s,steps:o}}const{schedule:ce,cancel:$r,state:Ge,steps:Ad}=mI(typeof requestAnimationFrame<"u"?requestAnimationFrame:pt,!0),gI=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,l4=1e-7,u4=12;function c4(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=gI(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>l4&&++a<u4);return o}function sl(t,e,n,r){if(t===e&&n===r)return pt;const s=i=>c4(i,0,1,t,n);return i=>i===0||i===1?i:gI(s(i),e,r)}const yI=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,vI=t=>e=>1-t(1-e),_I=sl(.33,1.53,.69,.99),Ng=vI(_I),xI=yI(Ng),wI=t=>(t*=2)<1?.5*Ng(t):.5*(2-Math.pow(2,-10*(t-1))),Rg=t=>1-Math.sin(Math.acos(t)),EI=vI(Rg),TI=yI(Rg),SI=t=>/^0[^.\s]+$/u.test(t);function h4(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||SI(t):!0}let op=pt;const II=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),AI=t=>e=>typeof e=="string"&&e.startsWith(t),kI=AI("--"),d4=AI("var(--"),jg=t=>d4(t)?f4.test(t.split("/*")[0].trim()):!1,f4=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,p4=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function m4(t){const e=p4.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function PI(t,e,n=1){const[r,s]=m4(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return II(o)?parseFloat(o):o}return jg(s)?PI(s,e,n+1):s}const qr=(t,e,n)=>n>e?e:n<t?t:n,no={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Va={...no,transform:t=>qr(0,1,t)},Yl={...no,default:1},il=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),lr=il("deg"),En=il("%"),K=il("px"),g4=il("vh"),y4=il("vw"),Q_={...En,parse:t=>En.parse(t)/100,transform:t=>En.transform(t*100)},v4=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),X_=t=>t===no||t===K,Y_=(t,e)=>parseFloat(t.split(", ")[e]),J_=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return Y_(s[1],e);{const i=r.match(/^matrix\((.+)\)$/u);return i?Y_(i[1],t):0}},_4=new Set(["x","y","z"]),x4=rl.filter(t=>!_4.has(t));function w4(t){const e=[];return x4.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Fi={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:J_(4,13),y:J_(5,14)};Fi.translateX=Fi.x;Fi.translateY=Fi.y;const CI=t=>e=>e.test(t),E4={test:t=>t==="auto",parse:t=>t},bI=[no,K,En,lr,y4,g4,E4],Z_=t=>bI.find(CI(t)),xs=new Set;let ap=!1,lp=!1;function NI(){if(lp){const t=Array.from(xs).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=w4(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var a;(a=r.getValue(i))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}lp=!1,ap=!1,xs.forEach(t=>t.complete()),xs.clear()}function RI(){xs.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(lp=!0)})}function T4(){RI(),NI()}class Dg{constructor(e,n,r,s,i,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(xs.add(this),ap||(ap=!0,ce.read(RI),ce.resolveKeyframes(NI))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;for(let i=0;i<e.length;i++)if(e[i]===null)if(i===0){const o=s==null?void 0:s.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),s&&o===void 0&&s.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),xs.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,xs.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const ea=t=>Math.round(t*1e5)/1e5,Vg=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function S4(t){return t==null}const I4=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Og=(t,e)=>n=>!!(typeof n=="string"&&I4.test(n)&&n.startsWith(t)||e&&!S4(n)&&Object.prototype.hasOwnProperty.call(n,e)),jI=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,a]=r.match(Vg);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},A4=t=>qr(0,255,t),kd={...no,transform:t=>Math.round(A4(t))},ms={test:Og("rgb","red"),parse:jI("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+kd.transform(t)+", "+kd.transform(e)+", "+kd.transform(n)+", "+ea(Va.transform(r))+")"};function k4(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const up={test:Og("#"),parse:k4,transform:ms.transform},ui={test:Og("hsl","hue"),parse:jI("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+En.transform(ea(e))+", "+En.transform(ea(n))+", "+ea(Va.transform(r))+")"},lt={test:t=>ms.test(t)||up.test(t)||ui.test(t),parse:t=>ms.test(t)?ms.parse(t):ui.test(t)?ui.parse(t):up.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ms.transform(t):ui.transform(t)},P4=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function C4(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Vg))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(P4))===null||n===void 0?void 0:n.length)||0)>0}const DI="number",VI="color",b4="var",N4="var(",ex="${}",R4=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Oa(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=e.replace(R4,l=>(lt.test(l)?(r.color.push(i),s.push(VI),n.push(lt.parse(l))):l.startsWith(N4)?(r.var.push(i),s.push(b4),n.push(l)):(r.number.push(i),s.push(DI),n.push(parseFloat(l))),++i,ex)).split(ex);return{values:n,split:a,indexes:r,types:s}}function OI(t){return Oa(t).values}function LI(t){const{split:e,types:n}=Oa(t),r=e.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=e[o],s[o]!==void 0){const a=n[o];a===DI?i+=ea(s[o]):a===VI?i+=lt.transform(s[o]):i+=s[o]}return i}}const j4=t=>typeof t=="number"?0:t;function D4(t){const e=OI(t);return LI(t)(e.map(j4))}const Wr={test:C4,parse:OI,createTransformer:LI,getAnimatableNone:D4},V4=new Set(["brightness","contrast","saturate","opacity"]);function O4(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Vg)||[];if(!r)return t;const s=n.replace(r,"");let i=V4.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const L4=/\b([a-z-]*)\(.*?\)/gu,cp={...Wr,getAnimatableNone:t=>{const e=t.match(L4);return e?e.map(O4).join(" "):t}},M4={borderWidth:K,borderTopWidth:K,borderRightWidth:K,borderBottomWidth:K,borderLeftWidth:K,borderRadius:K,radius:K,borderTopLeftRadius:K,borderTopRightRadius:K,borderBottomRightRadius:K,borderBottomLeftRadius:K,width:K,maxWidth:K,height:K,maxHeight:K,top:K,right:K,bottom:K,left:K,padding:K,paddingTop:K,paddingRight:K,paddingBottom:K,paddingLeft:K,margin:K,marginTop:K,marginRight:K,marginBottom:K,marginLeft:K,backgroundPositionX:K,backgroundPositionY:K},F4={rotate:lr,rotateX:lr,rotateY:lr,rotateZ:lr,scale:Yl,scaleX:Yl,scaleY:Yl,scaleZ:Yl,skew:lr,skewX:lr,skewY:lr,distance:K,translateX:K,translateY:K,translateZ:K,x:K,y:K,z:K,perspective:K,transformPerspective:K,opacity:Va,originX:Q_,originY:Q_,originZ:K},tx={...no,transform:Math.round},Lg={...M4,...F4,zIndex:tx,size:K,fillOpacity:Va,strokeOpacity:Va,numOctaves:tx},U4={...Lg,color:lt,backgroundColor:lt,outlineColor:lt,fill:lt,stroke:lt,borderColor:lt,borderTopColor:lt,borderRightColor:lt,borderBottomColor:lt,borderLeftColor:lt,filter:cp,WebkitFilter:cp},Mg=t=>U4[t];function MI(t,e){let n=Mg(t);return n!==cp&&(n=Wr),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const B4=new Set(["auto","none","0"]);function z4(t,e,n){let r=0,s;for(;r<t.length&&!s;){const i=t[r];typeof i=="string"&&!B4.has(i)&&Oa(i).values.length&&(s=t[r]),r++}if(s&&n)for(const i of e)t[i]=MI(n,s)}class FI extends Dg{constructor(e,n,r,s,i){super(e,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),jg(c))){const d=PI(c,n.current);d!==void 0&&(e[l]=d),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!v4.has(r)||e.length!==2)return;const[s,i]=e,o=Z_(s),a=Z_(i);if(o!==a)if(X_(o)&&X_(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)h4(e[s])&&r.push(s);r.length&&z4(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Fi[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const i=n.getValue(r);i&&i.jump(this.measuredOrigin,!1);const o=s.length-1,a=s[o];s[o]=Fi[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function Fg(t){return typeof t=="function"}let xu;function $4(){xu=void 0}const Tn={now:()=>(xu===void 0&&Tn.set(Ge.isProcessing||s4.useManualTiming?Ge.timestamp:performance.now()),xu),set:t=>{xu=t,queueMicrotask($4)}},nx=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Wr.test(t)||t==="0")&&!t.startsWith("url("));function q4(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function W4(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=nx(s,e),a=nx(i,e);return!o||!a?!1:q4(t)||(n==="spring"||Fg(n))&&r}const H4=40;class UI{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Tn.now(),this.options={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>H4?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&T4(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Tn.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:i,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!W4(e,r,s,i))if(o)this.options.duration=0;else{l==null||l(hh(e,this.options,n)),a==null||a(),this.resolveFinishedPromise();return}const d=this.initPlayback(e,n);d!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...d},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function BI(t,e){return e?t*(1e3/e):0}const K4=5;function zI(t,e,n){const r=Math.max(e-K4,0);return BI(n-t(r),e-r)}const Pd=.001,G4=.01,Q4=10,X4=.05,Y4=1;function J4({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let s,i,o=1-e;o=qr(X4,Y4,o),t=qr(G4,Q4,$n(t)),o<1?(s=c=>{const d=c*o,p=d*t,m=d-n,_=hp(c,o),y=Math.exp(-p);return Pd-m/_*y},i=c=>{const p=c*o*t,m=p*n+n,_=Math.pow(o,2)*Math.pow(c,2)*t,y=Math.exp(-p),I=hp(Math.pow(c,2),o);return(-s(c)+Pd>0?-1:1)*((m-_)*y)/I}):(s=c=>{const d=Math.exp(-c*t),p=(c-n)*t+1;return-Pd+d*p},i=c=>{const d=Math.exp(-c*t),p=(n-c)*(t*t);return d*p});const a=5/t,l=eF(s,i,a);if(t=zn(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const Z4=12;function eF(t,e,n){let r=n;for(let s=1;s<Z4;s++)r=r-t(r)/e(r);return r}function hp(t,e){return t*Math.sqrt(1-e*e)}const tF=["duration","bounce"],nF=["stiffness","damping","mass"];function rx(t,e){return e.some(n=>t[n]!==void 0)}function rF(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!rx(t,nF)&&rx(t,tF)){const n=J4(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function $I({keyframes:t,restDelta:e,restSpeed:n,...r}){const s=t[0],i=t[t.length-1],o={done:!1,value:s},{stiffness:a,damping:l,mass:c,duration:d,velocity:p,isResolvedFromDuration:m}=rF({...r,velocity:-$n(r.velocity||0)}),_=p||0,y=l/(2*Math.sqrt(a*c)),I=i-s,T=$n(Math.sqrt(a/c)),x=Math.abs(I)<5;n||(n=x?.01:2),e||(e=x?.005:.5);let v;if(y<1){const S=hp(T,y);v=R=>{const O=Math.exp(-y*T*R);return i-O*((_+y*T*I)/S*Math.sin(S*R)+I*Math.cos(S*R))}}else if(y===1)v=S=>i-Math.exp(-T*S)*(I+(_+T*I)*S);else{const S=T*Math.sqrt(y*y-1);v=R=>{const O=Math.exp(-y*T*R),M=Math.min(S*R,300);return i-O*((_+y*T*I)*Math.sinh(M)+S*I*Math.cosh(M))/S}}return{calculatedDuration:m&&d||null,next:S=>{const R=v(S);if(m)o.done=S>=d;else{let O=0;y<1&&(O=S===0?zn(_):zI(v,S,R));const M=Math.abs(O)<=n,k=Math.abs(i-R)<=e;o.done=M&&k}return o.value=o.done?i:R,o}}}function sx({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:d}){const p=t[0],m={done:!1,value:p},_=w=>a!==void 0&&w<a||l!==void 0&&w>l,y=w=>a===void 0?l:l===void 0||Math.abs(a-w)<Math.abs(l-w)?a:l;let I=n*e;const T=p+I,x=o===void 0?T:o(T);x!==T&&(I=x-p);const v=w=>-I*Math.exp(-w/r),S=w=>x+v(w),R=w=>{const A=v(w),P=S(w);m.done=Math.abs(A)<=c,m.value=m.done?x:P};let O,M;const k=w=>{_(m.value)&&(O=w,M=$I({keyframes:[m.value,y(m.value)],velocity:zI(S,w,m.value),damping:s,stiffness:i,restDelta:c,restSpeed:d}))};return k(0),{calculatedDuration:null,next:w=>{let A=!1;return!M&&O===void 0&&(A=!0,R(w),k(w)),O!==void 0&&w>=O?M.next(w-O):(!A&&R(w),m)}}}const sF=sl(.42,0,1,1),iF=sl(0,0,.58,1),qI=sl(.42,0,.58,1),oF=t=>Array.isArray(t)&&typeof t[0]!="number",Ug=t=>Array.isArray(t)&&typeof t[0]=="number",ix={linear:pt,easeIn:sF,easeInOut:qI,easeOut:iF,circIn:Rg,circInOut:TI,circOut:EI,backIn:Ng,backInOut:xI,backOut:_I,anticipate:wI},ox=t=>{if(Ug(t)){op(t.length===4);const[e,n,r,s]=t;return sl(e,n,r,s)}else if(typeof t=="string")return op(ix[t]!==void 0),ix[t];return t},aF=(t,e)=>n=>e(t(n)),qn=(...t)=>t.reduce(aF),Ui=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Te=(t,e,n)=>t+(e-t)*n;function Cd(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function lF({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=Cd(l,a,t+1/3),i=Cd(l,a,t),o=Cd(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function pc(t,e){return n=>n>0?e:t}const bd=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},uF=[up,ms,ui],cF=t=>uF.find(e=>e.test(t));function ax(t){const e=cF(t);if(!e)return!1;let n=e.parse(t);return e===ui&&(n=lF(n)),n}const lx=(t,e)=>{const n=ax(t),r=ax(e);if(!n||!r)return pc(t,e);const s={...n};return i=>(s.red=bd(n.red,r.red,i),s.green=bd(n.green,r.green,i),s.blue=bd(n.blue,r.blue,i),s.alpha=Te(n.alpha,r.alpha,i),ms.transform(s))},dp=new Set(["none","hidden"]);function hF(t,e){return dp.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function dF(t,e){return n=>Te(t,e,n)}function Bg(t){return typeof t=="number"?dF:typeof t=="string"?jg(t)?pc:lt.test(t)?lx:mF:Array.isArray(t)?WI:typeof t=="object"?lt.test(t)?lx:fF:pc}function WI(t,e){const n=[...t],r=n.length,s=t.map((i,o)=>Bg(i)(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function fF(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=Bg(t[s])(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function pF(t,e){var n;const r=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],a=t.indexes[o][s[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[i]=l,s[o]++}return r}const mF=(t,e)=>{const n=Wr.createTransformer(e),r=Oa(t),s=Oa(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?dp.has(t)&&!s.values.length||dp.has(e)&&!r.values.length?hF(t,e):qn(WI(pF(r,s),s.values),n):pc(t,e)};function HI(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Te(t,e,n):Bg(t)(t,e)}function gF(t,e,n){const r=[],s=n||HI,i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||pt:e;a=qn(l,a)}r.push(a)}return r}function yF(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(op(i===e.length),i===1)return()=>e[0];if(i===2&&t[0]===t[1])return()=>e[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=gF(e,r,s),a=o.length,l=c=>{let d=0;if(a>1)for(;d<t.length-2&&!(c<t[d+1]);d++);const p=Ui(t[d],t[d+1],c);return o[d](p)};return n?c=>l(qr(t[0],t[i-1],c)):l}function vF(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Ui(0,e,r);t.push(Te(n,1,s))}}function _F(t){const e=[0];return vF(e,t.length-1),e}function xF(t,e){return t.map(n=>n*e)}function wF(t,e){return t.map(()=>e||qI).splice(0,t.length-1)}function mc({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=oF(r)?r.map(ox):ox(r),i={done:!1,value:e[0]},o=xF(n&&n.length===e.length?n:_F(e),t),a=yF(o,e,{ease:Array.isArray(s)?s:wF(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}const ux=2e4;function EF(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<ux;)e+=n,r=t.next(e);return e>=ux?1/0:e}const TF=t=>{const e=({timestamp:n})=>t(n);return{start:()=>ce.update(e,!0),stop:()=>$r(e),now:()=>Ge.isProcessing?Ge.timestamp:Tn.now()}},SF={decay:sx,inertia:sx,tween:mc,keyframes:mc,spring:$I},IF=t=>t/100;class zg extends UI{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:s,keyframes:i}=this.options,o=(s==null?void 0:s.KeyframeResolver)||Dg,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(i,a,n,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=this.options,a=Fg(n)?n:SF[n]||mc;let l,c;a!==mc&&typeof e[0]!="number"&&(l=qn(IF,HI(e[0],e[1])),e=[0,100]);const d=a({...this.options,keyframes:e});i==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=EF(d));const{calculatedDuration:p}=d,m=p+s,_=m*(r+1)-s;return{generator:d,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:p,resolvedDuration:m,totalDuration:_}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:w}=this.options;return{done:!0,value:w[w.length-1]}}const{finalKeyframe:s,generator:i,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:d,resolvedDuration:p}=r;if(this.startTime===null)return i.next(0);const{delay:m,repeat:_,repeatType:y,repeatDelay:I,onUpdate:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-d/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const x=this.currentTime-m*(this.speed>=0?1:-1),v=this.speed>=0?x<0:x>d;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let S=this.currentTime,R=i;if(_){const w=Math.min(this.currentTime,d)/p;let A=Math.floor(w),P=w%1;!P&&w>=1&&(P=1),P===1&&A--,A=Math.min(A,_+1),!!(A%2)&&(y==="reverse"?(P=1-P,I&&(P-=I/p)):y==="mirror"&&(R=o)),S=qr(0,1,P)*p}const O=v?{done:!1,value:l[0]}:R.next(S);a&&(O.value=a(O.value));let{done:M}=O;!v&&c!==null&&(M=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return k&&s!==void 0&&(O.value=hh(l,this.options,s)),T&&T(O.value),k&&this.finish(),O}get duration(){const{resolved:e}=this;return e?$n(e.calculatedDuration):0}get time(){return $n(this.currentTime)}set time(e){e=zn(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=$n(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=TF,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const AF=new Set(["opacity","clipPath","filter","transform"]),kF=10,PF=(t,e)=>{let n="";const r=Math.max(Math.round(e/kF),2);for(let s=0;s<r;s++)n+=t(Ui(0,r-1,s))+", ";return`linear(${n.substring(0,n.length-2)})`};function $g(t){let e;return()=>(e===void 0&&(e=t()),e)}const CF={linearEasing:void 0};function bF(t,e){const n=$g(t);return()=>{var r;return(r=CF[e])!==null&&r!==void 0?r:n()}}const gc=bF(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function KI(t){return!!(typeof t=="function"&&gc()||!t||typeof t=="string"&&(t in fp||gc())||Ug(t)||Array.isArray(t)&&t.every(KI))}const Lo=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,fp={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Lo([0,.65,.55,1]),circOut:Lo([.55,0,1,.45]),backIn:Lo([.31,.01,.66,-.59]),backOut:Lo([.33,1.53,.69,.99])};function GI(t,e){if(t)return typeof t=="function"&&gc()?PF(t,e):Ug(t)?Lo(t):Array.isArray(t)?t.map(n=>GI(n,e)||fp.easeOut):fp[t]}function NF(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const d=GI(a,s);return Array.isArray(d)&&(c.easing=d),t.animate(c,{delay:r,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function cx(t,e){t.timeline=e,t.onfinish=null}const RF=$g(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),yc=10,jF=2e4;function DF(t){return Fg(t.type)||t.type==="spring"||!KI(t.ease)}function VF(t,e){const n=new zg({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const s=[];let i=0;for(;!r.done&&i<jF;)r=n.sample(i),s.push(r.value),i+=yc;return{times:void 0,keyframes:s,duration:i-yc,ease:"linear"}}const QI={anticipate:wI,backInOut:xI,circInOut:TI};function OF(t){return t in QI}class hx extends UI{constructor(e){super(e);const{name:n,motionValue:r,element:s,keyframes:i}=this.options;this.resolver=new FI(i,(o,a)=>this.onKeyframesResolved(o,a),n,r,s),this.resolver.scheduleResolve()}initPlayback(e,n){var r;let{duration:s=300,times:i,ease:o,type:a,motionValue:l,name:c,startTime:d}=this.options;if(!(!((r=l.owner)===null||r===void 0)&&r.current))return!1;if(typeof o=="string"&&gc()&&OF(o)&&(o=QI[o]),DF(this.options)){const{onComplete:m,onUpdate:_,motionValue:y,element:I,...T}=this.options,x=VF(e,T);e=x.keyframes,e.length===1&&(e[1]=e[0]),s=x.duration,i=x.times,o=x.ease,a="keyframes"}const p=NF(l.owner.current,c,e,{...this.options,duration:s,times:i,ease:o});return p.startTime=d??this.calcStartTime(),this.pendingTimeline?(cx(p,this.pendingTimeline),this.pendingTimeline=void 0):p.onfinish=()=>{const{onComplete:m}=this.options;l.set(hh(e,this.options,n)),m&&m(),this.cancel(),this.resolveFinishedPromise()},{animation:p,duration:s,times:i,type:a,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return $n(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return $n(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=zn(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return pt;const{animation:r}=n;cx(r,e)}return pt}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:s,type:i,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:d,onComplete:p,element:m,..._}=this.options,y=new zg({..._,keyframes:r,duration:s,type:i,ease:o,times:a,isGenerator:!0}),I=zn(this.time);c.setWithVelocity(y.sample(I-yc).value,y.sample(I).value,yc)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:s,repeatType:i,damping:o,type:a}=e;return RF()&&r&&AF.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!s&&i!=="mirror"&&o!==0&&a!=="inertia"}}const LF=$g(()=>window.ScrollTimeline!==void 0);class MF{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,n){return Promise.all(this.animations).then(e).catch(n)}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(s=>LF()&&s.attachTimeline?s.attachTimeline(e):n(s));return()=>{r.forEach((s,i)=>{s&&s(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function FF({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...d}){return!!Object.keys(d).length}const qg=(t,e,n,r={},s,i)=>o=>{const a=bg(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-zn(l);let d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:m=>{e.set(m),a.onUpdate&&a.onUpdate(m)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:i?void 0:s};FF(a)||(d={...d,...r4(t,d)}),d.duration&&(d.duration=zn(d.duration)),d.repeatDelay&&(d.repeatDelay=zn(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let p=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(p=!0)),p&&!i&&e.get()!==void 0){const m=hh(d.keyframes,a);if(m!==void 0)return ce.update(()=>{d.onUpdate(m),d.onComplete()}),new MF([])}return!i&&hx.supports(d)?new hx(d):new zg(d)},UF=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),BF=t=>ip(t)?t[t.length-1]||0:t;function Wg(t,e){t.indexOf(e)===-1&&t.push(e)}function Hg(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Kg{constructor(){this.subscriptions=[]}add(e){return Wg(this.subscriptions,e),()=>Hg(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const dx=30,zF=t=>!isNaN(parseFloat(t));class $F{constructor(e,n={}){this.version="11.11.17",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const i=Tn.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Tn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=zF(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Kg);const r=this.events[e].add(n);return e==="change"?()=>{r(),ce.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Tn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>dx)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,dx);return BI(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function La(t,e){return new $F(t,e)}function qF(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,La(n))}function WF(t,e){const n=ch(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const a=BF(i[o]);qF(t,o,a)}}const Gg=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),HF="framerAppearId",XI="data-"+Gg(HF);function YI(t){return t.props[XI]}const ft=t=>!!(t&&t.getVelocity);function KF(t){return!!(ft(t)&&t.add)}function pp(t,e){const n=t.getValue("willChange");if(KF(n))return n.add(e)}function GF({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function JI(t,e,{delay:n=0,transitionOverride:r,type:s}={}){var i;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],d=s&&t.animationState&&t.animationState.getState()[s];for(const p in l){const m=t.getValue(p,(i=t.latestValues[p])!==null&&i!==void 0?i:null),_=l[p];if(_===void 0||d&&GF(d,p))continue;const y={delay:n,...bg(o||{},p)};let I=!1;if(window.MotionHandoffAnimation){const x=YI(t);if(x){const v=window.MotionHandoffAnimation(x,p,ce);v!==null&&(y.startTime=v,I=!0)}}pp(t,p),m.start(qg(p,m,_,t.shouldReduceMotion&&Us.has(p)?{type:!1}:y,t,I));const T=m.animation;T&&c.push(T)}return a&&Promise.all(c).then(()=>{ce.update(()=>{a&&WF(t,a)})}),c}function mp(t,e,n={}){var r;const s=ch(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(i=n.transitionOverride);const o=s?()=>Promise.all(JI(t,s,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:p,staggerDirection:m}=i;return QF(t,e,d+c,p,m,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[c,d]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>d())}else return Promise.all([o(),a(n.delay)])}function QF(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,l=s===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(XF).forEach((c,d)=>{c.notify("AnimationStart",e),o.push(mp(c,e,{...i,delay:n+l(d)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function XF(t,e){return t.sortNodePosition(e)}function YF(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>mp(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=mp(t,e,n);else{const s=typeof e=="function"?ch(t,e,n.custom):e;r=Promise.all(JI(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const JF=Cg.length;function ZI(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?ZI(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<JF;n++){const r=Cg[n],s=t.props[r];(Da(s)||s===!1)&&(e[r]=s)}return e}const ZF=[...Pg].reverse(),e5=Pg.length;function t5(t){return e=>Promise.all(e.map(({animation:n,options:r})=>YF(t,n,r)))}function n5(t){let e=t5(t),n=fx(),r=!0;const s=l=>(c,d)=>{var p;const m=ch(t,d,l==="exit"?(p=t.presenceContext)===null||p===void 0?void 0:p.custom:void 0);if(m){const{transition:_,transitionEnd:y,...I}=m;c={...c,...I,...y}}return c};function i(l){e=l(t)}function o(l){const{props:c}=t,d=ZI(t.parent)||{},p=[],m=new Set;let _={},y=1/0;for(let T=0;T<e5;T++){const x=ZF[T],v=n[x],S=c[x]!==void 0?c[x]:d[x],R=Da(S),O=x===l?v.isActive:null;O===!1&&(y=T);let M=S===d[x]&&S!==c[x]&&R;if(M&&r&&t.manuallyAnimateOnMount&&(M=!1),v.protectedKeys={..._},!v.isActive&&O===null||!S&&!v.prevProp||uh(S)||typeof S=="boolean")continue;const k=r5(v.prevProp,S);let w=k||x===l&&v.isActive&&!M&&R||T>y&&R,A=!1;const P=Array.isArray(S)?S:[S];let N=P.reduce(s(x),{});O===!1&&(N={});const{prevResolvedValues:j={}}=v,C={...j,...N},yt=me=>{w=!0,m.has(me)&&(A=!0,m.delete(me)),v.needsAnimating[me]=!0;const z=t.getValue(me);z&&(z.liveStyle=!1)};for(const me in C){const z=N[me],G=j[me];if(_.hasOwnProperty(me))continue;let Y=!1;ip(z)&&ip(G)?Y=!pI(z,G):Y=z!==G,Y?z!=null?yt(me):m.add(me):z!==void 0&&m.has(me)?yt(me):v.protectedKeys[me]=!0}v.prevProp=S,v.prevResolvedValues=N,v.isActive&&(_={..._,...N}),r&&t.blockInitialAnimation&&(w=!1),w&&(!(M&&k)||A)&&p.push(...P.map(me=>({animation:me,options:{type:x}})))}if(m.size){const T={};m.forEach(x=>{const v=t.getBaseTarget(x),S=t.getValue(x);S&&(S.liveStyle=!0),T[x]=v??null}),p.push({animation:T})}let I=!!p.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(I=!1),r=!1,I?e(p):Promise.resolve()}function a(l,c){var d;if(n[l].isActive===c)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(m=>{var _;return(_=m.animationState)===null||_===void 0?void 0:_.setActive(l,c)}),n[l].isActive=c;const p=o(l);for(const m in n)n[m].protectedKeys={};return p}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=fx(),r=!0}}}function r5(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!pI(e,t):!1}function is(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function fx(){return{animate:is(!0),whileInView:is(),whileHover:is(),whileTap:is(),whileDrag:is(),whileFocus:is(),exit:is()}}class es{constructor(e){this.isMounted=!1,this.node=e}update(){}}class s5 extends es{constructor(e){super(e),e.animationState||(e.animationState=n5(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();uh(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let i5=0;class o5 extends es{constructor(){super(...arguments),this.id=i5++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const a5={animation:{Feature:s5},exit:{Feature:o5}},eA=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function dh(t,e="page"){return{point:{x:t[`${e}X`],y:t[`${e}Y`]}}}const l5=t=>e=>eA(e)&&t(e,dh(e));function Un(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Wn(t,e,n,r){return Un(t,e,l5(n),r)}const px=(t,e)=>Math.abs(t-e);function u5(t,e){const n=px(t.x,e.x),r=px(t.y,e.y);return Math.sqrt(n**2+r**2)}class tA{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=Rd(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,_=u5(p.offset,{x:0,y:0})>=3;if(!m&&!_)return;const{point:y}=p,{timestamp:I}=Ge;this.history.push({...y,timestamp:I});const{onStart:T,onMove:x}=this.handlers;m||(T&&T(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,p)},this.handlePointerMove=(p,m)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=Nd(m,this.transformPagePoint),ce.update(this.updatePoint,!0)},this.handlePointerUp=(p,m)=>{this.end();const{onEnd:_,onSessionEnd:y,resumeAnimation:I}=this.handlers;if(this.dragSnapToOrigin&&I&&I(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=Rd(p.type==="pointercancel"?this.lastMoveEventInfo:Nd(m,this.transformPagePoint),this.history);this.startEvent&&_&&_(p,T),y&&y(p,T)},!eA(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=dh(e),a=Nd(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Ge;this.history=[{...l,timestamp:c}];const{onSessionStart:d}=n;d&&d(e,Rd(a,this.history)),this.removeListeners=qn(Wn(this.contextWindow,"pointermove",this.handlePointerMove),Wn(this.contextWindow,"pointerup",this.handlePointerUp),Wn(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),$r(this.updatePoint)}}function Nd(t,e){return e?{point:e(t.point)}:t}function mx(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Rd({point:t},e){return{point:t,delta:mx(t,nA(e)),offset:mx(t,c5(e)),velocity:h5(e,.1)}}function c5(t){return t[0]}function nA(t){return t[t.length-1]}function h5(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=nA(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>zn(e)));)n--;if(!r)return{x:0,y:0};const i=$n(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function rA(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const gx=rA("dragHorizontal"),yx=rA("dragVertical");function sA(t){let e=!1;if(t==="y")e=yx();else if(t==="x")e=gx();else{const n=gx(),r=yx();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function iA(){const t=sA(!0);return t?(t(),!1):!0}function ci(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const oA=1e-4,d5=1-oA,f5=1+oA,aA=.01,p5=0-aA,m5=0+aA;function Ut(t){return t.max-t.min}function g5(t,e,n){return Math.abs(t-e)<=n}function vx(t,e,n,r=.5){t.origin=r,t.originPoint=Te(e.min,e.max,t.origin),t.scale=Ut(n)/Ut(e),t.translate=Te(n.min,n.max,t.origin)-t.originPoint,(t.scale>=d5&&t.scale<=f5||isNaN(t.scale))&&(t.scale=1),(t.translate>=p5&&t.translate<=m5||isNaN(t.translate))&&(t.translate=0)}function ta(t,e,n,r){vx(t.x,e.x,n.x,r?r.originX:void 0),vx(t.y,e.y,n.y,r?r.originY:void 0)}function _x(t,e,n){t.min=n.min+e.min,t.max=t.min+Ut(e)}function y5(t,e,n){_x(t.x,e.x,n.x),_x(t.y,e.y,n.y)}function xx(t,e,n){t.min=e.min-n.min,t.max=t.min+Ut(e)}function na(t,e,n){xx(t.x,e.x,n.x),xx(t.y,e.y,n.y)}function v5(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Te(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Te(n,t,r.max):Math.min(t,n)),t}function wx(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function _5(t,{top:e,left:n,bottom:r,right:s}){return{x:wx(t.x,n,s),y:wx(t.y,e,r)}}function Ex(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function x5(t,e){return{x:Ex(t.x,e.x),y:Ex(t.y,e.y)}}function w5(t,e){let n=.5;const r=Ut(t),s=Ut(e);return s>r?n=Ui(e.min,e.max-r,t.min):r>s&&(n=Ui(t.min,t.max-s,e.min)),qr(0,1,n)}function E5(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const gp=.35;function T5(t=gp){return t===!1?t=0:t===!0&&(t=gp),{x:Tx(t,"left","right"),y:Tx(t,"top","bottom")}}function Tx(t,e,n){return{min:Sx(t,e),max:Sx(t,n)}}function Sx(t,e){return typeof t=="number"?t:t[e]||0}const Ix=()=>({translate:0,scale:1,origin:0,originPoint:0}),hi=()=>({x:Ix(),y:Ix()}),Ax=()=>({min:0,max:0}),je=()=>({x:Ax(),y:Ax()});function Wt(t){return[t("x"),t("y")]}function lA({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function S5({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function I5(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function jd(t){return t===void 0||t===1}function yp({scale:t,scaleX:e,scaleY:n}){return!jd(t)||!jd(e)||!jd(n)}function us(t){return yp(t)||uA(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function uA(t){return kx(t.x)||kx(t.y)}function kx(t){return t&&t!=="0%"}function vc(t,e,n){const r=t-n,s=e*r;return n+s}function Px(t,e,n,r,s){return s!==void 0&&(t=vc(t,s,r)),vc(t,n,r)+e}function vp(t,e=0,n=1,r,s){t.min=Px(t.min,e,n,r,s),t.max=Px(t.max,e,n,r,s)}function cA(t,{x:e,y:n}){vp(t.x,e.translate,e.scale,e.originPoint),vp(t.y,n.translate,n.scale,n.originPoint)}const Cx=.999999999999,bx=1.0000000000001;function A5(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&fi(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,cA(t,o)),r&&us(i.latestValues)&&fi(t,i.latestValues))}e.x<bx&&e.x>Cx&&(e.x=1),e.y<bx&&e.y>Cx&&(e.y=1)}function di(t,e){t.min=t.min+e,t.max=t.max+e}function Nx(t,e,n,r,s=.5){const i=Te(t.min,t.max,s);vp(t,e,n,i,r)}function fi(t,e){Nx(t.x,e.x,e.scaleX,e.scale,e.originX),Nx(t.y,e.y,e.scaleY,e.scale,e.originY)}function hA(t,e){return lA(I5(t.getBoundingClientRect(),e))}function k5(t,e,n){const r=hA(t,n),{scroll:s}=e;return s&&(di(r.x,s.offset.x),di(r.y,s.offset.y)),r}const dA=({current:t})=>t?t.ownerDocument.defaultView:null,P5=new WeakMap;class C5{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=je(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(dh(d,"page").point)},i=(d,p)=>{const{drag:m,dragPropagation:_,onDragStart:y}=this.getProps();if(m&&!_&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=sA(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Wt(T=>{let x=this.getAxisMotionValue(T).get()||0;if(En.test(x)){const{projection:v}=this.visualElement;if(v&&v.layout){const S=v.layout.layoutBox[T];S&&(x=Ut(S)*(parseFloat(x)/100))}}this.originPoint[T]=x}),y&&ce.postRender(()=>y(d,p)),pp(this.visualElement,"transform");const{animationState:I}=this.visualElement;I&&I.setActive("whileDrag",!0)},o=(d,p)=>{const{dragPropagation:m,dragDirectionLock:_,onDirectionLock:y,onDrag:I}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:T}=p;if(_&&this.currentDirection===null){this.currentDirection=b5(T),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",p.point,T),this.updateAxis("y",p.point,T),this.visualElement.render(),I&&I(d,p)},a=(d,p)=>this.stop(d,p),l=()=>Wt(d=>{var p;return this.getAnimationState(d)==="paused"&&((p=this.getAxisMotionValue(d).animation)===null||p===void 0?void 0:p.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new tA(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:dA(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&ce.postRender(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Jl(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=v5(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&ci(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=_5(s.layoutBox,n):this.constraints=!1,this.elastic=T5(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Wt(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=E5(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ci(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=k5(r,s.root,this.visualElement.getTransformPagePoint());let o=x5(s.layout.layoutBox,i);if(n){const a=n(S5(o));this.hasMutatedConstraints=!!a,a&&(o=lA(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Wt(d=>{if(!Jl(d,n,this.currentDirection))return;let p=l&&l[d]||{};o&&(p={min:0,max:0});const m=s?200:1e6,_=s?40:1e7,y={type:"inertia",velocity:r?e[d]:0,bounceStiffness:m,bounceDamping:_,timeConstant:750,restDelta:1,restSpeed:10,...i,...p};return this.startAxisValueAnimation(d,y)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return pp(this.visualElement,e),r.start(qg(e,r,0,n,this.visualElement,!1))}stopAnimation(){Wt(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Wt(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Wt(n=>{const{drag:r}=this.getProps();if(!Jl(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-Te(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ci(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Wt(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=w5({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Wt(o=>{if(!Jl(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Te(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;P5.set(this.visualElement,this);const e=this.visualElement.current,n=Wn(e,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();ci(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),ce.read(r);const o=Un(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Wt(d=>{const p=this.getAxisMotionValue(d);p&&(this.originPoint[d]+=l[d].translate,p.set(p.get()+l[d].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=gp,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function Jl(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function b5(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class N5 extends es{constructor(e){super(e),this.removeGroupControls=pt,this.removeListeners=pt,this.controls=new C5(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||pt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Rx=t=>(e,n)=>{t&&ce.postRender(()=>t(e,n))};class R5 extends es{constructor(){super(...arguments),this.removePointerDownListener=pt}onPointerDown(e){this.session=new tA(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:dA(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Rx(e),onStart:Rx(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&ce.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=Wn(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Qg=b.createContext(null);function j5(){const t=b.useContext(Qg);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,s=b.useId();b.useEffect(()=>r(s),[]);const i=b.useCallback(()=>n&&n(s),[s,n]);return!e&&n?[!1,i]:[!0]}const fA=b.createContext({}),pA=b.createContext({}),wu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function jx(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ko={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(K.test(t))t=parseFloat(t);else return t;const n=jx(t,e.target.x),r=jx(t,e.target.y);return`${n}% ${r}%`}},D5={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Wr.parse(t);if(s.length>5)return r;const i=Wr.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const c=Te(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}},_c={};function V5(t){Object.assign(_c,t)}const{schedule:Xg,cancel:a3}=mI(queueMicrotask,!1);class O5 extends b.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;V5(L5),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),wu.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||ce.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Xg.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function mA(t){const[e,n]=j5(),r=b.useContext(fA);return h.jsx(O5,{...t,layoutGroup:r,switchLayoutGroup:b.useContext(pA),isPresent:e,safeToRemove:n})}const L5={borderRadius:{...ko,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ko,borderTopRightRadius:ko,borderBottomLeftRadius:ko,borderBottomRightRadius:ko,boxShadow:D5},gA=["TopLeft","TopRight","BottomLeft","BottomRight"],M5=gA.length,Dx=t=>typeof t=="string"?parseFloat(t):t,Vx=t=>typeof t=="number"||K.test(t);function F5(t,e,n,r,s,i){s?(t.opacity=Te(0,n.opacity!==void 0?n.opacity:1,U5(r)),t.opacityExit=Te(e.opacity!==void 0?e.opacity:1,0,B5(r))):i&&(t.opacity=Te(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<M5;o++){const a=`border${gA[o]}Radius`;let l=Ox(e,a),c=Ox(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||Vx(l)===Vx(c)?(t[a]=Math.max(Te(Dx(l),Dx(c),r),0),(En.test(c)||En.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Te(e.rotate||0,n.rotate||0,r))}function Ox(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const U5=yA(0,.5,EI),B5=yA(.5,.95,pt);function yA(t,e,n){return r=>r<t?0:r>e?1:n(Ui(t,e,r))}function Lx(t,e){t.min=e.min,t.max=e.max}function $t(t,e){Lx(t.x,e.x),Lx(t.y,e.y)}function Mx(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Fx(t,e,n,r,s){return t-=e,t=vc(t,1/n,r),s!==void 0&&(t=vc(t,1/s,r)),t}function z5(t,e=0,n=1,r=.5,s,i=t,o=t){if(En.test(e)&&(e=parseFloat(e),e=Te(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Te(i.min,i.max,r);t===i&&(a-=e),t.min=Fx(t.min,e,n,a,s),t.max=Fx(t.max,e,n,a,s)}function Ux(t,e,[n,r,s],i,o){z5(t,e[n],e[r],e[s],e.scale,i,o)}const $5=["x","scaleX","originX"],q5=["y","scaleY","originY"];function Bx(t,e,n,r){Ux(t.x,e,$5,n?n.x:void 0,r?r.x:void 0),Ux(t.y,e,q5,n?n.y:void 0,r?r.y:void 0)}function zx(t){return t.translate===0&&t.scale===1}function vA(t){return zx(t.x)&&zx(t.y)}function $x(t,e){return t.min===e.min&&t.max===e.max}function W5(t,e){return $x(t.x,e.x)&&$x(t.y,e.y)}function qx(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function _A(t,e){return qx(t.x,e.x)&&qx(t.y,e.y)}function Wx(t){return Ut(t.x)/Ut(t.y)}function Hx(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class H5{constructor(){this.members=[]}add(e){Wg(this.members,e),e.scheduleRender()}remove(e){if(Hg(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function K5(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:d,rotateX:p,rotateY:m,skewX:_,skewY:y}=n;c&&(r=`perspective(${c}px) ${r}`),d&&(r+=`rotate(${d}deg) `),p&&(r+=`rotateX(${p}deg) `),m&&(r+=`rotateY(${m}deg) `),_&&(r+=`skewX(${_}deg) `),y&&(r+=`skewY(${y}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const G5=(t,e)=>t.depth-e.depth;class Q5{constructor(){this.children=[],this.isDirty=!1}add(e){Wg(this.children,e),this.isDirty=!0}remove(e){Hg(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(G5),this.isDirty=!1,this.children.forEach(e)}}function Eu(t){const e=ft(t)?t.get():t;return UF(e)?e.toValue():e}function X5(t,e){const n=Tn.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&($r(r),t(i-e))};return ce.read(r,!0),()=>$r(r)}function Y5(t){return t instanceof SVGElement&&t.tagName!=="svg"}function J5(t,e,n){const r=ft(t)?t:La(t);return r.start(qg("",r,e,n)),r.animation}const cs={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Mo=typeof window<"u"&&window.MotionDebug!==void 0,Dd=["","X","Y","Z"],Z5={visibility:"hidden"},Kx=1e3;let e6=0;function Vd(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function xA(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=YI(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ce,!(s||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&xA(r)}function wA({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=e6++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Mo&&(cs.totalNodes=cs.resolvedTargetDeltas=cs.recalculatedProjection=0),this.nodes.forEach(r6),this.nodes.forEach(l6),this.nodes.forEach(u6),this.nodes.forEach(s6),Mo&&window.MotionDebug.record(cs)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Q5)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Kg),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Y5(o),this.instance=o;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let p;const m=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=X5(m,250),wu.hasAnimatedSinceResize&&(wu.hasAnimatedSinceResize=!1,this.nodes.forEach(Qx))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:m,hasRelativeTargetChanged:_,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const I=this.options.transition||d.getDefaultTransition()||p6,{onLayoutAnimationStart:T,onLayoutAnimationComplete:x}=d.getProps(),v=!this.targetLayout||!_A(this.targetLayout,y)||_,S=!m&&_;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||m&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(p,S);const R={...bg(I,"layout"),onPlay:T,onComplete:x};(d.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R)}else m||Qx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,$r(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(c6),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&xA(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const p=this.path[d];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Gx);return}this.isUpdating||this.nodes.forEach(o6),this.isUpdating=!1,this.nodes.forEach(a6),this.nodes.forEach(t6),this.nodes.forEach(n6),this.clearAllSnapshots();const a=Tn.now();Ge.delta=qr(0,1e3/60,a-Ge.timestamp),Ge.timestamp=a,Ge.isProcessing=!0,Ad.update.process(Ge),Ad.preRender.process(Ge),Ad.render.process(Ge),Ge.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Xg.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(i6),this.sharedNodes.forEach(h6)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ce.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ce.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=je(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!vA(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;o&&(a||us(this.latestValues)||d)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),m6(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return je();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(g6))){const{scroll:d}=this.root;d&&(di(l.x,d.offset.x),di(l.y,d.offset.y))}return l}removeElementScroll(o){var a;const l=je();if($t(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:p,options:m}=d;d!==this.root&&p&&m.layoutScroll&&(p.wasRoot&&$t(l,o),di(l.x,p.offset.x),di(l.y,p.offset.y))}return l}applyTransform(o,a=!1){const l=je();$t(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&fi(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),us(d.latestValues)&&fi(l,d.latestValues)}return us(this.latestValues)&&fi(l,this.latestValues),l}removeTransform(o){const a=je();$t(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!us(c.latestValues))continue;yp(c.latestValues)&&c.updateSnapshot();const d=je(),p=c.measurePageBox();$t(d,p),Bx(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return us(this.latestValues)&&Bx(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ge.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:m}=this.options;if(!(!this.layout||!(p||m))){if(this.resolvedRelativeTargetAt=Ge.timestamp,!this.targetDelta&&!this.relativeTarget){const _=this.getClosestProjectingParent();_&&_.layout&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=je(),this.relativeTargetOrigin=je(),na(this.relativeTargetOrigin,this.layout.layoutBox,_.layout.layoutBox),$t(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=je(),this.targetWithTransforms=je()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),y5(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):$t(this.target,this.layout.layoutBox),cA(this.target,this.targetDelta)):$t(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const _=this.getClosestProjectingParent();_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=je(),this.relativeTargetOrigin=je(),na(this.relativeTargetOrigin,this.target,_.target),$t(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Mo&&cs.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||yp(this.parent.latestValues)||uA(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Ge.timestamp&&(c=!1),c)return;const{layout:d,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||p))return;$t(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,_=this.treeScale.y;A5(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=je());const{target:y}=a;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Mx(this.prevProjectionDelta.x,this.projectionDelta.x),Mx(this.prevProjectionDelta.y,this.projectionDelta.y)),ta(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==_||!Hx(this.projectionDelta.x,this.prevProjectionDelta.x)||!Hx(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),Mo&&cs.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=hi(),this.projectionDelta=hi(),this.projectionDeltaWithTransform=hi()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},p=hi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=je(),_=l?l.source:void 0,y=this.layout?this.layout.source:void 0,I=_!==y,T=this.getStack(),x=!T||T.members.length<=1,v=!!(I&&!x&&this.options.crossfade===!0&&!this.path.some(f6));this.animationProgress=0;let S;this.mixTargetDelta=R=>{const O=R/1e3;Xx(p.x,o.x,O),Xx(p.y,o.y,O),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(na(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),d6(this.relativeTarget,this.relativeTargetOrigin,m,O),S&&W5(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=je()),$t(S,this.relativeTarget)),I&&(this.animationValues=d,F5(d,c,this.latestValues,O,v,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=O},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&($r(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ce.update(()=>{wu.hasAnimatedSinceResize=!0,this.currentAnimation=J5(0,Kx,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Kx),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:d}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&EA(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||je();const p=Ut(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+p;const m=Ut(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+m}$t(a,l),fi(a,d),ta(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new H5),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&Vd("z",o,c,this.animationValues);for(let d=0;d<Dd.length;d++)Vd(`rotate${Dd[d]}`,o,c,this.animationValues),Vd(`skew${Dd[d]}`,o,c,this.animationValues);o.render();for(const d in c)o.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Z5;const c={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Eu(o==null?void 0:o.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){const I={};return this.options.layoutId&&(I.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,I.pointerEvents=Eu(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!us(this.latestValues)&&(I.transform=d?d({},""):"none",this.hasProjected=!1),I}const m=p.animationValues||p.latestValues;this.applyTransformsToTarget(),c.transform=K5(this.projectionDeltaWithTransform,this.treeScale,m),d&&(c.transform=d(m,c.transform));const{x:_,y}=this.projectionDelta;c.transformOrigin=`${_.origin*100}% ${y.origin*100}% 0`,p.animationValues?c.opacity=p===this?(l=(a=m.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=p===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const I in _c){if(m[I]===void 0)continue;const{correct:T,applyTo:x}=_c[I],v=c.transform==="none"?m[I]:T(m[I],p);if(x){const S=x.length;for(let R=0;R<S;R++)c[x[R]]=v}else c[I]=v}return this.options.layoutId&&(c.pointerEvents=p===this?Eu(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Gx),this.root.sharedNodes.clear()}}}function t6(t){t.updateLayout()}function n6(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?Wt(p=>{const m=o?n.measuredBox[p]:n.layoutBox[p],_=Ut(m);m.min=r[p].min,m.max=m.min+_}):EA(i,n.layoutBox,r)&&Wt(p=>{const m=o?n.measuredBox[p]:n.layoutBox[p],_=Ut(r[p]);m.max=m.min+_,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+_)});const a=hi();ta(a,r,n.layoutBox);const l=hi();o?ta(l,t.applyTransform(s,!0),n.measuredBox):ta(l,r,n.layoutBox);const c=!vA(a);let d=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:m,layout:_}=p;if(m&&_){const y=je();na(y,n.layoutBox,m.layoutBox);const I=je();na(I,r,_.layoutBox),_A(y,I)||(d=!0),p.options.layoutRoot&&(t.relativeTarget=I,t.relativeTargetOrigin=y,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function r6(t){Mo&&cs.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function s6(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function i6(t){t.clearSnapshot()}function Gx(t){t.clearMeasurements()}function o6(t){t.isLayoutDirty=!1}function a6(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Qx(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function l6(t){t.resolveTargetDelta()}function u6(t){t.calcProjection()}function c6(t){t.resetSkewAndRotation()}function h6(t){t.removeLeadSnapshot()}function Xx(t,e,n){t.translate=Te(e.translate,0,n),t.scale=Te(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Yx(t,e,n,r){t.min=Te(e.min,n.min,r),t.max=Te(e.max,n.max,r)}function d6(t,e,n,r){Yx(t.x,e.x,n.x,r),Yx(t.y,e.y,n.y,r)}function f6(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const p6={duration:.45,ease:[.4,0,.1,1]},Jx=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Zx=Jx("applewebkit/")&&!Jx("chrome/")?Math.round:pt;function ew(t){t.min=Zx(t.min),t.max=Zx(t.max)}function m6(t){ew(t.x),ew(t.y)}function EA(t,e,n){return t==="position"||t==="preserve-aspect"&&!g5(Wx(e),Wx(n),.2)}function g6(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const y6=wA({attachResizeListener:(t,e)=>Un(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Od={current:void 0},TA=wA({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Od.current){const t=new y6({});t.mount(window),t.setOptions({layoutScroll:!0}),Od.current=t}return Od.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),v6={pan:{Feature:R5},drag:{Feature:N5,ProjectionNode:TA,MeasureLayout:mA}};function tw(t,e){const n=e?"pointerenter":"pointerleave",r=e?"onHoverStart":"onHoverEnd",s=(i,o)=>{if(i.pointerType==="touch"||iA())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e);const l=a[r];l&&ce.postRender(()=>l(i,o))};return Wn(t.current,n,s,{passive:!t.getProps()[r]})}class _6 extends es{mount(){this.unmount=qn(tw(this.node,!0),tw(this.node,!1))}unmount(){}}class x6 extends es{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=qn(Un(this.node.current,"focus",()=>this.onFocus()),Un(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const SA=(t,e)=>e?t===e?!0:SA(t,e.parentElement):!1;function Ld(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,dh(n))}class w6 extends es{constructor(){super(...arguments),this.removeStartListeners=pt,this.removeEndListeners=pt,this.removeAccessibleListeners=pt,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=Wn(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:d,globalTapTarget:p}=this.node.getProps(),m=!p&&!SA(this.node.current,a.target)?d:c;m&&ce.update(()=>m(a,l))},{passive:!(r.onTap||r.onPointerUp)}),o=Wn(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=qn(i,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||Ld("up",(l,c)=>{const{onTap:d}=this.node.getProps();d&&ce.postRender(()=>d(l,c))})};this.removeEndListeners(),this.removeEndListeners=Un(this.node.current,"keyup",o),Ld("down",(a,l)=>{this.startPress(a,l)})},n=Un(this.node.current,"keydown",e),r=()=>{this.isPressing&&Ld("cancel",(i,o)=>this.cancelPress(i,o))},s=Un(this.node.current,"blur",r);this.removeAccessibleListeners=qn(n,s)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&ce.postRender(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!iA()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&ce.postRender(()=>r(e,n))}mount(){const e=this.node.getProps(),n=Wn(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Un(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=qn(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const _p=new WeakMap,Md=new WeakMap,E6=t=>{const e=_p.get(t.target);e&&e(t)},T6=t=>{t.forEach(E6)};function S6({root:t,...e}){const n=t||document;Md.has(n)||Md.set(n,{});const r=Md.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(T6,{root:t,...e})),r[s]}function I6(t,e,n){const r=S6(e);return _p.set(t,n),r.observe(t),()=>{_p.delete(t),r.unobserve(t)}}const A6={some:0,all:1};class k6 extends es{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:A6[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:p}=this.node.getProps(),m=c?d:p;m&&m(l)};return I6(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(P6(e,n))&&this.startObserver()}unmount(){}}function P6({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const C6={inView:{Feature:k6},tap:{Feature:w6},focus:{Feature:x6},hover:{Feature:_6}},b6={layout:{ProjectionNode:TA,MeasureLayout:mA}},IA=b.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),fh=b.createContext({}),Yg=typeof window<"u",N6=Yg?b.useLayoutEffect:b.useEffect,AA=b.createContext({strict:!1});function R6(t,e,n,r,s){var i,o;const{visualElement:a}=b.useContext(fh),l=b.useContext(AA),c=b.useContext(Qg),d=b.useContext(IA).reducedMotion,p=b.useRef();r=r||l.renderer,!p.current&&r&&(p.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const m=p.current,_=b.useContext(pA);m&&!m.projection&&s&&(m.type==="html"||m.type==="svg")&&j6(p.current,n,s,_);const y=b.useRef(!1);b.useInsertionEffect(()=>{m&&y.current&&m.update(n,c)});const I=n[XI],T=b.useRef(!!I&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,I))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,I)));return N6(()=>{m&&(y.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),Xg.render(m.render),T.current&&m.animationState&&m.animationState.animateChanges())}),b.useEffect(()=>{m&&(!T.current&&m.animationState&&m.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)===null||x===void 0||x.call(window,I)}),T.current=!1))}),m}function j6(t,e,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:kA(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&ci(a),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function kA(t){if(t)return t.options.allowProjection!==!1?t.projection:kA(t.parent)}function D6(t,e,n){return b.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):ci(n)&&(n.current=r))},[e])}function ph(t){return uh(t.animate)||Cg.some(e=>Da(t[e]))}function PA(t){return!!(ph(t)||t.variants)}function V6(t,e){if(ph(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Da(n)?n:void 0,animate:Da(r)?r:void 0}}return t.inherit!==!1?e:{}}function O6(t){const{initial:e,animate:n}=V6(t,b.useContext(fh));return b.useMemo(()=>({initial:e,animate:n}),[nw(e),nw(n)])}function nw(t){return Array.isArray(t)?t.join(" "):t}const rw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Bi={};for(const t in rw)Bi[t]={isEnabled:e=>rw[t].some(n=>!!e[n])};function L6(t){for(const e in t)Bi[e]={...Bi[e],...t[e]}}const M6=Symbol.for("motionComponentSymbol");function F6({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&L6(t);function i(a,l){let c;const d={...b.useContext(IA),...a,layoutId:U6(a)},{isStatic:p}=d,m=O6(a),_=r(a,p);if(!p&&Yg){B6();const y=z6(d);c=y.MeasureLayout,m.visualElement=R6(s,_,d,e,y.ProjectionNode)}return h.jsxs(fh.Provider,{value:m,children:[c&&m.visualElement?h.jsx(c,{visualElement:m.visualElement,...d}):null,n(s,a,D6(_,m.visualElement,l),_,p,m.visualElement)]})}const o=b.forwardRef(i);return o[M6]=s,o}function U6({layoutId:t}){const e=b.useContext(fA).id;return e&&t!==void 0?e+"-"+t:t}function B6(t,e){b.useContext(AA).strict}function z6(t){const{drag:e,layout:n}=Bi;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const $6=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Jg(t){return typeof t!="string"||t.includes("-")?!1:!!($6.indexOf(t)>-1||/[A-Z]/u.test(t))}function CA(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const bA=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function NA(t,e,n,r){CA(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(bA.has(s)?s:Gg(s),e.attrs[s])}function RA(t,{layout:e,layoutId:n}){return Us.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!_c[t]||t==="opacity")}function Zg(t,e,n){var r;const{style:s}=t,i={};for(const o in s)(ft(s[o])||e.style&&ft(e.style[o])||RA(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(i[o]=s[o]);return i}function jA(t,e,n){const r=Zg(t,e,n);for(const s in t)if(ft(t[s])||ft(e[s])){const i=rl.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}function q6(t){const e=b.useRef(null);return e.current===null&&(e.current=t()),e.current}function W6({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,s,i){const o={latestValues:H6(r,s,i,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const DA=t=>(e,n)=>{const r=b.useContext(fh),s=b.useContext(Qg),i=()=>W6(t,e,r,s);return n?i():q6(i)};function H6(t,e,n,r){const s={},i=r(t,{});for(const m in i)s[m]=Eu(i[m]);let{initial:o,animate:a}=t;const l=ph(t),c=PA(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const p=d?a:o;if(p&&typeof p!="boolean"&&!uh(p)){const m=Array.isArray(p)?p:[p];for(let _=0;_<m.length;_++){const y=kg(t,m[_]);if(y){const{transitionEnd:I,transition:T,...x}=y;for(const v in x){let S=x[v];if(Array.isArray(S)){const R=d?S.length-1:0;S=S[R]}S!==null&&(s[v]=S)}for(const v in I)s[v]=I[v]}}}return s}const ey=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),VA=()=>({...ey(),attrs:{}}),OA=(t,e)=>e&&typeof t=="number"?e.transform(t):t,K6={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},G6=rl.length;function Q6(t,e,n){let r="",s=!0;for(let i=0;i<G6;i++){const o=rl[i],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=OA(a,Lg[o]);if(!l){s=!1;const d=K6[o]||o;r+=`${d}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function ty(t,e,n){const{style:r,vars:s,transformOrigin:i}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(Us.has(l)){o=!0;continue}else if(kI(l)){s[l]=c;continue}else{const d=OA(c,Lg[l]);l.startsWith("origin")?(a=!0,i[l]=d):r[l]=d}}if(e.transform||(o||n?r.transform=Q6(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:d=0}=i;r.transformOrigin=`${l} ${c} ${d}`}}function sw(t,e,n){return typeof t=="string"?t:K.transform(e+n*t)}function X6(t,e,n){const r=sw(e,t.x,t.width),s=sw(n,t.y,t.height);return`${r} ${s}`}const Y6={offset:"stroke-dashoffset",array:"stroke-dasharray"},J6={offset:"strokeDashoffset",array:"strokeDasharray"};function Z6(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?Y6:J6;t[i.offset]=K.transform(-r);const o=K.transform(e),a=K.transform(n);t[i.array]=`${o} ${a}`}function ny(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},d,p){if(ty(t,c,p),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:_,dimensions:y}=t;m.transform&&(y&&(_.transform=m.transform),delete m.transform),y&&(s!==void 0||i!==void 0||_.transform)&&(_.transformOrigin=X6(y,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),o!==void 0&&Z6(m,o,a,l,!1)}const ry=t=>typeof t=="string"&&t.toLowerCase()==="svg",eU={useVisualState:DA({scrapeMotionValuesFromProps:jA,createRenderState:VA,onMount:(t,e,{renderState:n,latestValues:r})=>{ce.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),ce.render(()=>{ny(n,r,ry(e.tagName),t.transformTemplate),NA(e,n)})}})},tU={useVisualState:DA({scrapeMotionValuesFromProps:Zg,createRenderState:ey})};function LA(t,e,n){for(const r in e)!ft(e[r])&&!RA(r,n)&&(t[r]=e[r])}function nU({transformTemplate:t},e){return b.useMemo(()=>{const n=ey();return ty(n,e,t),Object.assign({},n.vars,n.style)},[e])}function rU(t,e){const n=t.style||{},r={};return LA(r,n,t),Object.assign(r,nU(t,e)),r}function sU(t,e){const n={},r=rU(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const iU=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function xc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||iU.has(t)}let MA=t=>!xc(t);function oU(t){t&&(MA=e=>e.startsWith("on")?!xc(e):t(e))}try{oU(require("@emotion/is-prop-valid").default)}catch{}function aU(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(MA(s)||n===!0&&xc(s)||!e&&!xc(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function lU(t,e,n,r){const s=b.useMemo(()=>{const i=VA();return ny(i,e,ry(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};LA(i,t.style,t),s.style={...i,...s.style}}return s}function uU(t=!1){return(n,r,s,{latestValues:i},o)=>{const l=(Jg(n)?lU:sU)(r,i,o,n),c=aU(r,typeof n=="string",t),d=n!==b.Fragment?{...c,...l,ref:s}:{},{children:p}=r,m=b.useMemo(()=>ft(p)?p.get():p,[p]);return b.createElement(n,{...d,children:m})}}function cU(t,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const o={...Jg(r)?eU:tU,preloadedFeatures:t,useRender:uU(s),createVisualElement:e,Component:r};return F6(o)}}const xp={current:null},FA={current:!1};function hU(){if(FA.current=!0,!!Yg)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>xp.current=t.matches;t.addListener(e),e()}else xp.current=!1}function dU(t,e,n){for(const r in e){const s=e[r],i=n[r];if(ft(s))t.addValue(r,s);else if(ft(i))t.addValue(r,La(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(r);t.addValue(r,La(o!==void 0?o:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const iw=new WeakMap,fU=[...bI,lt,Wr],pU=t=>fU.find(CI(t)),ow=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class mU{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Dg,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Tn.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,ce.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=ph(n),this.isVariantNode=PA(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in p){const _=p[m];l[m]!==void 0&&ft(_)&&_.set(l[m],!1)}}mount(e){this.current=e,iw.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),FA.current||hU(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:xp.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){iw.delete(this.current),this.projection&&this.projection.unmount(),$r(this.notifyUpdate),$r(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Us.has(e),s=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&ce.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),i(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Bi){const n=Bi[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):je()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<ow.length;r++){const s=ow[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=e[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=dU(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=La(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(II(s)||SI(s))?s=parseFloat(s):!pU(s)&&Wr.test(n)&&(s=MI(e,n)),this.setBaseTarget(e,ft(s)?s.get():s)),ft(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const o=kg(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(s=o[e])}if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!ft(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Kg),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class UA extends mU{constructor(){super(...arguments),this.KeyframeResolver=FI}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}}function gU(t){return window.getComputedStyle(t)}class yU extends UA{constructor(){super(...arguments),this.type="html",this.renderInstance=CA}readValueFromInstance(e,n){if(Us.has(n)){const r=Mg(n);return r&&r.default||0}else{const r=gU(e),s=(kI(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return hA(e,n)}build(e,n,r){ty(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Zg(e,n,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ft(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class vU extends UA{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=je}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Us.has(n)){const r=Mg(n);return r&&r.default||0}return n=bA.has(n)?n:Gg(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return jA(e,n,r)}build(e,n,r){ny(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,s){NA(e,n,r,s)}mount(e){this.isSVGTag=ry(e.tagName),super.mount(e)}}const _U=(t,e)=>Jg(t)?new vU(e):new yU(e,{allowProjection:t!==b.Fragment}),xU=cU({...a5,...C6,...v6,...b6},_U),Et=JM(xU);function wU(){return h.jsxs("div",{className:"pt-16 bg-gray-50",children:[h.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-green-400 text-white py-20",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4 text-center",children:[h.jsx(Et.h1,{className:"text-5xl font-bold mb-6",initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:.8},children:"À propos de nous"}),h.jsx(Et.p,{className:"text-lg md:text-xl text-blue-100",initial:{opacity:0},animate:{opacity:1},transition:{duration:1},children:"Bienvenue sur **AuraShop**, votre destination mode à Djibouti. Une expérience de shopping unique, pensée pour vous !"})]})}),h.jsx("section",{className:"py-16 bg-white",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[h.jsx("h2",{className:"text-4xl font-bold text-gray-800 mb-12 text-center",children:"Comment ça marche ?"}),h.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{Icon:Ig,title:"1. Parcourez & Choisissez",description:"Explorez notre catalogue et ajoutez vos articles préférés au panier."},{Icon:AM,title:"2. Commandez",description:"Remplissez vos coordonnées et envoyez votre commande."},{Icon:LM,title:"3. Recevez",description:"Notre équipe vous contacte pour organiser la livraison."}].map((t,e)=>h.jsxs(Et.div,{className:"text-center p-6 shadow-lg rounded-lg bg-gradient-to-t from-gray-50 to-blue-50",initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:e*.2},children:[h.jsx(t.Icon,{className:"w-16 h-16 text-blue-600 mx-auto mb-4"}),h.jsx("h3",{className:"text-2xl font-semibold mb-2",children:t.title}),h.jsx("p",{className:"text-gray-600",children:t.description})]},e))})]})}),h.jsx("section",{className:"py-16 bg-gradient-to-b from-gray-50 to-gray-100",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[h.jsx("h2",{className:"text-4xl font-bold text-gray-800 mb-12 text-center",children:"Modes de paiement"}),h.jsx(Et.div,{className:"bg-white rounded-lg shadow-lg p-8",initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.6},children:h.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:[{title:"Paiement en espèces",description:"Payez directement à la livraison en espèces. Simple et pratique.",points:["Sans frais supplémentaires","Vérifiez votre commande avant de payer"]},{title:"Paiement en plusieurs fois",description:"Flexibilité de paiement pour les commandes importantes.",points:["Premier versement à la livraison","Échéancier personnalisé"]}].map((t,e)=>h.jsxs("div",{children:[h.jsx("h3",{className:"text-2xl font-semibold mb-4",children:t.title}),h.jsx("p",{className:"text-gray-600 mb-4",children:t.description}),h.jsx("ul",{className:"list-disc list-inside text-gray-600",children:t.points.map((n,r)=>h.jsx("li",{children:n},r))})]},e))})})]})}),h.jsx("section",{className:"py-16 bg-blue-50",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[h.jsx("h2",{className:"text-4xl font-bold text-gray-800 mb-12 text-center",children:"Livraison adaptée à Djibouti"}),h.jsx(Et.div,{className:"bg-white rounded-lg shadow-lg p-8",initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.6},children:h.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Notre processus"}),h.jsx("ul",{className:"space-y-4 text-gray-600",children:["Confirmation de votre commande","Contact téléphonique pour les détails","Accord sur le point de livraison","Livraison à l’heure convenue"].map((t,e)=>h.jsxs("li",{className:"flex items-start",children:[h.jsx("span",{className:"bg-blue-600 text-white rounded-full w-8 h-8 flex items-center justify-center mr-4",children:e+1}),t]},e))})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Zones desservies"}),h.jsx("p",{className:"text-gray-600",children:"Nous livrons dans tous les quartiers de Djibouti-ville et ses environs. Un point de livraison pratique sera organisé."})]})]})})]})}),h.jsx("section",{className:"py-16 bg-white",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[h.jsx("h2",{className:"text-4xl font-bold text-gray-800 mb-12 text-center",children:"Nos engagements"}),h.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{Icon:Id,title:"Qualité garantie",description:"Tous nos produits sont soigneusement sélectionnés pour leur qualité."},{Icon:Id,title:"Service personnalisé",description:"Une équipe attentive à vos besoins, toujours disponible."},{Icon:Id,title:"Flexibilité",description:"Des solutions adaptées à vos besoins pour les paiements et livraisons."}].map((t,e)=>h.jsxs(Et.div,{className:"bg-gradient-to-r from-white to-blue-50 p-6 rounded-lg shadow-lg",initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:e*.2},children:[h.jsx(t.Icon,{className:"w-16 h-16 text-blue-600 mb-4"}),h.jsx("h3",{className:"text-2xl font-semibold mb-2",children:t.title}),h.jsx("p",{className:"text-gray-600",children:t.description})]},e))})]})}),h.jsx("section",{className:"py-16 bg-gray-50",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[h.jsx("h2",{className:"text-4xl font-bold text-gray-800 mb-8 text-center",children:"Questions fréquentes"}),h.jsx("div",{className:"space-y-6",children:[{question:"Comment passer une commande ?",answer:"Ajoutez vos articles préférés au panier, puis complétez vos coordonnées."},{question:"Comment fonctionne le paiement en plusieurs fois ?",answer:"Un échelonnement des paiements est disponible pour les commandes importantes."},{question:"Quels quartiers sont desservis ?",answer:"Nous livrons dans tous les quartiers de Djibouti-ville avec un service flexible."}].map((t,e)=>h.jsxs(Et.div,{className:"bg-white rounded-lg shadow-md p-6",initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.6,delay:e*.2},children:[h.jsx("h3",{className:"text-xl font-semibold mb-2",children:t.question}),h.jsx("p",{className:"text-gray-600",children:t.answer})]},e))})]})})]})}class ol{constructor(e=0,n="Network Error"){this.status=e,this.text=n}}const EU=()=>{if(!(typeof localStorage>"u"))return{get:t=>Promise.resolve(localStorage.getItem(t)),set:(t,e)=>Promise.resolve(localStorage.setItem(t,e)),remove:t=>Promise.resolve(localStorage.removeItem(t))}},Xe={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:EU()},sy=t=>t?typeof t=="string"?{publicKey:t}:t.toString()==="[object Object]"?t:{}:{},TU=(t,e="https://api.emailjs.com")=>{if(!t)return;const n=sy(t);Xe.publicKey=n.publicKey,Xe.blockHeadless=n.blockHeadless,Xe.storageProvider=n.storageProvider,Xe.blockList=n.blockList,Xe.limitRate=n.limitRate,Xe.origin=n.origin||e},BA=async(t,e,n={})=>{const r=await fetch(Xe.origin+t,{method:"POST",headers:n,body:e}),s=await r.text(),i=new ol(r.status,s);if(r.ok)return i;throw i},zA=(t,e,n)=>{if(!t||typeof t!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||typeof n!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},SU=t=>{if(t&&t.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},$A=t=>t.webdriver||!t.languages||t.languages.length===0,qA=()=>new ol(451,"Unavailable For Headless Browser"),IU=(t,e)=>{if(!Array.isArray(t))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},AU=t=>{var e;return!((e=t.list)!=null&&e.length)||!t.watchVariable},kU=(t,e)=>t instanceof FormData?t.get(e):t[e],WA=(t,e)=>{if(AU(t))return!1;IU(t.list,t.watchVariable);const n=kU(e,t.watchVariable);return typeof n!="string"?!1:t.list.includes(n)},HA=()=>new ol(403,"Forbidden"),PU=(t,e)=>{if(typeof t!="number"||t<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},CU=async(t,e,n)=>{const r=Number(await n.get(t)||0);return e-Date.now()+r},KA=async(t,e,n)=>{if(!e.throttle||!n)return!1;PU(e.throttle,e.id);const r=e.id||t;return await CU(r,e.throttle,n)>0?!0:(await n.set(r,Date.now().toString()),!1)},GA=()=>new ol(429,"Too Many Requests"),bU=async(t,e,n,r)=>{const s=sy(r),i=s.publicKey||Xe.publicKey,o=s.blockHeadless||Xe.blockHeadless,a=s.storageProvider||Xe.storageProvider,l={...Xe.blockList,...s.blockList},c={...Xe.limitRate,...s.limitRate};return o&&$A(navigator)?Promise.reject(qA()):(zA(i,t,e),SU(n),n&&WA(l,n)?Promise.reject(HA()):await KA(location.pathname,c,a)?Promise.reject(GA()):BA("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:i,service_id:t,template_id:e,template_params:n}),{"Content-type":"application/json"}))},NU=t=>{if(!t||t.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},RU=t=>typeof t=="string"?document.querySelector(t):t,jU=async(t,e,n,r)=>{const s=sy(r),i=s.publicKey||Xe.publicKey,o=s.blockHeadless||Xe.blockHeadless,a=Xe.storageProvider||s.storageProvider,l={...Xe.blockList,...s.blockList},c={...Xe.limitRate,...s.limitRate};if(o&&$A(navigator))return Promise.reject(qA());const d=RU(n);zA(i,t,e),NU(d);const p=new FormData(d);return WA(l,p)?Promise.reject(HA()):await KA(location.pathname,c,a)?Promise.reject(GA()):(p.append("lib_version","4.4.1"),p.append("service_id",t),p.append("template_id",e),p.append("user_id",i),BA("/api/v1.0/email/send-form",p))},QA={init:TU,send:bU,sendForm:jU,EmailJSResponseStatus:ol},DU=async t=>{try{const e=t.orderItems.split(`
`).filter(r=>r.trim()!=="").join(`
`);return await QA.send("service_yrt97yo","template_1n04l3e",{to_email:"chehem21@gmail.com",customer_name:t.customerName,customer_email:t.customerEmail,customer_phone:t.customerPhone,customer_district:t.customerDistrict,customer_comment:t.customerComment||"Aucun commentaire",order_items:e,order_total:t.orderTotal},"FAPYgCzCX6t9y-bXC")}catch(e){throw console.error("Erreur lors de l'envoi de l'email:",e),e}},VU=async t=>{try{return await QA.send("service_yrt97yo","template_cpvpmmn",{from_name:t.name,from_email:t.email,phone:t.phone,message:t.message,to_email:"chehem21@gmail.com"},"FAPYgCzCX6t9y-bXC")}catch(e){throw console.error("Erreur lors de l'envoi de l'email de contact:",e),e}};function OU(){const[t,e]=b.useState(!1),[n,r]=b.useState({name:"",email:"",phone:"",message:""}),[s,i]=b.useState(null),o=async a=>{a.preventDefault(),e(!0),i(null);try{await VU({name:n.name,email:n.email,phone:n.phone,message:n.message}),i("success"),r({name:"",email:"",phone:"",message:""})}catch{i("error")}finally{e(!1)}};return h.jsxs("div",{className:"pt-16 bg-gray-50",children:[h.jsx("div",{className:"bg-gradient-to-r from-sky-600 to-sky-700 text-white py-16",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[h.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Contactez-nous"}),h.jsx("p",{className:"text-xl text-sky-100",children:"Notre équipe est à votre disposition pour répondre à toutes vos questions."})]})}),h.jsx("div",{className:"max-w-7xl mx-auto px-4 py-16",children:h.jsxs("div",{className:"grid md:grid-cols-2 gap-12",children:[h.jsxs("div",{className:"space-y-6",children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-8",children:"Nos coordonnées"}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex items-start group hover:scale-105 transition-all",children:[h.jsx(Sg,{className:"w-6 h-6 text-sky-600 group-hover:text-sky-700 mr-4 mt-1"}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-800",children:"Téléphone"}),h.jsx("p",{className:"text-gray-600",children:"+253 77 55 20 28"}),h.jsx("p",{className:"text-gray-600",children:"+33 07 75 84 09 62"})]})]}),h.jsxs("div",{className:"flex items-start group hover:scale-105 transition-all",children:[h.jsx(Tg,{className:"w-6 h-6 text-sky-600 group-hover:text-sky-700 mr-4 mt-1"}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-800",children:"Email"}),h.jsx("p",{className:"text-gray-600",children:"djibouti.aura@gmail.com "})]})]}),h.jsxs("div",{className:"flex items-start group hover:scale-105 transition-all",children:[h.jsx(jM,{className:"w-6 h-6 text-sky-600 group-hover:text-sky-700 mr-4 mt-1"}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-800",children:"Adresse"}),h.jsx("p",{className:"text-gray-600",children:"Quartier Hodan 1 à Balbala - Djibouti"})]})]}),h.jsxs("div",{className:"flex items-start group hover:scale-105 transition-all",children:[h.jsx(Eg,{className:"w-6 h-6 text-sky-600 group-hover:text-sky-700 mr-4 mt-1"}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-800",children:"Horaires"}),h.jsx("p",{className:"text-gray-600",children:"Tous les jours: 7/7j - 24/24j"})]})]})]})]}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-8",children:"Envoyez-nous un message"}),s==="success"&&h.jsx("div",{className:"mb-6 p-4 bg-green-100 text-green-700 border border-green-300 rounded-lg",children:"Message envoyé avec succès ! Nous vous répondrons dans les plus brefs délais."}),s==="error"&&h.jsx("div",{className:"mb-6 p-4 bg-red-100 text-red-700 border border-red-300 rounded-lg",children:"Une erreur est survenue. Veuillez réessayer plus tard."}),h.jsxs("form",{onSubmit:o,className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom complet *"}),h.jsx("input",{type:"text",id:"name",required:!0,value:n.name,onChange:a=>r({...n,name:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-sky-500 focus:border-sky-500 transition-all",placeholder:"Votre nom"})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),h.jsx("input",{type:"email",id:"email",required:!0,value:n.email,onChange:a=>r({...n,email:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-sky-500 focus:border-sky-500 transition-all",placeholder:"votre@email.com"})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Téléphone *"}),h.jsx("input",{type:"tel",id:"phone",required:!0,value:n.phone,onChange:a=>r({...n,phone:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-sky-500 focus:border-sky-500 transition-all",placeholder:"votre numéro de téléphone"})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-1",children:"Message *"}),h.jsx("textarea",{id:"message",rows:4,required:!0,value:n.message,onChange:a=>r({...n,message:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-sky-500 focus:border-sky-500 transition-all",placeholder:"Votre message..."})]}),h.jsx("button",{type:"submit",disabled:t,className:`w-full bg-sky-600 text-white py-3 px-6 rounded-lg hover:bg-sky-700 transition-all ${t?"opacity-50 cursor-not-allowed":""}`,children:t?"Envoi en cours...":"Envoyer le message"})]})]})]})})]})}const LU=async t=>{try{const e={customerInfo:t.customerInfo,items:t.items,total:t.total,status:"new",createdAt:dc(),updatedAt:dc()};await US(tr(dt,"orders"),e)}catch(e){console.error("Erreur lors de la sauvegarde de la commande:",e)}};function MU(){const{state:t,dispatch:e}=Mc(),n=Gi(),[r,s]=b.useState(!1),[i,o]=b.useState({fullName:"",email:"",phone:"",district:"",comment:""}),a=()=>t.items.map(c=>`
      Produit: ${c.name}
      Taille: ${c.selectedSize}
      Couleur: ${c.selectedColor}
      Quantité: ${c.quantity}
      Prix unitaire: ${c.price} FDJ
      Sous-total: ${c.price*c.quantity} FDJ
    `).join(`

`),l=async c=>{c.preventDefault(),s(!0);try{await DU({customerName:i.fullName,customerEmail:i.email||"Non fourni",customerPhone:i.phone,customerDistrict:i.district,customerComment:i.comment||"Aucun commentaire",orderItems:a(),orderTotal:`${t.total} FDJ`}),LU({customerInfo:{fullName:i.fullName,email:i.email||null,phone:i.phone,district:i.district,comment:i.comment||null},items:a(),total:t.total}),e({type:"CLEAR_CART"}),n("/confirmation")}catch{alert("Une erreur est survenue lors de l'envoi de la commande. Veuillez réessayer.")}finally{s(!1)}};return t.items.length===0?(n("/"),null):h.jsx("div",{className:"pt-16 bg-gray-50",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 py-16",children:h.jsxs("div",{className:"grid md:grid-cols-2 gap-12",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-8",children:"Résumé de la commande"}),h.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[h.jsx("ul",{className:"divide-y divide-gray-200",children:t.items.map(c=>h.jsx("li",{className:"py-4",children:h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx("img",{src:c.images[0],alt:c.name,className:"h-16 w-16 rounded-md object-cover"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"text-sm font-medium",children:c.name}),h.jsxs("p",{className:"text-sm text-gray-500",children:["Taille: ",c.selectedSize," | Quantité: ",c.quantity]}),h.jsxs("p",{className:"text-sm font-medium",children:[(c.price*c.quantity).toLocaleString()," FDJ"]})]})]})},`${c.id}-${c.selectedSize}-${c.selectedColor}`))}),h.jsx("div",{className:"mt-6 pt-6 border-t",children:h.jsxs("div",{className:"flex justify-between text-base font-medium text-gray-900",children:[h.jsx("p",{children:"Total"}),h.jsxs("p",{children:[t.total.toLocaleString()," FDJ"]})]})})]})]}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-8",children:"Vos coordonnées"}),h.jsxs("form",{onSubmit:l,className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700",children:"Nom complet *"}),h.jsx("input",{type:"text",id:"fullName",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-500 focus:ring-sky-500",value:i.fullName,onChange:c=>o({...i,fullName:c.target.value})})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email (optionnel)"}),h.jsx("input",{type:"email",id:"email",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-500 focus:ring-sky-500",value:i.email,onChange:c=>o({...i,email:c.target.value})})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Téléphone *"}),h.jsx("input",{type:"tel",id:"phone",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-500 focus:ring-sky-500",value:i.phone,onChange:c=>o({...i,phone:c.target.value})})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"district",className:"block text-sm font-medium text-gray-700",children:"Quartier *"}),h.jsx("input",{type:"text",id:"district",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-500 focus:ring-sky-500",value:i.district,onChange:c=>o({...i,district:c.target.value})})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"comment",className:"block text-sm font-medium text-gray-700",children:"Commentaire (optionnel)"}),h.jsx("textarea",{id:"comment",rows:4,placeholder:"Instructions spéciales pour la livraison, préférences particulières...",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-500 focus:ring-sky-500",value:i.comment,onChange:c=>o({...i,comment:c.target.value})}),h.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Ajoutez ici toute information supplémentaire concernant votre commande."})]}),h.jsx("button",{type:"submit",disabled:r,className:`w-full bg-sky-600 text-white py-3 px-6 rounded-lg hover:bg-sky-700 transition-colors ${r?"opacity-50 cursor-not-allowed":""}`,children:r?"Envoi en cours...":"Confirmer la commande"})]})]})]})})})}function FU(){const t=Math.random().toString(36).substring(2,10).toUpperCase();return h.jsx("div",{className:"pt-16 bg-gray-50 min-h-screen",children:h.jsx("div",{className:"max-w-2xl mx-auto px-4 py-16 text-center",children:h.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[h.jsx("div",{className:"flex justify-center mb-6",children:h.jsx(aI,{className:"h-16 w-16 text-green-500"})}),h.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Merci pour votre commande !"}),h.jsxs("p",{className:"text-gray-600 mb-6",children:["Votre numéro de commande est : ",h.jsx("span",{className:"font-semibold",children:t})]}),h.jsx("p",{className:"text-gray-600 mb-8",children:"Nous vous contacterons bientôt pour confirmer les détails et organiser la livraison."}),h.jsx(fe,{to:"/",className:"inline-block bg-sky-600 text-white px-8 py-3 rounded-lg hover:bg-sky-700 transition-colors",children:"Retour à l'accueil"})]})})})}function iy({onFilterChange:t,minPrice:e,maxPrice:n}){const[r,s]=b.useState(""),[i,o]=b.useState([e,n]),[a,l]=b.useState(!0),c=(p=r,m=i)=>{s(p),o(m),t({sortBy:p,priceRange:m})},d=()=>{s(""),o([e,n]),t({sortBy:"",priceRange:[e,n]})};return h.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[h.jsx("div",{className:"bg-gradient-to-r from-sky-600 to-sky-500 px-6 py-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(H_,{className:"w-5 h-5 text-white"}),h.jsx("h2",{className:"text-lg font-semibold text-white",children:"Filtres"})]}),h.jsx("button",{onClick:()=>l(!a),className:"text-white hover:text-sky-100 transition-colors",children:a?h.jsx(wn,{className:"w-5 h-5"}):h.jsx(H_,{className:"w-5 h-5"})})]})}),a&&h.jsxs("div",{className:"p-6 space-y-8",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-semibold text-gray-800 mb-4",children:"Prix"}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("input",{type:"range",min:e,max:n,value:i[1],onChange:p=>c(r,[e,parseInt(p.target.value)]),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-sky-600"}),h.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[h.jsxs("span",{children:[e.toLocaleString()," FDJ"]}),h.jsxs("span",{children:[i[1].toLocaleString()," FDJ"]})]})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-semibold text-gray-800 mb-4",children:"Trier par prix"}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("button",{onClick:()=>c("price-asc",i),className:`w-full px-4 py-2 rounded-lg text-sm font-medium transition-colors ${r==="price-asc"?"bg-sky-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Prix croissant"}),h.jsx("button",{onClick:()=>c("price-desc",i),className:`w-full px-4 py-2 rounded-lg text-sm font-medium transition-colors ${r==="price-desc"?"bg-sky-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Prix décroissant"})]})]}),h.jsx("button",{onClick:d,className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors",children:"Réinitialiser les filtres"})]})]})}function UU(){const[t,e]=b.useState([]),[n,r]=b.useState(!0),[s,i]=b.useState(1),[o,a]=b.useState({sortBy:"",priceRange:[0,1e5]}),l=9;b.useEffect(()=>{(async()=>{try{const I=to(tr(dt,"products"),ug("category","==","men")),x=(await Fs(I)).docs.map(v=>({id:v.id,...v.data()}));if(e(x),x.length>0){const v=Math.max(...x.map(S=>S.price));a(S=>({...S,priceRange:[0,v]}))}}catch(I){console.error("Erreur lors de la récupération des produits:",I)}finally{r(!1)}})()},[]);const c=t.filter(y=>y.price<=o.priceRange[1]).sort((y,I)=>o.sortBy==="price-asc"?y.price-I.price:o.sortBy==="price-desc"?I.price-y.price:o.sortBy==="popularity"?I.popularity-y.popularity:o.sortBy==="newest"?I.createdAt-y.createdAt:0),d=c.slice((s-1)*l,s*l),p=Math.ceil(c.length/l);if(n)return h.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100"});const m=Math.min(...t.map(y=>y.price)),_=Math.max(...t.map(y=>y.price));return h.jsxs("div",{className:"pt-16 bg-gray-50",children:[h.jsxs("div",{className:"relative bg-gradient-to-r from-blue-500 to-green-500 text-white py-16 px-4 text-center",children:[h.jsx("h1",{className:"text-4xl font-extrabold mb-4",children:"Collection Hommes"}),h.jsx("p",{className:"text-lg",children:"Découvrez les dernières tendances en mode masculine et trouvez le style parfait."})]}),h.jsx("div",{className:"max-w-7xl mx-auto px-4 py-16",children:h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[h.jsx("div",{className:"lg:col-span-1",children:h.jsx(iy,{onFilterChange:a,minPrice:m,maxPrice:_})}),h.jsxs("div",{className:"lg:col-span-3",children:[h.jsxs("div",{className:"flex justify-between items-center mb-8",children:[h.jsxs("p",{className:"text-gray-600",children:[c.length," produits trouvés"]}),h.jsxs("select",{value:o.sortBy,onChange:y=>a({...o,sortBy:y.target.value}),className:"bg-white border border-gray-300 rounded-md text-gray-600 py-2 px-4",children:[h.jsx("option",{value:"",children:"Trier par"}),h.jsx("option",{value:"price-asc",children:"Prix: Croissant"}),h.jsx("option",{value:"price-desc",children:"Prix: Décroissant"}),h.jsx("option",{value:"popularity",children:"Popularité"}),h.jsx("option",{value:"newest",children:"Nouveautés"})]})]}),d.length===0?h.jsx("p",{className:"text-center text-gray-500",children:"Aucun produit ne correspond à vos critères."}):h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:d.map(y=>h.jsx(nl,{product:y},y.id))}),p>1&&h.jsx("div",{className:"flex justify-center mt-8",children:[...Array(p)].map((y,I)=>h.jsx("button",{onClick:()=>i(I+1),className:`mx-1 px-4 py-2 rounded-md ${s===I+1?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:I+1},I))})]})]})})]})}function BU(){const[t,e]=b.useState([]),[n,r]=b.useState(!0),[s,i]=b.useState({sortBy:"",priceRange:[0,1e5]});b.useEffect(()=>{(async()=>{try{const d=to(tr(dt,"products"),ug("category","==","women")),m=(await Fs(d)).docs.map(_=>({id:_.id,..._.data()}));if(e(m),m.length>0){const _=Math.max(...m.map(y=>y.price));i(y=>({...y,priceRange:[0,_]}))}}catch(d){console.error("Erreur lors de la récupération des produits:",d)}finally{r(!1)}})()},[]);const o=t.filter(c=>c.price<=s.priceRange[1]).sort((c,d)=>s.sortBy==="price-asc"?c.price-d.price:s.sortBy==="price-desc"?d.price-c.price:0),a=Math.min(...t.map(c=>c.price)),l=Math.max(...t.map(c=>c.price));return n?h.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:h.jsx(Et.div,{className:"h-12 w-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5}})}):h.jsxs("div",{className:"pt-16 bg-gray-50",children:[h.jsx("div",{className:"bg-gradient-to-r from-pink-100 to-purple-200 py-16",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4 text-center",children:[h.jsx(Et.h1,{className:"text-4xl md:text-5xl font-extrabold text-gray-800",initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:.8},children:"Collection Femmes"}),h.jsx("p",{className:"mt-4 text-lg md:text-xl text-gray-600",children:"Découvrez nos dernières tendances pour femme. Élégance et confort au rendez-vous."})]})}),h.jsx("div",{className:"max-w-7xl mx-auto px-4 py-12",children:h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[h.jsx(Et.div,{className:"lg:col-span-1",initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.6},children:h.jsx(iy,{onFilterChange:i,minPrice:a,maxPrice:l})}),h.jsxs(Et.div,{className:"lg:col-span-3",initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsx("p",{className:"text-sm text-gray-600",children:o.length>0?`${o.length} produit${o.length>1?"s":""} trouvé${o.length>1?"s":""}`:"Aucun produit trouvé."}),h.jsxs("select",{value:s.sortBy,onChange:c=>i(d=>({...d,sortBy:c.target.value})),className:"border border-gray-300 rounded-md p-2 bg-white text-sm focus:ring focus:ring-pink-300",children:[h.jsx("option",{value:"",children:"Trier par"}),h.jsx("option",{value:"price-asc",children:"Prix : du moins cher au plus cher"}),h.jsx("option",{value:"price-desc",children:"Prix : du plus cher au moins cher"})]})]}),o.length===0?h.jsx("p",{className:"text-center text-gray-500",children:"Aucun produit ne correspond à vos critères."}):h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:o.map(c=>h.jsx(nl,{product:c},c.id))})]})]})})]})}function zU(){const[t,e]=b.useState([]),[n,r]=b.useState(!0),[s,i]=b.useState({sortBy:"",priceRange:[0,1e5]});b.useEffect(()=>{(async()=>{try{const d=to(tr(dt,"products"),ug("category","==","children")),m=(await Fs(d)).docs.map(_=>({id:_.id,..._.data()}));if(e(m),m.length>0){const _=Math.max(...m.map(y=>y.price));i(y=>({...y,priceRange:[0,_]}))}}catch(d){console.error("Erreur lors de la récupération des produits:",d)}finally{r(!1)}})()},[]);const o=t.filter(c=>c.price<=s.priceRange[1]).sort((c,d)=>s.sortBy==="price-asc"?c.price-d.price:s.sortBy==="price-desc"?d.price-c.price:0),a=Math.min(...t.map(c=>c.price)),l=Math.max(...t.map(c=>c.price));return n?h.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:h.jsx(Et.div,{className:"h-12 w-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5}})}):h.jsxs("div",{className:"pt-16 bg-gray-50",children:[h.jsx("div",{className:"bg-gradient-to-r from-blue-100 to-green-200 py-16",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4 text-center",children:[h.jsx(Et.h1,{className:"text-4xl md:text-5xl font-extrabold text-gray-800",initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:.8},children:"Collection Enfants"}),h.jsx("p",{className:"mt-4 text-lg md:text-xl text-gray-600",children:"Explorez notre sélection pour les enfants. Vêtements de qualité et confort pour les petits."})]})}),h.jsx("div",{className:"max-w-7xl mx-auto px-4 py-12",children:h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[h.jsx(Et.div,{className:"lg:col-span-1",initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.6},children:h.jsx(iy,{onFilterChange:i,minPrice:a,maxPrice:l})}),h.jsxs(Et.div,{className:"lg:col-span-3",initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsx("p",{className:"text-sm text-gray-600",children:o.length>0?`${o.length} produit${o.length>1?"s":""} trouvé${o.length>1?"s":""}`:"Aucun produit trouvé."}),h.jsxs("select",{value:s.sortBy,onChange:c=>i(d=>({...d,sortBy:c.target.value})),className:"border border-gray-300 rounded-md p-2 bg-white text-sm focus:ring focus:ring-blue-300",children:[h.jsx("option",{value:"",children:"Trier par"}),h.jsx("option",{value:"price-asc",children:"Prix : du moins cher au plus cher"}),h.jsx("option",{value:"price-desc",children:"Prix : du plus cher au moins cher"})]})]}),o.length===0?h.jsx("p",{className:"text-center text-gray-500",children:"Aucun produit ne correspond à vos critères."}):h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:o.map(c=>h.jsx(nl,{product:c},c.id))})]})]})})]})}function $U(){const[t,e]=b.useState(""),[n,r]=b.useState(""),[s,i]=b.useState(""),[o,a]=b.useState(!1),l=Gi(),c=async d=>{d.preventDefault(),i(""),a(!0);try{await dT(ah,t,n),l("/admin/dashboard")}catch{i("Email ou mot de passe incorrect")}finally{a(!1)}};return h.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[h.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[h.jsx("div",{className:"flex justify-center",children:h.jsx(hI,{className:"h-12 w-12 text-sky-600"})}),h.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Administration AuraShop"})]}),h.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:h.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[s&&h.jsx("div",{className:"mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",children:s}),h.jsxs("form",{className:"space-y-6",onSubmit:c,children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),h.jsx("div",{className:"mt-1",children:h.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:d=>e(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500"})})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Mot de passe"}),h.jsx("div",{className:"mt-1",children:h.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:n,onChange:d=>r(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500"})})]}),h.jsx("div",{children:h.jsx("button",{type:"submit",disabled:o,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-sky-600 hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500 ${o?"opacity-50 cursor-not-allowed":""}`,children:o?"Connexion...":"Se connecter"})})]})]})})]})}function qU({children:t}){const{currentUser:e,loading:n}=iI();return n?h.jsx("div",{children:"Chargement..."}):e?h.jsx(h.Fragment,{children:t}):h.jsx(Wb,{to:"/admin/login"})}function WU({onEdit:t,onAdd:e}){const[n,r]=b.useState([]),[s,i]=b.useState(!0),[o,a]=b.useState(null);b.useEffect(()=>{l()},[]);const l=async()=>{try{const p=(await Fs(tr(dt,"products"))).docs.map(m=>({id:m.id,...m.data()}));r(p),console.log("Produits récupérés:",p)}catch(d){console.error("Erreur lors de la récupération des produits:",d)}finally{i(!1)}},c=async d=>{try{await fg(Or(dt,"products",d)),r(n.filter(p=>p.id!==d)),a(null)}catch(p){console.error("Erreur lors de la suppression:",p)}};return s?h.jsx("div",{className:"flex justify-center items-center h-64",children:h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-sky-600"})}):n.length===0?h.jsxs("div",{children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Liste des produits"}),h.jsxs("button",{onClick:e,className:"flex items-center px-4 py-2 bg-sky-600 text-white rounded-lg hover:bg-sky-700 transition-colors",children:[h.jsx(ja,{className:"w-5 h-5 mr-2"}),"Ajouter un produit"]})]}),h.jsx("div",{className:"text-center py-12",children:h.jsx("p",{className:"text-gray-500",children:"Aucun produit n'a été ajouté."})})]}):h.jsxs("div",{children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Liste des produits"}),h.jsxs("button",{onClick:e,className:"flex items-center px-4 py-2 bg-sky-600 text-white rounded-lg hover:bg-sky-700 transition-colors",children:[h.jsx(ja,{className:"w-5 h-5 mr-2"}),"Ajouter un produit"]})]}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[h.jsx("thead",{className:"bg-gray-50",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produit"}),h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Catégorie"}),h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prix"}),h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),h.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(d=>{var p;return h.jsxs("tr",{className:"hover:bg-gray-50",children:[h.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h.jsxs("div",{className:"flex items-center",children:[h.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:d.images&&d.images.length>0?h.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:d.images[0],alt:d.name}):h.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center",children:h.jsx(CM,{className:"w-6 h-6 text-gray-400"})})}),h.jsx("div",{className:"ml-4",children:h.jsx("div",{className:"text-sm font-medium text-gray-900",children:d.name})})]})}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-sky-100 text-sky-800",children:d.category==="men"?"Hommes":d.category==="women"?"Femmes":"Enfants"})}),h.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[(p=d.price)==null?void 0:p.toLocaleString()," FDJ"]}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:h.jsxs("div",{className:"flex space-x-2",children:[h.jsx("button",{onClick:()=>t(d),className:"text-sky-600 hover:text-sky-900",children:h.jsx(lh,{className:"w-5 h-5"})}),o===d.id?h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("button",{onClick:()=>c(d.id),className:"text-red-600 hover:text-red-900 text-xs font-medium",children:"Confirmer"}),h.jsx("button",{onClick:()=>a(null),className:"text-gray-600 hover:text-gray-900 text-xs font-medium",children:"Annuler"})]}):h.jsx("button",{onClick:()=>a(d.id),className:"text-red-600 hover:text-red-900",children:h.jsx(Ag,{className:"w-5 h-5"})})]})})]},d.id)})})]})})]})}function HU({order:t,onClose:e,onSave:n}){const[r,s]=b.useState({fullName:t.customerInfo.fullName,email:t.customerInfo.email||"",phone:t.customerInfo.phone,district:t.customerInfo.district,comment:t.customerInfo.comment||"",status:t.status}),[i,o]=b.useState(!1),a=async l=>{l.preventDefault(),o(!0);try{await n(t.id,{customerInfo:{fullName:r.fullName,email:r.email||null,phone:r.phone,district:r.district,comment:r.comment||null},status:r.status}),e()}catch(c){console.error("Erreur lors de la mise à jour:",c)}finally{o(!1)}};return h.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:h.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[h.jsx("div",{className:"fixed inset-0 transition-opacity",onClick:e,children:h.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),h.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:h.jsxs("form",{onSubmit:a,children:[h.jsxs("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[h.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Modifier la commande"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nom du client"}),h.jsx("input",{type:"text",value:r.fullName,onChange:l=>s({...r,fullName:l.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-500 focus:ring-sky-500",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),h.jsx("input",{type:"email",value:r.email,onChange:l=>s({...r,email:l.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-500 focus:ring-sky-500"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Téléphone"}),h.jsx("input",{type:"tel",value:r.phone,onChange:l=>s({...r,phone:l.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-500 focus:ring-sky-500",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Quartier"}),h.jsx("input",{type:"text",value:r.district,onChange:l=>s({...r,district:l.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-500 focus:ring-sky-500",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Commentaire"}),h.jsx("textarea",{value:r.comment,onChange:l=>s({...r,comment:l.target.value}),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-500 focus:ring-sky-500"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Statut"}),h.jsxs("select",{value:r.status,onChange:l=>s({...r,status:l.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-500 focus:ring-sky-500",children:[h.jsx("option",{value:"new",children:"Nouvelle"}),h.jsx("option",{value:"processing",children:"En cours"}),h.jsx("option",{value:"completed",children:"Livrée"})]})]})]})]}),h.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[h.jsx("button",{type:"submit",disabled:i,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-sky-600 text-base font-medium text-white hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500 sm:ml-3 sm:w-auto sm:text-sm",children:i?"Enregistrement...":"Enregistrer"}),h.jsx("button",{type:"button",onClick:e,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Annuler"})]})]})})]})})}function KU(){const[t,e]=b.useState([]),[n,r]=b.useState(!0),[s,i]=b.useState(null),[o,a]=b.useState(null),[l,c]=b.useState(null);b.useEffect(()=>{d()},[]);const d=async()=>{try{const T=to(tr(dt,"orders"),MS("createdAt","desc")),v=(await Fs(T)).docs.map(S=>{var R,O;return{id:S.id,...S.data(),createdAt:(R=S.data().createdAt)==null?void 0:R.toDate(),updatedAt:(O=S.data().updatedAt)==null?void 0:O.toDate()}});e(v)}catch(T){console.error("Erreur lors de la récupération des commandes:",T)}finally{r(!1)}},p=async(T,x)=>{try{await hc(Or(dt,"orders",T),{status:x,updatedAt:new Date}),e(t.map(v=>v.id===T?{...v,status:x,updatedAt:new Date}:v))}catch(v){console.error("Erreur lors de la mise à jour du statut:",v)}},m=async(T,x)=>{try{await hc(Or(dt,"orders",T),{...x,updatedAt:new Date}),e(t.map(v=>v.id===T?{...v,...x,updatedAt:new Date}:v))}catch(v){throw console.error("Erreur lors de la mise à jour:",v),v}},_=async T=>{try{await fg(Or(dt,"orders",T)),e(t.filter(x=>x.id!==T)),c(null)}catch(x){console.error("Erreur lors de la suppression:",x)}},y=T=>{switch(T){case"new":return h.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:"Nouvelle"});case"processing":return h.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:"En cours"});case"completed":return h.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"Livrée"})}},I=T=>{switch(T){case"new":return h.jsx(fc,{className:"w-5 h-5 text-blue-500"});case"processing":return h.jsx(Eg,{className:"w-5 h-5 text-yellow-500"});case"completed":return h.jsx(aI,{className:"w-5 h-5 text-green-500"})}};return n?h.jsx("div",{className:"flex justify-center items-center h-64",children:h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-sky-600"})}):t.length===0?h.jsxs("div",{className:"text-center py-12",children:[h.jsx(fc,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),h.jsx("p",{className:"text-gray-500",children:"Aucune commande n'a été passée."})]}):h.jsxs("div",{className:"space-y-6",children:[t.map(T=>h.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[h.jsxs("div",{className:"p-4 flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center space-x-4 flex-grow cursor-pointer",onClick:()=>i(s===T.id?null:T.id),children:[I(T.status),h.jsxs("div",{children:[h.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Commande de ",T.customerInfo.fullName]}),h.jsxs("p",{className:"text-sm text-gray-500",children:[T.createdAt.toLocaleDateString()," à ",T.createdAt.toLocaleTimeString()]})]})]}),h.jsxs("div",{className:"flex items-center space-x-4",children:[y(T.status),h.jsx("button",{onClick:()=>a(T),className:"text-sky-600 hover:text-sky-700",children:h.jsx(lh,{className:"w-5 h-5"})}),l===T.id?h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("button",{onClick:()=>_(T.id),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Confirmer"}),h.jsx("button",{onClick:()=>c(null),className:"text-gray-600 hover:text-gray-700 text-sm font-medium",children:"Annuler"})]}):h.jsx("button",{onClick:()=>c(T.id),className:"text-red-600 hover:text-red-700",children:h.jsx(Ag,{className:"w-5 h-5"})}),s===T.id?h.jsx(uI,{className:"w-5 h-5 text-gray-400"}):h.jsx(lI,{className:"w-5 h-5 text-gray-400"})]})]}),s===T.id&&h.jsxs("div",{className:"border-t px-4 py-6",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Informations client"}),h.jsxs("dl",{className:"space-y-2 text-sm",children:[h.jsxs("div",{children:[h.jsx("dt",{className:"text-gray-500",children:"Nom"}),h.jsx("dd",{className:"font-medium",children:T.customerInfo.fullName})]}),h.jsxs("div",{children:[h.jsx("dt",{className:"text-gray-500",children:"Téléphone"}),h.jsx("dd",{className:"font-medium",children:T.customerInfo.phone})]}),h.jsxs("div",{children:[h.jsx("dt",{className:"text-gray-500",children:"Email"}),h.jsx("dd",{className:"font-medium",children:T.customerInfo.email||"Non renseigné"})]}),h.jsxs("div",{children:[h.jsx("dt",{className:"text-gray-500",children:"Quartier"}),h.jsx("dd",{className:"font-medium",children:T.customerInfo.district})]}),T.customerInfo.comment&&h.jsxs("div",{children:[h.jsx("dt",{className:"text-gray-500",children:"Commentaire"}),h.jsx("dd",{className:"font-medium",children:T.customerInfo.comment})]})]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Articles commandés"}),h.jsx("div",{className:"whitespace-pre-wrap font-mono text-sm",children:T.items}),h.jsx("div",{className:"mt-4 pt-4 border-t",children:h.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["Total: ",T.total.toLocaleString()," FDJ"]})})]})]}),h.jsxs("div",{className:"mt-6 pt-6 border-t",children:[h.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Mettre à jour le statut"}),h.jsxs("div",{className:"flex space-x-4",children:[h.jsx("button",{onClick:()=>p(T.id,"new"),className:`px-4 py-2 rounded-md text-sm font-medium ${T.status==="new"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:"Nouvelle"}),h.jsx("button",{onClick:()=>p(T.id,"processing"),className:`px-4 py-2 rounded-md text-sm font-medium ${T.status==="processing"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:"En cours"}),h.jsx("button",{onClick:()=>p(T.id,"completed"),className:`px-4 py-2 rounded-md text-sm font-medium ${T.status==="completed"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:"Livrée"})]})]})]})]},T.id)),o&&h.jsx(HU,{order:o,onClose:()=>a(null),onSave:m})]})}function GU({customer:t,onClose:e,onSave:n}){const[r,s]=b.useState({fullName:t.info.fullName,email:t.info.email||"",district:t.info.district}),[i,o]=b.useState(!1),a=async l=>{l.preventDefault(),o(!0);try{await n(t.phone,{fullName:r.fullName,email:r.email||void 0,district:r.district}),e()}catch(c){console.error("Erreur lors de la mise à jour:",c)}finally{o(!1)}};return h.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:h.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[h.jsx("div",{className:"fixed inset-0 transition-opacity",onClick:e,children:h.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),h.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:h.jsxs("form",{onSubmit:a,children:[h.jsxs("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[h.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Modifier les informations du client"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nom complet"}),h.jsx("input",{type:"text",value:r.fullName,onChange:l=>s({...r,fullName:l.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-500 focus:ring-sky-500",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),h.jsx("input",{type:"email",value:r.email,onChange:l=>s({...r,email:l.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-500 focus:ring-sky-500"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Quartier"}),h.jsx("input",{type:"text",value:r.district,onChange:l=>s({...r,district:l.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-500 focus:ring-sky-500",required:!0})]})]})]}),h.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[h.jsx("button",{type:"submit",disabled:i,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-sky-600 text-base font-medium text-white hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500 sm:ml-3 sm:w-auto sm:text-sm",children:i?"Enregistrement...":"Enregistrer"}),h.jsx("button",{type:"button",onClick:e,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Annuler"})]})]})})]})})}function QU(){const[t,e]=b.useState({}),[n,r]=b.useState(!0),[s,i]=b.useState(null),[o,a]=b.useState(null),[l,c]=b.useState(null);b.useEffect(()=>{d()},[]);const d=async()=>{try{const y=to(tr(dt,"orders"),MS("createdAt","desc")),I=await Fs(y),T={};I.docs.forEach(x=>{var R,O;const v={id:x.id,...x.data(),createdAt:(R=x.data().createdAt)==null?void 0:R.toDate(),updatedAt:(O=x.data().updatedAt)==null?void 0:O.toDate()},S=v.customerInfo.phone;T[S]||(T[S]={info:{fullName:v.customerInfo.fullName,phone:v.customerInfo.phone,email:v.customerInfo.email,district:v.customerInfo.district},orders:[]}),T[S].orders.push(v)}),e(T)}catch(y){console.error("Erreur lors de la récupération des clients:",y)}finally{r(!1)}},p=async(y,I)=>{try{const T=t[y].orders;for(const x of T)await hc(Or(dt,"orders",x.id),{"customerInfo.fullName":I.fullName,"customerInfo.email":I.email,"customerInfo.district":I.district,updatedAt:new Date});e(x=>({...x,[y]:{...x[y],info:{...x[y].info,fullName:I.fullName,email:I.email,district:I.district}}})),a(null)}catch(T){throw console.error("Erreur lors de la mise à jour du client:",T),T}},m=async y=>{try{const I=t[y].orders;for(const x of I)await fg(Or(dt,"orders",x.id));const T={...t};delete T[y],e(T),c(null)}catch(I){console.error("Erreur lors de la suppression du client:",I)}},_=y=>{switch(y){case"new":return h.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:"Nouvelle"});case"processing":return h.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:"En cours"});case"completed":return h.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"Livrée"})}};return n?h.jsx("div",{className:"flex justify-center items-center h-64",children:h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-sky-600"})}):Object.keys(t).length===0?h.jsxs("div",{className:"text-center py-12",children:[h.jsx(K_,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),h.jsx("p",{className:"text-gray-500",children:"Aucun client n'a encore passé de commande."})]}):h.jsxs("div",{className:"space-y-6",children:[h.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-6",children:"Liste des clients"}),Object.entries(t).map(([y,I])=>h.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[h.jsxs("div",{className:"p-4 flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center space-x-4 flex-grow cursor-pointer",onClick:()=>i(s===y?null:y),children:[h.jsx(K_,{className:"w-10 h-10 text-gray-400 bg-gray-100 rounded-full p-2"}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-medium text-gray-900",children:I.info.fullName}),h.jsxs("div",{className:"flex items-center text-sm text-gray-500 mt-1",children:[h.jsx(Sg,{className:"w-4 h-4 mr-1"}),I.info.phone]})]})]}),h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs("div",{className:"text-sm text-gray-500",children:[I.orders.length," commande",I.orders.length>1?"s":""]}),h.jsx("button",{onClick:T=>{T.stopPropagation(),a(y)},className:"text-sky-600 hover:text-sky-700",children:h.jsx(lh,{className:"w-5 h-5"})}),l===y?h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("button",{onClick:T=>{T.stopPropagation(),m(y)},className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Confirmer"}),h.jsx("button",{onClick:T=>{T.stopPropagation(),c(null)},className:"text-gray-600 hover:text-gray-700 text-sm font-medium",children:"Annuler"})]}):h.jsx("button",{onClick:T=>{T.stopPropagation(),c(y)},className:"text-red-600 hover:text-red-700",children:h.jsx(Ag,{className:"w-5 h-5"})}),s===y?h.jsx(uI,{className:"w-5 h-5 text-gray-400"}):h.jsx(lI,{className:"w-5 h-5 text-gray-400"})]})]}),s===y&&h.jsx("div",{className:"border-t px-4 py-6",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Informations client"}),h.jsxs("dl",{className:"space-y-2 text-sm",children:[h.jsxs("div",{children:[h.jsx("dt",{className:"text-gray-500",children:"Email"}),h.jsx("dd",{className:"font-medium",children:I.info.email||"Non renseigné"})]}),h.jsxs("div",{children:[h.jsx("dt",{className:"text-gray-500",children:"Quartier"}),h.jsx("dd",{className:"font-medium",children:I.info.district})]}),h.jsxs("div",{children:[h.jsx("dt",{className:"text-gray-500",children:"Nombre total de commandes"}),h.jsx("dd",{className:"font-medium",children:I.orders.length})]})]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Historique des commandes"}),h.jsx("div",{className:"space-y-4",children:I.orders.map(T=>h.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx(fc,{className:"w-5 h-5 text-gray-400"}),h.jsxs("div",{children:[h.jsxs("p",{className:"text-sm font-medium",children:["Commande #",T.id.slice(-6).toUpperCase()]}),h.jsx("p",{className:"text-xs text-gray-500",children:T.createdAt.toLocaleDateString()})]})]}),h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsxs("span",{className:"text-sm font-medium",children:[T.total.toLocaleString()," FDJ"]}),_(T.status)]})]},T.id))})]})]})})]},y)),o&&h.jsx(GU,{customer:{phone:o,...t[o]},onClose:()=>a(null),onSave:p})]})}const XU=[{name:"Blanc",hex:"#FFFFFF"},{name:"Noir",hex:"#000000"},{name:"Bleu",hex:"#2196F3"},{name:"Rouge",hex:"#F44336"},{name:"Vert",hex:"#4CAF50"},{name:"Jaune",hex:"#FFEB3B"},{name:"Gris",hex:"#9E9E9E"},{name:"Marron",hex:"#795548"},{name:"Rose",hex:"#E91E63"},{name:"Violet",hex:"#9C27B0"}];function YU({product:t,onClose:e,onSuccess:n}){const[r,s]=b.useState({name:(t==null?void 0:t.name)||"",description:(t==null?void 0:t.description)||"",price:(t==null?void 0:t.price)||0,category:(t==null?void 0:t.category)||"men",sizes:(t==null?void 0:t.sizes)||["S","M","L","XL"],colors:(t==null?void 0:t.colors)||[],images:(t==null?void 0:t.images)||[]}),[i,o]=b.useState([]),[a,l]=b.useState(!1),[c,d]=b.useState(""),p=y=>{if(y.target.files){const I=Array.from(y.target.files);o(T=>[...T,...I])}},m=y=>{o(I=>I.filter((T,x)=>x!==y))},_=async y=>{y.preventDefault(),d(""),l(!0);try{if(r.colors.length===0)throw new Error("Veuillez sélectionner au moins une couleur");if(r.sizes.length===0)throw new Error("Veuillez sélectionner au moins une taille");if(r.price<=0)throw new Error("Le prix doit être supérieur à 0");const I=[...r.images];for(const x of i){const v=fM(_M,`products/${Date.now()}_${x.name}`),S=await hM(v,x),R=await dM(S.ref);I.push(R)}const T={name:r.name,description:r.description,price:r.price,category:r.category,sizes:r.sizes,colors:r.colors,images:I,updatedAt:dc()};t!=null&&t.id?await hc(Or(dt,"products",t.id),T):await US(tr(dt,"products"),{...T,createdAt:dc()}),n(),e()}catch(I){console.error("Erreur lors de l'enregistrement:",I),d(I instanceof Error?I.message:"Une erreur est survenue lors de l'enregistrement du produit.")}finally{l(!1)}};return h.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:h.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-4xl shadow-lg rounded-lg bg-white",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h2",{className:"text-xl font-bold text-gray-800",children:t?"Modifier le produit":"Ajouter un produit"}),h.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-500",children:h.jsx(wn,{className:"w-6 h-6"})})]}),c&&h.jsx("div",{className:"mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:c}),h.jsxs("form",{onSubmit:_,className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nom du produit *"}),h.jsx("input",{type:"text",required:!0,value:r.name,onChange:y=>s({...r,name:y.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-500 focus:ring-sky-500"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Catégorie *"}),h.jsxs("select",{value:r.category,onChange:y=>s({...r,category:y.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-500 focus:ring-sky-500",children:[h.jsx("option",{value:"men",children:"Hommes"}),h.jsx("option",{value:"women",children:"Femmes"}),h.jsx("option",{value:"children",children:"Enfants"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Prix (FDJ) *"}),h.jsx("input",{type:"number",required:!0,min:"0",value:r.price,onChange:y=>s({...r,price:parseInt(y.target.value)}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-500 focus:ring-sky-500"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description *"}),h.jsx("textarea",{required:!0,rows:4,value:r.description,onChange:y=>s({...r,description:y.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-500 focus:ring-sky-500"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tailles disponibles *"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:["XS","S","M","L","XL","XXL"].map(y=>h.jsxs("label",{className:"inline-flex items-center",children:[h.jsx("input",{type:"checkbox",checked:r.sizes.includes(y),onChange:I=>{I.target.checked?s({...r,sizes:[...r.sizes,y]}):s({...r,sizes:r.sizes.filter(T=>T!==y)})},className:"rounded border-gray-300 text-sky-600 shadow-sm focus:border-sky-500 focus:ring-sky-500"}),h.jsx("span",{className:"ml-2 text-sm text-gray-700",children:y})]},y))})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Couleurs disponibles *"}),h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:XU.map(y=>h.jsxs("label",{className:"inline-flex items-center p-2 border rounded hover:bg-gray-50",children:[h.jsx("input",{type:"checkbox",checked:r.colors.includes(y.hex),onChange:I=>{I.target.checked?s({...r,colors:[...r.colors,y.hex]}):s({...r,colors:r.colors.filter(T=>T!==y.hex)})},className:"rounded border-gray-300 text-sky-600 shadow-sm focus:border-sky-500 focus:ring-sky-500"}),h.jsx("span",{className:"ml-2 w-4 h-4 rounded border",style:{backgroundColor:y.hex}}),h.jsx("span",{className:"ml-2 text-sm text-gray-700",children:y.name})]},y.hex))})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Images du produit *"}),h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.images.map((y,I)=>h.jsxs("div",{className:"relative group",children:[h.jsx("img",{src:y,alt:`Product ${I+1}`,className:"h-32 w-full object-cover rounded-lg"}),h.jsx("button",{type:"button",onClick:()=>{s({...r,images:r.images.filter((T,x)=>x!==I)})},className:"absolute top-2 right-2 hidden group-hover:flex bg-red-500 text-white rounded-full p-1",children:h.jsx(wn,{className:"w-4 h-4"})})]},I)),i.map((y,I)=>h.jsxs("div",{className:"relative group",children:[h.jsx("img",{src:URL.createObjectURL(y),alt:`Preview ${I+1}`,className:"h-32 w-full object-cover rounded-lg"}),h.jsx("button",{type:"button",onClick:()=>m(I),className:"absolute top-2 right-2 hidden group-hover:flex bg-red-500 text-white rounded-full p-1",children:h.jsx(wn,{className:"w-4 h-4"})})]},I)),h.jsxs("label",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 h-32 flex flex-col items-center justify-center cursor-pointer hover:border-sky-500",children:[h.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:p,className:"hidden"}),h.jsx(FM,{className:"w-8 h-8 text-gray-400"}),h.jsx("span",{className:"mt-2 text-sm text-gray-500",children:"Ajouter des images"})]})]})]}),h.jsxs("div",{className:"flex justify-end space-x-4",children:[h.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Annuler"}),h.jsx("button",{type:"submit",disabled:a,className:`px-4 py-2 bg-sky-600 text-white rounded-md hover:bg-sky-700 flex items-center ${a?"opacity-50 cursor-not-allowed":""}`,children:a?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Enregistrement..."]}):h.jsxs(h.Fragment,{children:[h.jsx(ja,{className:"w-5 h-5 mr-2"}),t?"Mettre à jour":"Ajouter le produit"]})})]})]})]})})}function JU(){const t=Gi(),e=async()=>{try{await V2(ah),t("/")}catch(n){console.error("Erreur lors de la déconnexion:",n)}};return h.jsx("header",{className:"bg-white shadow",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 flex justify-between items-center",children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Tableau de bord administrateur"}),h.jsxs("button",{onClick:e,className:"flex items-center px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 transition-colors",children:[h.jsx(RM,{className:"w-4 h-4 mr-2"}),"Déconnexion"]})]})})}function ZU(){const[t,e]=b.useState("products"),[n,r]=b.useState(!1),[s,i]=b.useState(),o=c=>{i(c),r(!0)},a=()=>{i(void 0),r(!0)},l=()=>{r(!1),i(void 0)};return h.jsxs("div",{className:"min-h-screen bg-gray-50",children:[h.jsx(JU,{}),h.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-8",children:[h.jsx("div",{className:"border-b border-gray-200 mb-8",children:h.jsxs("nav",{className:"-mb-px flex space-x-8",children:[h.jsxs("button",{onClick:()=>e("products"),className:`${t==="products"?"border-sky-500 text-sky-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`,children:[h.jsx(fc,{className:"w-5 h-5 mr-2"}),"Produits"]}),h.jsxs("button",{onClick:()=>e("orders"),className:`${t==="orders"?"border-sky-500 text-sky-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`,children:[h.jsx(Ig,{className:"w-5 h-5 mr-2"}),"Commandes"]}),h.jsxs("button",{onClick:()=>e("customers"),className:`${t==="customers"?"border-sky-500 text-sky-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`,children:[h.jsx(UM,{className:"w-5 h-5 mr-2"}),"Clients"]})]})}),h.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[t==="products"&&h.jsx(WU,{onEdit:o,onAdd:a}),t==="orders"&&h.jsx(KU,{}),t==="customers"&&h.jsx(QU,{})]})]}),n&&h.jsx(YU,{product:s,onClose:()=>r(!1),onSuccess:l})]})}function e3(){const{favorites:t}=wg();return h.jsx("div",{className:"pt-16 bg-gray-50",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-16",children:[h.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-8",children:"Mes Favoris"}),t.length===0?h.jsx("div",{className:"text-center py-12",children:h.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas encore de produits favoris."})}):h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map(e=>h.jsx(nl,{product:e},e.id))})]})})}function t3(){return h.jsx(eN,{children:h.jsx(xM,{children:h.jsx(iN,{children:h.jsx(wM,{children:h.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[h.jsx(qM,{}),h.jsx("div",{className:"flex-grow",children:h.jsxs(Kb,{children:[h.jsx(qt,{path:"/",element:h.jsx(YM,{})}),h.jsx(qt,{path:"/about",element:h.jsx(wU,{})}),h.jsx(qt,{path:"/contact",element:h.jsx(OU,{})}),h.jsx(qt,{path:"/checkout",element:h.jsx(MU,{})}),h.jsx(qt,{path:"/confirmation",element:h.jsx(FU,{})}),h.jsx(qt,{path:"/hommes",element:h.jsx(UU,{})}),h.jsx(qt,{path:"/femmes",element:h.jsx(BU,{})}),h.jsx(qt,{path:"/enfants",element:h.jsx(zU,{})}),h.jsx(qt,{path:"/favoris",element:h.jsx(e3,{})}),h.jsx(qt,{path:"/admin/login",element:h.jsx($U,{})}),h.jsx(qt,{path:"/admin/dashboard",element:h.jsx(qU,{children:h.jsx(ZU,{})})})]})}),h.jsx(WM,{})]})})})})})}_1(document.getElementById("root")).render(h.jsx(b.StrictMode,{children:h.jsx(t3,{})}));
